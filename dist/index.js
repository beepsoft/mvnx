"use strict";function _interopDefault(ex){return ex&&"object"==typeof ex&&"default"in ex?ex.default:ex}Object.defineProperty(exports,"__esModule",{value:!0});var fs=_interopDefault(require("fs")),util$1=_interopDefault(require("util")),path=_interopDefault(require("path")),child_process=_interopDefault(require("child_process")),os=_interopDefault(require("os")),tty=_interopDefault(require("tty")),Stream=_interopDefault(require("stream")),http=_interopDefault(require("http")),Url=_interopDefault(require("url")),https=_interopDefault(require("https")),zlib=_interopDefault(require("zlib")),string_decoder=_interopDefault(require("string_decoder")),events=_interopDefault(require("events")),timers=_interopDefault(require("timers")),commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function commonjsRequire(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}function unwrapExports(x){return x&&x.__esModule&&Object.prototype.hasOwnProperty.call(x,"default")?x.default:x}function createCommonjsModule(fn,module){return fn(module={exports:{}},module.exports),module.exports}function getCjsExportFromNamespace(n){return n&&n.default||n}var isPromise=function(maybePromise){return!!maybePromise&&!!maybePromise.then&&"function"==typeof maybePromise.then},middleware={applyMiddleware:applyMiddleware,commandMiddlewareFactory:commandMiddlewareFactory,globalMiddlewareFactory:globalMiddlewareFactory};function globalMiddlewareFactory(globalMiddleware,context){return function(callback,applyBeforeValidation=!1){if(argsert_1("<array|function> [boolean]",[callback,applyBeforeValidation],arguments.length),Array.isArray(callback)){for(let i=0;i<callback.length;i++){if("function"!=typeof callback[i])throw Error("middleware must be a function");callback[i].applyBeforeValidation=applyBeforeValidation}Array.prototype.push.apply(globalMiddleware,callback)}else"function"==typeof callback&&(callback.applyBeforeValidation=applyBeforeValidation,globalMiddleware.push(callback));return context}}function commandMiddlewareFactory(commandMiddleware){return commandMiddleware?commandMiddleware.map(middleware=>(middleware.applyBeforeValidation=!1,middleware)):[]}function applyMiddleware(argv,yargs,middlewares,beforeValidation){const beforeValidationError=new Error("middleware cannot return a promise when applyBeforeValidation is true");return middlewares.reduce((accumulation,middleware)=>{if(middleware.applyBeforeValidation!==beforeValidation)return accumulation;if(isPromise(accumulation))return accumulation.then(initialObj=>Promise.all([initialObj,middleware(initialObj,yargs)])).then(([initialObj,middlewareObj])=>Object.assign(initialObj,middlewareObj));{const result=middleware(argv,yargs);if(beforeValidation&&isPromise(result))throw beforeValidationError;return isPromise(result)?result.then(middlewareObj=>Object.assign(accumulation,middlewareObj)):Object.assign(accumulation,result)}},argv)}const preserveCamelCase=string=>{let isLastCharLower=!1,isLastCharUpper=!1,isLastLastCharUpper=!1;for(let i=0;i<string.length;i++){const character=string[i];isLastCharLower&&/[a-zA-Z]/.test(character)&&character.toUpperCase()===character?(string=string.slice(0,i)+"-"+string.slice(i),isLastCharLower=!1,isLastLastCharUpper=isLastCharUpper,isLastCharUpper=!0,i++):isLastCharUpper&&isLastLastCharUpper&&/[a-zA-Z]/.test(character)&&character.toLowerCase()===character?(string=string.slice(0,i-1)+"-"+string.slice(i-1),isLastLastCharUpper=isLastCharUpper,isLastCharUpper=!1,isLastCharLower=!0):(isLastCharLower=character.toLowerCase()===character&&character.toUpperCase()!==character,isLastLastCharUpper=isLastCharUpper,isLastCharUpper=character.toUpperCase()===character&&character.toLowerCase()!==character)}return string},camelCase=(input,options)=>{if("string"!=typeof input&&!Array.isArray(input))throw new TypeError("Expected the input to be `string | string[]`");options=Object.assign({pascalCase:!1},options);return 0===(input=Array.isArray(input)?input.map(x=>x.trim()).filter(x=>x.length).join("-"):input.trim()).length?"":1===input.length?options.pascalCase?input.toUpperCase():input.toLowerCase():(input!==input.toLowerCase()&&(input=preserveCamelCase(input)),input=input.replace(/^[_.\- ]+/,"").toLowerCase().replace(/[_.\- ]+(\w|$)/g,(_,p1)=>p1.toUpperCase()).replace(/\d+(\w|$)/g,m=>m.toUpperCase()),x=input,options.pascalCase?x.charAt(0).toUpperCase()+x.slice(1):x);var x};var camelcase=camelCase,default_1=camelCase;camelcase.default=default_1;var decamelize=function(str,sep){if("string"!=typeof str)throw new TypeError("Expected a string");return sep=void 0===sep?"_":sep,str.replace(/([a-z\d])([A-Z])/g,"$1"+sep+"$2").replace(/([A-Z]+)([A-Z][a-z\d]+)/g,"$1"+sep+"$2").toLowerCase()},tokenizeArgString=function(argString){if(Array.isArray(argString))return argString.map(e=>"string"!=typeof e?e+"":e);argString=argString.trim();let i=0,prevC=null,c=null,opening=null;const args=[];for(let ii=0;ii<argString.length;ii++)prevC=c,c=argString.charAt(ii)," "!==c||opening?(c===opening?opening=null:"'"!==c&&'"'!==c||opening||(opening=c),args[i]||(args[i]=""),args[i]+=c):" "!==prevC&&i++;return args};function parse(args,opts){opts=Object.assign(Object.create(null),opts),args=tokenizeArgString(args);const aliases=combineAliases(Object.assign(Object.create(null),opts.alias)),configuration=Object.assign({"boolean-negation":!0,"camel-case-expansion":!0,"combine-arrays":!1,"dot-notation":!0,"duplicate-arguments-array":!0,"flatten-duplicate-arrays":!0,"greedy-arrays":!0,"halt-at-non-option":!1,"nargs-eats-options":!1,"negation-prefix":"no-","parse-numbers":!0,"populate--":!1,"set-placeholder-key":!1,"short-option-groups":!0,"strip-aliased":!1,"strip-dashed":!1,"unknown-options-as-args":!1},opts.configuration),defaults=Object.assign(Object.create(null),opts.default),configObjects=opts.configObjects||[],envPrefix=opts.envPrefix,notFlagsOption=configuration["populate--"],notFlagsArgv=notFlagsOption?"--":"_",newAliases=Object.create(null),defaulted=Object.create(null),__=opts.__||util$1.format,flags={aliases:Object.create(null),arrays:Object.create(null),bools:Object.create(null),strings:Object.create(null),numbers:Object.create(null),counts:Object.create(null),normalize:Object.create(null),configs:Object.create(null),nargs:Object.create(null),coercions:Object.create(null),keys:[]},negative=/^-([0-9]+(\.[0-9]+)?|\.[0-9]+)$/,negatedBoolean=new RegExp("^--"+configuration["negation-prefix"]+"(.+)");[].concat(opts.array).filter(Boolean).forEach((function(opt){const key=opt.key||opt,assignment=Object.keys(opt).map((function(key){return{boolean:"bools",string:"strings",number:"numbers"}[key]})).filter(Boolean).pop();assignment&&(flags[assignment][key]=!0),flags.arrays[key]=!0,flags.keys.push(key)})),[].concat(opts.boolean).filter(Boolean).forEach((function(key){flags.bools[key]=!0,flags.keys.push(key)})),[].concat(opts.string).filter(Boolean).forEach((function(key){flags.strings[key]=!0,flags.keys.push(key)})),[].concat(opts.number).filter(Boolean).forEach((function(key){flags.numbers[key]=!0,flags.keys.push(key)})),[].concat(opts.count).filter(Boolean).forEach((function(key){flags.counts[key]=!0,flags.keys.push(key)})),[].concat(opts.normalize).filter(Boolean).forEach((function(key){flags.normalize[key]=!0,flags.keys.push(key)})),Object.keys(opts.narg||{}).forEach((function(k){flags.nargs[k]=opts.narg[k],flags.keys.push(k)})),Object.keys(opts.coerce||{}).forEach((function(k){flags.coercions[k]=opts.coerce[k],flags.keys.push(k)})),Array.isArray(opts.config)||"string"==typeof opts.config?[].concat(opts.config).filter(Boolean).forEach((function(key){flags.configs[key]=!0})):Object.keys(opts.config||{}).forEach((function(k){flags.configs[k]=opts.config[k]})),function(...args){args.forEach((function(obj){Object.keys(obj||{}).forEach((function(key){flags.aliases[key]||(flags.aliases[key]=[].concat(aliases[key]||[]),flags.aliases[key].concat(key).forEach((function(x){if(/-/.test(x)&&configuration["camel-case-expansion"]){const c=camelcase(x);c!==key&&-1===flags.aliases[key].indexOf(c)&&(flags.aliases[key].push(c),newAliases[c]=!0)}})),flags.aliases[key].concat(key).forEach((function(x){if(x.length>1&&/[A-Z]/.test(x)&&configuration["camel-case-expansion"]){const c=decamelize(x,"-");c!==key&&-1===flags.aliases[key].indexOf(c)&&(flags.aliases[key].push(c),newAliases[c]=!0)}})),flags.aliases[key].forEach((function(x){flags.aliases[x]=[key].concat(flags.aliases[key].filter((function(y){return x!==y})))})))}))}))}(opts.key,aliases,opts.default,flags.arrays),Object.keys(defaults).forEach((function(key){(flags.aliases[key]||[]).forEach((function(alias){defaults[alias]=defaults[key]}))}));let error=null;Object.keys(flags.counts).find(key=>checkAllAliases(key,flags.arrays)?(error=Error(__("Invalid configuration: %s, opts.count excludes opts.array.",key)),!0):checkAllAliases(key,flags.nargs)?(error=Error(__("Invalid configuration: %s, opts.count excludes opts.narg.",key)),!0):void 0);let notFlags=[];const argv=Object.assign(Object.create(null),{_:[]}),argvReturn={};for(let i=0;i<args.length;i++){const arg=args[i];let broken,key,letters,m,next,value;if("--"!==arg&&isUnknownOptionAsArg(arg))argv._.push(arg);else if(arg.match(/^--.+=/)||!configuration["short-option-groups"]&&arg.match(/^-.+=/))m=arg.match(/^--?([^=]+)=([\s\S]*)$/),checkAllAliases(m[1],flags.arrays)?i=eatArray(i,m[1],args,m[2]):!1!==checkAllAliases(m[1],flags.nargs)?i=eatNargs(i,m[1],args,m[2]):setArg(m[1],m[2]);else if(arg.match(negatedBoolean)&&configuration["boolean-negation"])key=arg.match(negatedBoolean)[1],setArg(key,!!checkAllAliases(key,flags.arrays)&&[!1]);else if(arg.match(/^--.+/)||!configuration["short-option-groups"]&&arg.match(/^-[^-]+/))key=arg.match(/^--?(.+)/)[1],checkAllAliases(key,flags.arrays)?i=eatArray(i,key,args):!1!==checkAllAliases(key,flags.nargs)?i=eatNargs(i,key,args):(next=args[i+1],void 0===next||next.match(/^-/)&&!next.match(negative)||checkAllAliases(key,flags.bools)||checkAllAliases(key,flags.counts)?/^(true|false)$/.test(next)?(setArg(key,next),i++):setArg(key,defaultValue(key)):(setArg(key,next),i++));else if(arg.match(/^-.\..+=/))m=arg.match(/^-([^=]+)=([\s\S]*)$/),setArg(m[1],m[2]);else if(arg.match(/^-.\..+/)&&!arg.match(negative))next=args[i+1],key=arg.match(/^-(.\..+)/)[1],void 0===next||next.match(/^-/)||checkAllAliases(key,flags.bools)||checkAllAliases(key,flags.counts)?setArg(key,defaultValue(key)):(setArg(key,next),i++);else if(arg.match(/^-[^-]+/)&&!arg.match(negative)){letters=arg.slice(1,-1).split(""),broken=!1;for(let j=0;j<letters.length;j++){if(next=arg.slice(j+2),letters[j+1]&&"="===letters[j+1]){value=arg.slice(j+3),key=letters[j],checkAllAliases(key,flags.arrays)?i=eatArray(i,key,args,value):!1!==checkAllAliases(key,flags.nargs)?i=eatNargs(i,key,args,value):setArg(key,value),broken=!0;break}if("-"!==next){if(/[A-Za-z]/.test(letters[j])&&/^-?\d+(\.\d*)?(e-?\d+)?$/.test(next)){setArg(letters[j],next),broken=!0;break}if(letters[j+1]&&letters[j+1].match(/\W/)){setArg(letters[j],next),broken=!0;break}setArg(letters[j],defaultValue(letters[j]))}else setArg(letters[j],next)}key=arg.slice(-1)[0],broken||"-"===key||(checkAllAliases(key,flags.arrays)?i=eatArray(i,key,args):!1!==checkAllAliases(key,flags.nargs)?i=eatNargs(i,key,args):(next=args[i+1],void 0===next||/^(-|--)[^-]/.test(next)&&!next.match(negative)||checkAllAliases(key,flags.bools)||checkAllAliases(key,flags.counts)?/^(true|false)$/.test(next)?(setArg(key,next),i++):setArg(key,defaultValue(key)):(setArg(key,next),i++)))}else if(arg.match(/^-[0-9]$/)&&arg.match(negative)&&checkAllAliases(arg.slice(1),flags.bools))key=arg.slice(1),setArg(key,defaultValue(key));else{if("--"===arg){notFlags=args.slice(i+1);break}if(configuration["halt-at-non-option"]){notFlags=args.slice(i);break}argv._.push(maybeCoerceNumber("_",arg))}}function eatNargs(i,key,args,argAfterEqualSign){let ii,toEat=checkAllAliases(key,flags.nargs);if(toEat=isNaN(toEat)?1:toEat,0===toEat)return isUndefined(argAfterEqualSign)||(error=Error(__("Argument unexpected for: %s",key))),setArg(key,defaultValue(key)),i;let available=isUndefined(argAfterEqualSign)?0:1;if(configuration["nargs-eats-options"])args.length-(i+1)+available<toEat&&(error=Error(__("Not enough arguments following: %s",key))),available=toEat;else{for(ii=i+1;ii<args.length&&(!args[ii].match(/^-[^0-9]/)||args[ii].match(negative)||isUnknownOptionAsArg(args[ii]));ii++)available++;available<toEat&&(error=Error(__("Not enough arguments following: %s",key)))}let consumed=Math.min(available,toEat);for(!isUndefined(argAfterEqualSign)&&consumed>0&&(setArg(key,argAfterEqualSign),consumed--),ii=i+1;ii<consumed+i+1;ii++)setArg(key,args[ii]);return i+consumed}function eatArray(i,key,args,argAfterEqualSign){let argsToSet=[],next=argAfterEqualSign||args[i+1];const nargsCount=checkAllAliases(key,flags.nargs);if(checkAllAliases(key,flags.bools)&&!/^(true|false)$/.test(next))argsToSet.push(!0);else if(isUndefined(next)||isUndefined(argAfterEqualSign)&&/^-/.test(next)&&!negative.test(next)&&!isUnknownOptionAsArg(next)){if(void 0!==defaults[key]){const defVal=defaults[key];argsToSet=Array.isArray(defVal)?defVal:[defVal]}}else{isUndefined(argAfterEqualSign)||argsToSet.push(processValue(key,argAfterEqualSign));for(let ii=i+1;ii<args.length&&!(!configuration["greedy-arrays"]&&argsToSet.length>0||nargsCount&&argsToSet.length>=nargsCount)&&(next=args[ii],!/^-/.test(next)||negative.test(next)||isUnknownOptionAsArg(next));ii++)i=ii,argsToSet.push(processValue(key,next))}return(nargsCount&&argsToSet.length<nargsCount||isNaN(nargsCount)&&0===argsToSet.length)&&(error=Error(__("Not enough arguments following: %s",key))),setArg(key,argsToSet),i}function setArg(key,val){if(/-/.test(key)&&configuration["camel-case-expansion"]){const alias=key.split(".").map((function(prop){return camelcase(prop)})).join(".");!function addNewAlias(key,alias){flags.aliases[key]&&flags.aliases[key].length||(flags.aliases[key]=[alias],newAliases[alias]=!0);flags.aliases[alias]&&flags.aliases[alias].length||addNewAlias(alias,key)}(key,alias)}const value=processValue(key,val),splitKey=key.split(".");if(setKey(argv,splitKey,value),flags.aliases[key]&&flags.aliases[key].forEach((function(x){x=x.split("."),setKey(argv,x,value)})),splitKey.length>1&&configuration["dot-notation"]&&(flags.aliases[splitKey[0]]||[]).forEach((function(x){x=x.split(".");const a=[].concat(splitKey);a.shift(),x=x.concat(a),setKey(argv,x,value)})),checkAllAliases(key,flags.normalize)&&!checkAllAliases(key,flags.arrays)){[key].concat(flags.aliases[key]||[]).forEach((function(key){Object.defineProperty(argvReturn,key,{enumerable:!0,get:()=>val,set(value){val="string"==typeof value?path.normalize(value):value}})}))}}function processValue(key,val){"string"!=typeof val||"'"!==val[0]&&'"'!==val[0]||val[val.length-1]!==val[0]||(val=val.substring(1,val.length-1)),(checkAllAliases(key,flags.bools)||checkAllAliases(key,flags.counts))&&"string"==typeof val&&(val="true"===val);let value=Array.isArray(val)?val.map((function(v){return maybeCoerceNumber(key,v)})):maybeCoerceNumber(key,val);return checkAllAliases(key,flags.counts)&&(isUndefined(value)||"boolean"==typeof value)&&(value=increment),checkAllAliases(key,flags.normalize)&&checkAllAliases(key,flags.arrays)&&(value=Array.isArray(val)?val.map(path.normalize):path.normalize(val)),value}function maybeCoerceNumber(key,value){if(!checkAllAliases(key,flags.strings)&&!checkAllAliases(key,flags.bools)&&!Array.isArray(value)){(null!=(x=value)&&("number"==typeof x||!!/^0x[0-9a-f]+$/i.test(x)||!(x.length>1&&"0"===x[0])&&/^[-]?(?:\d+(?:\.\d*)?|\.\d+)(e[-+]?\d+)?$/.test(x))&&configuration["parse-numbers"]&&Number.isSafeInteger(Math.floor(value))||!isUndefined(value)&&checkAllAliases(key,flags.numbers))&&(value=Number(value))}var x;return value}function setConfigObject(config,prev){Object.keys(config).forEach((function(key){const value=config[key],fullKey=prev?prev+"."+key:key;"object"==typeof value&&null!==value&&!Array.isArray(value)&&configuration["dot-notation"]?setConfigObject(value,fullKey):(!hasKey(argv,fullKey.split("."))||checkAllAliases(fullKey,flags.arrays)&&configuration["combine-arrays"])&&setArg(fullKey,value)}))}function applyEnvVars(argv,configOnly){if(void 0===envPrefix)return;const prefix="string"==typeof envPrefix?envPrefix:"";Object.keys(process.env).forEach((function(envVar){if(""===prefix||0===envVar.lastIndexOf(prefix,0)){const keys=envVar.split("__").map((function(key,i){return 0===i&&(key=key.substring(prefix.length)),camelcase(key)}));(configOnly&&flags.configs[keys.join(".")]||!configOnly)&&!hasKey(argv,keys)&&setArg(keys.join("."),process.env[envVar])}}))}function applyDefaultsAndAliases(obj,aliases,defaults,canLog=!1){Object.keys(defaults).forEach((function(key){hasKey(obj,key.split("."))||(setKey(obj,key.split("."),defaults[key]),canLog&&(defaulted[key]=!0),(aliases[key]||[]).forEach((function(x){hasKey(obj,x.split("."))||setKey(obj,x.split("."),defaults[key])})))}))}function hasKey(obj,keys){let o=obj;configuration["dot-notation"]||(keys=[keys.join(".")]),keys.slice(0,-1).forEach((function(key){o=o[key]||{}}));const key=keys[keys.length-1];return"object"==typeof o&&key in o}function setKey(obj,keys,value){let o=obj;configuration["dot-notation"]||(keys=[keys.join(".")]),keys.slice(0,-1).forEach((function(key,index){key=sanitizeKey(key),"object"==typeof o&&void 0===o[key]&&(o[key]={}),"object"!=typeof o[key]||Array.isArray(o[key])?(Array.isArray(o[key])?o[key].push({}):o[key]=[o[key],{}],o=o[key][o[key].length-1]):o=o[key]}));const key=sanitizeKey(keys[keys.length-1]),isTypeArray=checkAllAliases(keys.join("."),flags.arrays),isValueArray=Array.isArray(value);let duplicate=configuration["duplicate-arguments-array"];!duplicate&&checkAllAliases(key,flags.nargs)&&(duplicate=!0,(!isUndefined(o[key])&&1===flags.nargs[key]||Array.isArray(o[key])&&o[key].length===flags.nargs[key])&&(o[key]=void 0)),value===increment?o[key]=increment(o[key]):Array.isArray(o[key])?duplicate&&isTypeArray&&isValueArray?o[key]=configuration["flatten-duplicate-arrays"]?o[key].concat(value):(Array.isArray(o[key][0])?o[key]:[o[key]]).concat([value]):duplicate||Boolean(isTypeArray)!==Boolean(isValueArray)?o[key]=o[key].concat([value]):o[key]=value:void 0===o[key]&&isTypeArray?o[key]=isValueArray?value:[value]:!duplicate||void 0===o[key]||checkAllAliases(key,flags.counts)||checkAllAliases(key,flags.bools)?o[key]=value:o[key]=[o[key],value]}function checkAllAliases(key,flag){const toCheck=[].concat(flags.aliases[key]||[],key),keys=Object.keys(flag),setAlias=toCheck.find(key=>keys.includes(key));return!!setAlias&&flag[setAlias]}function hasAnyFlag(key){return[].concat(Object.keys(flags).map(k=>flags[k])).some((function(flag){return Array.isArray(flag)?flag.includes(key):flag[key]}))}function isUnknownOptionAsArg(arg){return configuration["unknown-options-as-args"]&&function(arg){if(arg.match(negative))return!1;if(function(arg){if(arg.match(negative)||!arg.match(/^-[^-]+/))return!1;let next,hasAllFlags=!0;const letters=arg.slice(1).split("");for(let j=0;j<letters.length;j++){if(next=arg.slice(j+2),!hasAnyFlag(letters[j])){hasAllFlags=!1;break}if(letters[j+1]&&"="===letters[j+1]||"-"===next||/[A-Za-z]/.test(letters[j])&&/^-?\d+(\.\d*)?(e-?\d+)?$/.test(next)||letters[j+1]&&letters[j+1].match(/\W/))break}return hasAllFlags}(arg))return!1;return!function(arg,...patterns){return[].concat(...patterns).some((function(pattern){const match=arg.match(pattern);return match&&hasAnyFlag(match[1])}))}(arg,/^-+([^=]+?)=[\s\S]*$/,negatedBoolean,/^-+([^=]+?)$/,/^-+([^=]+?)-$/,/^-+([^=]+?\d+)$/,/^-+([^=]+?)\W+.*$/)}(arg)}function defaultValue(key){return checkAllAliases(key,flags.bools)||checkAllAliases(key,flags.counts)||!(`${key}`in defaults)?function(type){return{boolean:!0,string:"",number:void 0,array:[]}[type]}(function(key){let type="boolean";checkAllAliases(key,flags.strings)?type="string":checkAllAliases(key,flags.numbers)?type="number":checkAllAliases(key,flags.bools)?type="boolean":checkAllAliases(key,flags.arrays)&&(type="array");return type}(key)):defaults[key]}function isUndefined(num){return void 0===num}return applyEnvVars(argv,!0),applyEnvVars(argv,!1),function(argv){const configLookup=Object.create(null);applyDefaultsAndAliases(configLookup,flags.aliases,defaults),Object.keys(flags.configs).forEach((function(configKey){const configPath=argv[configKey]||configLookup[configKey];if(configPath)try{let config=null;const resolvedConfigPath=path.resolve(process.cwd(),configPath);if("function"==typeof flags.configs[configKey]){try{config=flags.configs[configKey](resolvedConfigPath)}catch(e){config=e}if(config instanceof Error)return void(error=config)}else config=commonjsRequire(resolvedConfigPath);setConfigObject(config)}catch(ex){argv[configKey]&&(error=Error(__("Invalid JSON config file: %s",configPath)))}}))}(argv),function(){if(void 0===configObjects)return;configObjects.forEach((function(configObject){setConfigObject(configObject)}))}(),applyDefaultsAndAliases(argv,flags.aliases,defaults,!0),function(argv){let coerce;const applied=new Set;Object.keys(argv).forEach((function(key){if(!applied.has(key)&&(coerce=checkAllAliases(key,flags.coercions),"function"==typeof coerce))try{const value=maybeCoerceNumber(key,coerce(argv[key]));[].concat(flags.aliases[key]||[],key).forEach(ali=>{applied.add(ali),argv[ali]=value})}catch(err){error=err}}))}(argv),configuration["set-placeholder-key"]&&function(argv){flags.keys.forEach(key=>{~key.indexOf(".")||void 0===argv[key]&&(argv[key]=void 0)})}(argv),Object.keys(flags.counts).forEach((function(key){hasKey(argv,key.split("."))||setArg(key,0)})),notFlagsOption&&notFlags.length&&(argv[notFlagsArgv]=[]),notFlags.forEach((function(key){argv[notFlagsArgv].push(key)})),configuration["camel-case-expansion"]&&configuration["strip-dashed"]&&Object.keys(argv).filter(key=>"--"!==key&&key.includes("-")).forEach(key=>{delete argv[key]}),configuration["strip-aliased"]&&[].concat(...Object.keys(aliases).map(k=>aliases[k])).forEach(alias=>{configuration["camel-case-expansion"]&&delete argv[alias.split(".").map(prop=>camelcase(prop)).join(".")],delete argv[alias]}),{argv:Object.assign(argvReturn,argv),error:error,aliases:Object.assign({},flags.aliases),newAliases:Object.assign({},newAliases),defaulted:Object.assign({},defaulted),configuration:configuration}}function combineAliases(aliases){const aliasArrays=[],combined=Object.create(null);let change=!0;for(Object.keys(aliases).forEach((function(key){aliasArrays.push([].concat(aliases[key],key))}));change;){change=!1;for(let i=0;i<aliasArrays.length;i++)for(let ii=i+1;ii<aliasArrays.length;ii++){if(aliasArrays[i].filter((function(v){return-1!==aliasArrays[ii].indexOf(v)})).length){aliasArrays[i]=aliasArrays[i].concat(aliasArrays[ii]),aliasArrays.splice(ii,1),change=!0;break}}}return aliasArrays.forEach((function(aliasArray){aliasArray=aliasArray.filter((function(v,i,self){return self.indexOf(v)===i})),combined[aliasArray.pop()]=aliasArray})),combined}function increment(orig){return void 0!==orig?orig+1:1}function Parser(args,opts){return parse(args.slice(),opts).argv}function sanitizeKey(key){return"__proto__"===key?"___proto___":key}Parser.detailed=function(args,opts){return parse(args.slice(),opts)};var yargsParser=Parser,join=path.join,resolve=path.resolve,dirname=path.dirname,defaultOptions={extensions:["js","json","coffee"],recurse:!0,rename:function(name){return name},visit:function(obj){return obj}};function checkFileInclusion(path,filename,options){return new RegExp("\\.("+options.extensions.join("|")+")$","i").test(filename)&&!(options.include&&options.include instanceof RegExp&&!options.include.test(path))&&!(options.include&&"function"==typeof options.include&&!options.include(path,filename))&&!(options.exclude&&options.exclude instanceof RegExp&&options.exclude.test(path))&&!(options.exclude&&"function"==typeof options.exclude&&options.exclude(path,filename))}function requireDirectory(m,path,options){var retval={};for(var prop in path&&!options&&"string"!=typeof path&&(options=path,path=null),options=options||{},defaultOptions)void 0===options[prop]&&(options[prop]=defaultOptions[prop]);return path=path?resolve(dirname(m.filename),path):dirname(m.filename),fs.readdirSync(path).forEach((function(filename){var files,key,obj,joined=join(path,filename);fs.statSync(joined).isDirectory()&&options.recurse?(files=requireDirectory(m,joined,options),Object.keys(files).length&&(retval[options.rename(filename,joined,filename)]=files)):joined!==m.filename&&checkFileInclusion(joined,filename,options)&&(key=filename.substring(0,filename.lastIndexOf(".")),obj=m.require(joined),retval[options.rename(key,joined,filename)]=options.visit(obj,joined,filename)||obj)})),retval}var requireDirectory_1=requireDirectory,defaults=defaultOptions;requireDirectory_1.defaults=defaults;var whichModule=function(exported){for(var mod,i=0,files=Object.keys(commonjsRequire.cache);i<files.length;i++)if((mod=commonjsRequire.cache[files[i]]).exports===exported)return mod;return null};const inspect=util$1.inspect,{applyMiddleware:applyMiddleware$1,commandMiddlewareFactory:commandMiddlewareFactory$1}=middleware,DEFAULT_MARKER=/(^\*)|(^\$0)/;var command=function(yargs,usage,validation,globalMiddleware){const self={};let defaultCommand,handlers={},aliasMap={};function shouldUpdateUsage(yargs){return!yargs.getUsageInstance().getUsageDisabled()&&0===yargs.getUsageInstance().getUsage().length}function usageFromParentCommandsCommandHandler(parentCommands,commandHandler){const c=DEFAULT_MARKER.test(commandHandler.original)?commandHandler.original.replace(DEFAULT_MARKER,"").trim():commandHandler.original,pc=parentCommands.filter(c=>!DEFAULT_MARKER.test(c));return pc.push(c),`$0 ${pc.join(" ")}`}function populatePositional(positional,argv,positionalMap,parseOptions){const cmd=positional.cmd[0];positional.variadic?positionalMap[cmd]=argv._.splice(0).map(String):argv._.length&&(positionalMap[cmd]=[String(argv._.shift())])}function postProcessPositionals(argv,positionalMap,parseOptions){const options=Object.assign({},yargs.getOptions());options.default=Object.assign(parseOptions.default,options.default),options.alias=Object.assign(parseOptions.alias,options.alias),options.array=options.array.concat(parseOptions.array),delete options.config;const unparsed=[];if(Object.keys(positionalMap).forEach(key=>{positionalMap[key].map(value=>{options.configuration["unknown-options-as-args"]&&(options.key[key]=!0),unparsed.push(`--${key}`),unparsed.push(value)})}),!unparsed.length)return;const config=Object.assign({},options.configuration,{"populate--":!0}),parsed=yargsParser.detailed(unparsed,Object.assign({},options,{configuration:config}));if(parsed.error)yargs.getUsageInstance().fail(parsed.error.message,parsed.error);else{const positionalKeys=Object.keys(positionalMap);Object.keys(positionalMap).forEach(key=>{[].push.apply(positionalKeys,parsed.aliases[key])}),Object.keys(parsed.argv).forEach(key=>{-1!==positionalKeys.indexOf(key)&&(positionalMap[key]||(positionalMap[key]=parsed.argv[key]),argv[key]=parsed.argv[key])})}}globalMiddleware=globalMiddleware||[],self.addHandler=function(cmd,description,builder,handler,commandMiddleware){let aliases=[];const middlewares=commandMiddlewareFactory$1(commandMiddleware);if(handler=handler||(()=>{}),Array.isArray(cmd))aliases=cmd.slice(1),cmd=cmd[0];else if("object"==typeof cmd){let command=Array.isArray(cmd.command)||"string"==typeof cmd.command?cmd.command:function(obj){const mod=whichModule(obj);if(!mod)throw new Error(`No command name given for module: ${inspect(obj)}`);return filename=mod.filename,path.basename(filename,path.extname(filename));var filename}(cmd);return cmd.aliases&&(command=[].concat(command).concat(cmd.aliases)),void self.addHandler(command,function(obj){for(let test,keys=["describe","description","desc"],i=0,l=keys.length;i<l;i++)if(test=obj[keys[i]],"string"==typeof test||"boolean"==typeof test)return test;return!1}(cmd),cmd.builder,cmd.handler,cmd.middlewares)}if("object"==typeof builder&&builder.builder&&"function"==typeof builder.handler)return void self.addHandler([cmd].concat(aliases),description,builder.builder,builder.handler,builder.middlewares);const parsedCommand=self.parseCommand(cmd);aliases=aliases.map(alias=>self.parseCommand(alias).cmd);let isDefault=!1;const parsedAliases=[parsedCommand.cmd].concat(aliases).filter(c=>!DEFAULT_MARKER.test(c)||(isDefault=!0,!1));0===parsedAliases.length&&isDefault&&parsedAliases.push("$0"),isDefault&&(parsedCommand.cmd=parsedAliases[0],aliases=parsedAliases.slice(1),cmd=cmd.replace(DEFAULT_MARKER,parsedCommand.cmd)),aliases.forEach(alias=>{aliasMap[alias]=parsedCommand.cmd}),!1!==description&&usage.command(cmd,description,isDefault,aliases),handlers[parsedCommand.cmd]={original:cmd,description:description,handler:handler,builder:builder||{},middlewares:middlewares,demanded:parsedCommand.demanded,optional:parsedCommand.optional},isDefault&&(defaultCommand=handlers[parsedCommand.cmd])},self.addDirectory=function(dir,context,req,callerFile,opts){"boolean"!=typeof(opts=opts||{}).recurse&&(opts.recurse=!1),Array.isArray(opts.extensions)||(opts.extensions=["js"]);const parentVisit="function"==typeof opts.visit?opts.visit:o=>o;opts.visit=function(obj,joined,filename){const visited=parentVisit(obj,joined,filename);if(visited){if(~context.files.indexOf(joined))return visited;context.files.push(joined),self.addHandler(visited)}return visited},requireDirectory_1({require:req,filename:callerFile},dir,opts)},self.parseCommand=function(cmd){const splitCommand=cmd.replace(/\s{2,}/g," ").split(/\s+(?![^[]*]|[^<]*>)/),bregex=/\.*[\][<>]/g,parsedCommand={cmd:splitCommand.shift().replace(bregex,""),demanded:[],optional:[]};return splitCommand.forEach((cmd,i)=>{let variadic=!1;cmd=cmd.replace(/\s/g,""),/\.+[\]>]/.test(cmd)&&i===splitCommand.length-1&&(variadic=!0),/^\[/.test(cmd)?parsedCommand.optional.push({cmd:cmd.replace(bregex,"").split("|"),variadic:variadic}):parsedCommand.demanded.push({cmd:cmd.replace(bregex,"").split("|"),variadic:variadic})}),parsedCommand},self.getCommands=()=>Object.keys(handlers).concat(Object.keys(aliasMap)),self.getCommandHandlers=()=>handlers,self.hasDefaultCommand=()=>!!defaultCommand,self.runCommand=function(command,yargs,parsed,commandIndex){let aliases=parsed.aliases;const commandHandler=handlers[command]||handlers[aliasMap[command]]||defaultCommand,currentContext=yargs.getContext();let numFiles=currentContext.files.length;const parentCommands=currentContext.commands.slice();let innerArgv=parsed.argv,innerYargs=null,positionalMap={};command&&(currentContext.commands.push(command),currentContext.fullCommands.push(commandHandler.original)),"function"==typeof commandHandler.builder?(innerYargs=commandHandler.builder(yargs.reset(parsed.aliases)),innerYargs&&"function"==typeof innerYargs._parseArgs||(innerYargs=yargs),shouldUpdateUsage(innerYargs)&&innerYargs.getUsageInstance().usage(usageFromParentCommandsCommandHandler(parentCommands,commandHandler),commandHandler.description),innerArgv=innerYargs._parseArgs(null,null,!0,commandIndex),aliases=innerYargs.parsed.aliases):"object"==typeof commandHandler.builder&&(innerYargs=yargs.reset(parsed.aliases),shouldUpdateUsage(innerYargs)&&innerYargs.getUsageInstance().usage(usageFromParentCommandsCommandHandler(parentCommands,commandHandler),commandHandler.description),Object.keys(commandHandler.builder).forEach(key=>{innerYargs.option(key,commandHandler.builder[key])}),innerArgv=innerYargs._parseArgs(null,null,!0,commandIndex),aliases=innerYargs.parsed.aliases),yargs._hasOutput()||(positionalMap=function(commandHandler,argv,context,yargs){argv._=argv._.slice(context.commands.length);const demanded=commandHandler.demanded.slice(0),optional=commandHandler.optional.slice(0),positionalMap={};validation.positionalCount(demanded.length,argv._.length);for(;demanded.length;){populatePositional(demanded.shift(),argv,positionalMap)}for(;optional.length;){populatePositional(optional.shift(),argv,positionalMap)}return argv._=context.commands.concat(argv._),postProcessPositionals(argv,positionalMap,self.cmdToParseOptions(commandHandler.original)),positionalMap}(commandHandler,innerArgv,currentContext));const middlewares=globalMiddleware.slice(0).concat(commandHandler.middlewares);if(applyMiddleware$1(innerArgv,yargs,middlewares,!0),yargs._hasOutput()||yargs._runValidation(innerArgv,aliases,positionalMap,yargs.parsed.error),commandHandler.handler&&!yargs._hasOutput()){let handlerResult;yargs._setHasOutput(),!!yargs.getOptions().configuration["populate--"]||yargs._copyDoubleDash(innerArgv),innerArgv=applyMiddleware$1(innerArgv,yargs,middlewares,!1),handlerResult=isPromise(innerArgv)?innerArgv.then(argv=>commandHandler.handler(argv)):commandHandler.handler(innerArgv);const handlerFinishCommand=yargs.getHandlerFinishCommand();isPromise(handlerResult)?(yargs.getUsageInstance().cacheHelpMessage(),handlerResult.then(value=>{handlerFinishCommand&&handlerFinishCommand(value)}).catch(error=>{try{yargs.getUsageInstance().fail(null,error)}catch(err){}}).then(()=>{yargs.getUsageInstance().clearCachedHelpMessage()})):handlerFinishCommand&&handlerFinishCommand(handlerResult)}return command&&(currentContext.commands.pop(),currentContext.fullCommands.pop()),numFiles=currentContext.files.length-numFiles,numFiles>0&&currentContext.files.splice(-1*numFiles,numFiles),innerArgv},self.runDefaultBuilderOn=function(yargs){if(shouldUpdateUsage(yargs)){const commandString=DEFAULT_MARKER.test(defaultCommand.original)?defaultCommand.original:defaultCommand.original.replace(/^[^[\]<>]*/,"$0 ");yargs.getUsageInstance().usage(commandString,defaultCommand.description)}const builder=defaultCommand.builder;"function"==typeof builder?builder(yargs):Object.keys(builder).forEach(key=>{yargs.option(key,builder[key])})},self.cmdToParseOptions=function(cmdString){const parseOptions={array:[],default:{},alias:{},demand:{}},parsed=self.parseCommand(cmdString);return parsed.demanded.forEach(d=>{const cmds=d.cmd.slice(0),cmd=cmds.shift();d.variadic&&(parseOptions.array.push(cmd),parseOptions.default[cmd]=[]),cmds.forEach(c=>{parseOptions.alias[cmd]=c}),parseOptions.demand[cmd]=!0}),parsed.optional.forEach(o=>{const cmds=o.cmd.slice(0),cmd=cmds.shift();o.variadic&&(parseOptions.array.push(cmd),parseOptions.default[cmd]=[]),cmds.forEach(c=>{parseOptions.alias[cmd]=c})}),parseOptions},self.reset=()=>(handlers={},aliasMap={},defaultCommand=void 0,self);const frozens=[];return self.freeze=()=>{const frozen={};frozens.push(frozen),frozen.handlers=handlers,frozen.aliasMap=aliasMap,frozen.defaultCommand=defaultCommand},self.unfreeze=()=>{const frozen=frozens.pop();handlers=frozen.handlers,aliasMap=frozen.aliasMap,defaultCommand=frozen.defaultCommand},self};function YError(msg){this.name="YError",this.message=msg||"yargs error",Error.captureStackTrace(this,YError)}YError.prototype=Object.create(Error.prototype),YError.prototype.constructor=YError;var yerror=YError,argsert_1=argsert;const command$1=command(),positionName=["first","second","third","fourth","fifth","sixth"];function argsert(expected,callerArguments,length){try{let position=0,parsed={demanded:[],optional:[]};"object"==typeof expected?(length=callerArguments,callerArguments=expected):parsed=command$1.parseCommand(`cmd ${expected}`);const args=[].slice.call(callerArguments);for(;args.length&&void 0===args[args.length-1];)args.pop();if((length=length||args.length)<parsed.demanded.length)throw new yerror(`Not enough arguments provided. Expected ${parsed.demanded.length} but received ${args.length}.`);const totalCommands=parsed.demanded.length+parsed.optional.length;if(length>totalCommands)throw new yerror(`Too many arguments provided. Expected max ${totalCommands} but received ${length}.`);parsed.demanded.forEach(demanded=>{const observedType=guessType(args.shift());0===demanded.cmd.filter(type=>type===observedType||"*"===type).length&&argumentTypeError(observedType,demanded.cmd,position,!1),position+=1}),parsed.optional.forEach(optional=>{if(0===args.length)return;const observedType=guessType(args.shift());0===optional.cmd.filter(type=>type===observedType||"*"===type).length&&argumentTypeError(observedType,optional.cmd,position,!0),position+=1})}catch(err){console.warn(err.stack)}}function guessType(arg){return Array.isArray(arg)?"array":null===arg?"null":typeof arg}function argumentTypeError(observedType,allowedTypes,position,optional){throw new yerror(`Invalid ${positionName[position]||"manyith"} argument. Expected ${allowedTypes.join(" or ")} but received ${observedType}.`)}var completionShTemplate='###-begin-{{app_name}}-completions-###\n#\n# yargs command completion script\n#\n# Installation: {{app_path}} {{completion_command}} >> ~/.bashrc\n#    or {{app_path}} {{completion_command}} >> ~/.bash_profile on OSX.\n#\n_yargs_completions()\n{\n    local cur_word args type_list\n\n    cur_word="${COMP_WORDS[COMP_CWORD]}"\n    args=("${COMP_WORDS[@]}")\n\n    # ask yargs to generate completions.\n    type_list=$({{app_path}} --get-yargs-completions "${args[@]}")\n\n    COMPREPLY=( $(compgen -W "${type_list}" -- ${cur_word}) )\n\n    # if no match was found, fall back to filename completion\n    if [ ${#COMPREPLY[@]} -eq 0 ]; then\n      COMPREPLY=()\n    fi\n\n    return 0\n}\ncomplete -o default -F _yargs_completions {{app_name}}\n###-end-{{app_name}}-completions-###\n',completionZshTemplate='###-begin-{{app_name}}-completions-###\n#\n# yargs command completion script\n#\n# Installation: {{app_path}} {{completion_command}} >> ~/.zshrc\n#    or {{app_path}} {{completion_command}} >> ~/.zsh_profile on OSX.\n#\n_{{app_name}}_yargs_completions()\n{\n  local reply\n  local si=$IFS\n  IFS=$\'\n\' reply=($(COMP_CWORD="$((CURRENT-1))" COMP_LINE="$BUFFER" COMP_POINT="$CURSOR" {{app_path}} --get-yargs-completions "${words[@]}"))\n  IFS=$si\n  _describe \'values\' reply\n}\ncompdef _{{app_name}}_yargs_completions {{app_name}}\n###-end-{{app_name}}-completions-###\n',completionTemplates={completionShTemplate:completionShTemplate,completionZshTemplate:completionZshTemplate},completion=function(yargs,usage,command){const self={completionKey:"get-yargs-completions"};let aliases;self.setParsed=function(parsed){aliases=parsed.aliases};const zshShell=process.env.SHELL&&-1!==process.env.SHELL.indexOf("zsh")||process.env.ZSH_NAME&&-1!==process.env.ZSH_NAME.indexOf("zsh");self.getCompletion=function(args,done){const completions=[],current=args.length?args[args.length-1]:"",argv=yargs.parse(args,!0),parentCommands=yargs.getContext().commands;if(completionFunction){if(completionFunction.length<3){const result=completionFunction(current,argv);return"function"==typeof result.then?result.then(list=>{process.nextTick(()=>{done(list)})}).catch(err=>{process.nextTick(()=>{throw err})}):done(result)}return completionFunction(current,argv,completions=>{done(completions)})}const handlers=command.getCommandHandlers();for(let i=0,ii=args.length;i<ii;++i)if(handlers[args[i]]&&handlers[args[i]].builder){const builder=handlers[args[i]].builder;if("function"==typeof builder){const y=yargs.reset();return builder(y),y.argv}}if(current.match(/^-/)||parentCommands[parentCommands.length-1]===current||usage.getCommands().forEach(usageCommand=>{const commandName=command.parseCommand(usageCommand[0]).cmd;if(-1===args.indexOf(commandName))if(zshShell){const desc=usageCommand[1]||"";completions.push(commandName.replace(/:/g,"\\:")+":"+desc)}else completions.push(commandName)}),current.match(/^-/)||""===current&&0===completions.length){const descs=usage.getDescriptions(),options=yargs.getOptions();Object.keys(options.key).forEach(key=>{const negable=!!options.configuration["boolean-negation"]&&options.boolean.includes(key);let keyAndAliases=[key].concat(aliases[key]||[]);function completeOptionKey(key){if(keyAndAliases.every(val=>-1===args.indexOf(`--${val}`))){const isShortOption=s=>/^[^0-9]$/.test(s),dashes=!(s=>/^--/.test(s))(current)&&isShortOption(key)?"-":"--";if(zshShell){const desc=descs[key]||"";completions.push(dashes+`${key.replace(/:/g,"\\:")}:${desc.replace("__yargsString__:","")}`)}else completions.push(dashes+key)}}negable&&(keyAndAliases=keyAndAliases.concat(keyAndAliases.map(key=>`no-${key}`))),completeOptionKey(key),negable&&options.default[key]&&completeOptionKey(`no-${key}`)})}done(completions)},self.generateCompletionScript=function($0,cmd){const templates=completionTemplates;let script=zshShell?templates.completionZshTemplate:templates.completionShTemplate;const name=path.basename($0);return $0.match(/\.js$/)&&($0=`./${$0}`),script=script.replace(/{{app_name}}/g,name),script=script.replace(/{{completion_command}}/g,cmd),script.replace(/{{app_path}}/g,$0)};let completionFunction=null;return self.registerFunction=fn=>{completionFunction=fn},self},ansiRegex=({onlyFirst:onlyFirst=!1}={})=>{const pattern=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:[a-zA-Z\\d]*(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-ntqry=><~]))"].join("|");return new RegExp(pattern,onlyFirst?void 0:"g")},stripAnsi=string=>"string"==typeof string?string.replace(ansiRegex(),""):string;const isFullwidthCodePoint=codePoint=>!Number.isNaN(codePoint)&&(codePoint>=4352&&(codePoint<=4447||9001===codePoint||9002===codePoint||11904<=codePoint&&codePoint<=12871&&12351!==codePoint||12880<=codePoint&&codePoint<=19903||19968<=codePoint&&codePoint<=42182||43360<=codePoint&&codePoint<=43388||44032<=codePoint&&codePoint<=55203||63744<=codePoint&&codePoint<=64255||65040<=codePoint&&codePoint<=65049||65072<=codePoint&&codePoint<=65131||65281<=codePoint&&codePoint<=65376||65504<=codePoint&&codePoint<=65510||110592<=codePoint&&codePoint<=110593||127488<=codePoint&&codePoint<=127569||131072<=codePoint&&codePoint<=262141));var isFullwidthCodePoint_1=isFullwidthCodePoint,default_1$1=isFullwidthCodePoint;isFullwidthCodePoint_1.default=default_1$1;var emojiRegex=function(){return/\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73)\uDB40\uDC7F|\uD83D\uDC68(?:\uD83C\uDFFC\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68\uD83C\uDFFB|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFE])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFD])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFC])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83D\uDC68|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D[\uDC66\uDC67])|[\u2695\u2696\u2708]\uFE0F|\uD83D[\uDC66\uDC67]|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|(?:\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708])\uFE0F|\uD83C\uDFFB\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C[\uDFFB-\uDFFF])|(?:\uD83E\uDDD1\uD83C\uDFFB\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D\uD83D\uDC69)\uD83C\uDFFB|\uD83E\uDDD1(?:\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])|\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1)|(?:\uD83E\uDDD1\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB-\uDFFE])|(?:\uD83E\uDDD1\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D\uD83D\uDC69)(?:\uD83C[\uDFFB\uDFFC])|\uD83D\uDC69(?:\uD83C\uDFFE\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFB\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFC-\uDFFF])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|(?:\uD83E\uDDD1\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D\uD83D\uDC69)(?:\uD83C[\uDFFB-\uDFFD])|\uD83D\uDC69\u200D\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83D\uDC69(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|(?:(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)\uFE0F|\uD83D\uDC6F|\uD83E[\uDD3C\uDDDE\uDDDF])\u200D[\u2640\u2642]|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD6-\uDDDD])(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|\u200D[\u2640\u2642])|\uD83C\uDFF4\u200D\u2620)\uFE0F|\uD83D\uDC69\u200D\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|\uD83D\uDC15\u200D\uD83E\uDDBA|\uD83D\uDC69\u200D\uD83D\uDC66|\uD83D\uDC69\u200D\uD83D\uDC67|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF4\uD83C\uDDF2|\uD83C\uDDF6\uD83C\uDDE6|[#\*0-9]\uFE0F\u20E3|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270A-\u270D]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC70\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDCAA\uDD74\uDD7A\uDD90\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD0F\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD36\uDDB5\uDDB6\uDDBB\uDDD2-\uDDD5])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDED5\uDEEB\uDEEC\uDEF4-\uDEFA\uDFE0-\uDFEB]|\uD83E[\uDD0D-\uDD3A\uDD3C-\uDD45\uDD47-\uDD71\uDD73-\uDD76\uDD7A-\uDDA2\uDDA5-\uDDAA\uDDAE-\uDDCA\uDDCD-\uDDFF\uDE70-\uDE73\uDE78-\uDE7A\uDE80-\uDE82\uDE90-\uDE95])|(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFA\uDFE0-\uDFEB]|\uD83E[\uDD0D-\uDD3A\uDD3C-\uDD45\uDD47-\uDD71\uDD73-\uDD76\uDD7A-\uDDA2\uDDA5-\uDDAA\uDDAE-\uDDCA\uDDCD-\uDDFF\uDE70-\uDE73\uDE78-\uDE7A\uDE80-\uDE82\uDE90-\uDE95])\uFE0F|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDC8F\uDC91\uDCAA\uDD74\uDD75\uDD7A\uDD90\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD0F\uDD18-\uDD1F\uDD26\uDD30-\uDD39\uDD3C-\uDD3E\uDDB5\uDDB6\uDDB8\uDDB9\uDDBB\uDDCD-\uDDCF\uDDD1-\uDDDD])/g};const stringWidth=string=>{if("string"!=typeof(string=string.replace(emojiRegex(),"  "))||0===string.length)return 0;string=stripAnsi(string);let width=0;for(let i=0;i<string.length;i++){const code=string.codePointAt(i);code<=31||code>=127&&code<=159||(code>=768&&code<=879||(code>65535&&i++,width+=isFullwidthCodePoint_1(code)?2:1))}return width};var stringWidth_1=stringWidth,default_1$2=stringWidth;stringWidth_1.default=default_1$2;var objFilter=function(original,filter){const obj={};return filter=filter||((k,v)=>!0),Object.keys(original||{}).forEach(key=>{filter(key,original[key])&&(obj[key]=original[key])}),obj},setBlocking=function(blocking){[process.stdout,process.stderr].forEach((function(stream){stream._handle&&stream.isTTY&&"function"==typeof stream._handle.setBlocking&&stream._handle.setBlocking(blocking)}))},ansiRegex$1=({onlyFirst:onlyFirst=!1}={})=>{const pattern=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:[a-zA-Z\\d]*(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-ntqry=><~]))"].join("|");return new RegExp(pattern,onlyFirst?void 0:"g")},stripAnsi$1=string=>"string"==typeof string?string.replace(ansiRegex$1(),""):string,ansiRegex$2=({onlyFirst:onlyFirst=!1}={})=>{const pattern=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:[a-zA-Z\\d]*(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-ntqry=><~]))"].join("|");return new RegExp(pattern,onlyFirst?void 0:"g")},stripAnsi$2=string=>"string"==typeof string?string.replace(ansiRegex$2(),""):string,colorName={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};const reverseKeywords={};for(const key of Object.keys(colorName))reverseKeywords[colorName[key]]=key;const convert={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};var conversions=convert;for(const model of Object.keys(convert)){if(!("channels"in convert[model]))throw new Error("missing channels property: "+model);if(!("labels"in convert[model]))throw new Error("missing channel labels property: "+model);if(convert[model].labels.length!==convert[model].channels)throw new Error("channel and label counts mismatch: "+model);const{channels:channels,labels:labels}=convert[model];delete convert[model].channels,delete convert[model].labels,Object.defineProperty(convert[model],"channels",{value:channels}),Object.defineProperty(convert[model],"labels",{value:labels})}function comparativeDistance(x,y){return(x[0]-y[0])**2+(x[1]-y[1])**2+(x[2]-y[2])**2}function buildGraph(){const graph={},models=Object.keys(conversions);for(let len=models.length,i=0;i<len;i++)graph[models[i]]={distance:-1,parent:null};return graph}function deriveBFS(fromModel){const graph=buildGraph(),queue=[fromModel];for(graph[fromModel].distance=0;queue.length;){const current=queue.pop(),adjacents=Object.keys(conversions[current]);for(let len=adjacents.length,i=0;i<len;i++){const adjacent=adjacents[i],node=graph[adjacent];-1===node.distance&&(node.distance=graph[current].distance+1,node.parent=current,queue.unshift(adjacent))}}return graph}function link(from,to){return function(args){return to(from(args))}}function wrapConversion(toModel,graph){const path=[graph[toModel].parent,toModel];let fn=conversions[graph[toModel].parent][toModel],cur=graph[toModel].parent;for(;graph[cur].parent;)path.unshift(graph[cur].parent),fn=link(conversions[graph[cur].parent][cur],fn),cur=graph[cur].parent;return fn.conversion=path,fn}convert.rgb.hsl=function(rgb){const r=rgb[0]/255,g=rgb[1]/255,b=rgb[2]/255,min=Math.min(r,g,b),max=Math.max(r,g,b),delta=max-min;let h,s;max===min?h=0:r===max?h=(g-b)/delta:g===max?h=2+(b-r)/delta:b===max&&(h=4+(r-g)/delta),h=Math.min(60*h,360),h<0&&(h+=360);const l=(min+max)/2;return s=max===min?0:l<=.5?delta/(max+min):delta/(2-max-min),[h,100*s,100*l]},convert.rgb.hsv=function(rgb){let rdif,gdif,bdif,h,s;const r=rgb[0]/255,g=rgb[1]/255,b=rgb[2]/255,v=Math.max(r,g,b),diff=v-Math.min(r,g,b),diffc=function(c){return(v-c)/6/diff+.5};return 0===diff?(h=0,s=0):(s=diff/v,rdif=diffc(r),gdif=diffc(g),bdif=diffc(b),r===v?h=bdif-gdif:g===v?h=1/3+rdif-bdif:b===v&&(h=2/3+gdif-rdif),h<0?h+=1:h>1&&(h-=1)),[360*h,100*s,100*v]},convert.rgb.hwb=function(rgb){const r=rgb[0],g=rgb[1];let b=rgb[2];const h=convert.rgb.hsl(rgb)[0],w=1/255*Math.min(r,Math.min(g,b));return b=1-1/255*Math.max(r,Math.max(g,b)),[h,100*w,100*b]},convert.rgb.cmyk=function(rgb){const r=rgb[0]/255,g=rgb[1]/255,b=rgb[2]/255,k=Math.min(1-r,1-g,1-b);return[100*((1-r-k)/(1-k)||0),100*((1-g-k)/(1-k)||0),100*((1-b-k)/(1-k)||0),100*k]},convert.rgb.keyword=function(rgb){const reversed=reverseKeywords[rgb];if(reversed)return reversed;let currentClosestKeyword,currentClosestDistance=1/0;for(const keyword of Object.keys(colorName)){const distance=comparativeDistance(rgb,colorName[keyword]);distance<currentClosestDistance&&(currentClosestDistance=distance,currentClosestKeyword=keyword)}return currentClosestKeyword},convert.keyword.rgb=function(keyword){return colorName[keyword]},convert.rgb.xyz=function(rgb){let r=rgb[0]/255,g=rgb[1]/255,b=rgb[2]/255;return r=r>.04045?((r+.055)/1.055)**2.4:r/12.92,g=g>.04045?((g+.055)/1.055)**2.4:g/12.92,b=b>.04045?((b+.055)/1.055)**2.4:b/12.92,[100*(.4124*r+.3576*g+.1805*b),100*(.2126*r+.7152*g+.0722*b),100*(.0193*r+.1192*g+.9505*b)]},convert.rgb.lab=function(rgb){const xyz=convert.rgb.xyz(rgb);let x=xyz[0],y=xyz[1],z=xyz[2];return x/=95.047,y/=100,z/=108.883,x=x>.008856?x**(1/3):7.787*x+16/116,y=y>.008856?y**(1/3):7.787*y+16/116,z=z>.008856?z**(1/3):7.787*z+16/116,[116*y-16,500*(x-y),200*(y-z)]},convert.hsl.rgb=function(hsl){const h=hsl[0]/360,s=hsl[1]/100,l=hsl[2]/100;let t2,t3,val;if(0===s)return val=255*l,[val,val,val];t2=l<.5?l*(1+s):l+s-l*s;const t1=2*l-t2,rgb=[0,0,0];for(let i=0;i<3;i++)t3=h+1/3*-(i-1),t3<0&&t3++,t3>1&&t3--,val=6*t3<1?t1+6*(t2-t1)*t3:2*t3<1?t2:3*t3<2?t1+(t2-t1)*(2/3-t3)*6:t1,rgb[i]=255*val;return rgb},convert.hsl.hsv=function(hsl){const h=hsl[0];let s=hsl[1]/100,l=hsl[2]/100,smin=s;const lmin=Math.max(l,.01);return l*=2,s*=l<=1?l:2-l,smin*=lmin<=1?lmin:2-lmin,[h,100*(0===l?2*smin/(lmin+smin):2*s/(l+s)),100*((l+s)/2)]},convert.hsv.rgb=function(hsv){const h=hsv[0]/60,s=hsv[1]/100;let v=hsv[2]/100;const hi=Math.floor(h)%6,f=h-Math.floor(h),p=255*v*(1-s),q=255*v*(1-s*f),t=255*v*(1-s*(1-f));switch(v*=255,hi){case 0:return[v,t,p];case 1:return[q,v,p];case 2:return[p,v,t];case 3:return[p,q,v];case 4:return[t,p,v];case 5:return[v,p,q]}},convert.hsv.hsl=function(hsv){const h=hsv[0],s=hsv[1]/100,v=hsv[2]/100,vmin=Math.max(v,.01);let sl,l;l=(2-s)*v;const lmin=(2-s)*vmin;return sl=s*vmin,sl/=lmin<=1?lmin:2-lmin,sl=sl||0,l/=2,[h,100*sl,100*l]},convert.hwb.rgb=function(hwb){const h=hwb[0]/360;let wh=hwb[1]/100,bl=hwb[2]/100;const ratio=wh+bl;let f;ratio>1&&(wh/=ratio,bl/=ratio);const i=Math.floor(6*h),v=1-bl;f=6*h-i,0!=(1&i)&&(f=1-f);const n=wh+f*(v-wh);let r,g,b;switch(i){default:case 6:case 0:r=v,g=n,b=wh;break;case 1:r=n,g=v,b=wh;break;case 2:r=wh,g=v,b=n;break;case 3:r=wh,g=n,b=v;break;case 4:r=n,g=wh,b=v;break;case 5:r=v,g=wh,b=n}return[255*r,255*g,255*b]},convert.cmyk.rgb=function(cmyk){const c=cmyk[0]/100,m=cmyk[1]/100,y=cmyk[2]/100,k=cmyk[3]/100;return[255*(1-Math.min(1,c*(1-k)+k)),255*(1-Math.min(1,m*(1-k)+k)),255*(1-Math.min(1,y*(1-k)+k))]},convert.xyz.rgb=function(xyz){const x=xyz[0]/100,y=xyz[1]/100,z=xyz[2]/100;let r,g,b;return r=3.2406*x+-1.5372*y+-.4986*z,g=-.9689*x+1.8758*y+.0415*z,b=.0557*x+-.204*y+1.057*z,r=r>.0031308?1.055*r**(1/2.4)-.055:12.92*r,g=g>.0031308?1.055*g**(1/2.4)-.055:12.92*g,b=b>.0031308?1.055*b**(1/2.4)-.055:12.92*b,r=Math.min(Math.max(0,r),1),g=Math.min(Math.max(0,g),1),b=Math.min(Math.max(0,b),1),[255*r,255*g,255*b]},convert.xyz.lab=function(xyz){let x=xyz[0],y=xyz[1],z=xyz[2];return x/=95.047,y/=100,z/=108.883,x=x>.008856?x**(1/3):7.787*x+16/116,y=y>.008856?y**(1/3):7.787*y+16/116,z=z>.008856?z**(1/3):7.787*z+16/116,[116*y-16,500*(x-y),200*(y-z)]},convert.lab.xyz=function(lab){let x,y,z;y=(lab[0]+16)/116,x=lab[1]/500+y,z=y-lab[2]/200;const y2=y**3,x2=x**3,z2=z**3;return y=y2>.008856?y2:(y-16/116)/7.787,x=x2>.008856?x2:(x-16/116)/7.787,z=z2>.008856?z2:(z-16/116)/7.787,x*=95.047,y*=100,z*=108.883,[x,y,z]},convert.lab.lch=function(lab){const l=lab[0],a=lab[1],b=lab[2];let h;return h=360*Math.atan2(b,a)/2/Math.PI,h<0&&(h+=360),[l,Math.sqrt(a*a+b*b),h]},convert.lch.lab=function(lch){const l=lch[0],c=lch[1],hr=lch[2]/360*2*Math.PI;return[l,c*Math.cos(hr),c*Math.sin(hr)]},convert.rgb.ansi16=function(args,saturation=null){const[r,g,b]=args;let value=null===saturation?convert.rgb.hsv(args)[2]:saturation;if(value=Math.round(value/50),0===value)return 30;let ansi=30+(Math.round(b/255)<<2|Math.round(g/255)<<1|Math.round(r/255));return 2===value&&(ansi+=60),ansi},convert.hsv.ansi16=function(args){return convert.rgb.ansi16(convert.hsv.rgb(args),args[2])},convert.rgb.ansi256=function(args){const r=args[0],g=args[1],b=args[2];return r===g&&g===b?r<8?16:r>248?231:Math.round((r-8)/247*24)+232:16+36*Math.round(r/255*5)+6*Math.round(g/255*5)+Math.round(b/255*5)},convert.ansi16.rgb=function(args){let color=args%10;if(0===color||7===color)return args>50&&(color+=3.5),color=color/10.5*255,[color,color,color];const mult=.5*(1+~~(args>50));return[(1&color)*mult*255,(color>>1&1)*mult*255,(color>>2&1)*mult*255]},convert.ansi256.rgb=function(args){if(args>=232){const c=10*(args-232)+8;return[c,c,c]}let rem;return args-=16,[Math.floor(args/36)/5*255,Math.floor((rem=args%36)/6)/5*255,rem%6/5*255]},convert.rgb.hex=function(args){const string=(((255&Math.round(args[0]))<<16)+((255&Math.round(args[1]))<<8)+(255&Math.round(args[2]))).toString(16).toUpperCase();return"000000".substring(string.length)+string},convert.hex.rgb=function(args){const match=args.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!match)return[0,0,0];let colorString=match[0];3===match[0].length&&(colorString=colorString.split("").map(char=>char+char).join(""));const integer=parseInt(colorString,16);return[integer>>16&255,integer>>8&255,255&integer]},convert.rgb.hcg=function(rgb){const r=rgb[0]/255,g=rgb[1]/255,b=rgb[2]/255,max=Math.max(Math.max(r,g),b),min=Math.min(Math.min(r,g),b),chroma=max-min;let grayscale,hue;return grayscale=chroma<1?min/(1-chroma):0,hue=chroma<=0?0:max===r?(g-b)/chroma%6:max===g?2+(b-r)/chroma:4+(r-g)/chroma,hue/=6,hue%=1,[360*hue,100*chroma,100*grayscale]},convert.hsl.hcg=function(hsl){const s=hsl[1]/100,l=hsl[2]/100,c=l<.5?2*s*l:2*s*(1-l);let f=0;return c<1&&(f=(l-.5*c)/(1-c)),[hsl[0],100*c,100*f]},convert.hsv.hcg=function(hsv){const s=hsv[1]/100,v=hsv[2]/100,c=s*v;let f=0;return c<1&&(f=(v-c)/(1-c)),[hsv[0],100*c,100*f]},convert.hcg.rgb=function(hcg){const h=hcg[0]/360,c=hcg[1]/100,g=hcg[2]/100;if(0===c)return[255*g,255*g,255*g];const pure=[0,0,0],hi=h%1*6,v=hi%1,w=1-v;let mg=0;switch(Math.floor(hi)){case 0:pure[0]=1,pure[1]=v,pure[2]=0;break;case 1:pure[0]=w,pure[1]=1,pure[2]=0;break;case 2:pure[0]=0,pure[1]=1,pure[2]=v;break;case 3:pure[0]=0,pure[1]=w,pure[2]=1;break;case 4:pure[0]=v,pure[1]=0,pure[2]=1;break;default:pure[0]=1,pure[1]=0,pure[2]=w}return mg=(1-c)*g,[255*(c*pure[0]+mg),255*(c*pure[1]+mg),255*(c*pure[2]+mg)]},convert.hcg.hsv=function(hcg){const c=hcg[1]/100,v=c+hcg[2]/100*(1-c);let f=0;return v>0&&(f=c/v),[hcg[0],100*f,100*v]},convert.hcg.hsl=function(hcg){const c=hcg[1]/100,l=hcg[2]/100*(1-c)+.5*c;let s=0;return l>0&&l<.5?s=c/(2*l):l>=.5&&l<1&&(s=c/(2*(1-l))),[hcg[0],100*s,100*l]},convert.hcg.hwb=function(hcg){const c=hcg[1]/100,v=c+hcg[2]/100*(1-c);return[hcg[0],100*(v-c),100*(1-v)]},convert.hwb.hcg=function(hwb){const w=hwb[1]/100,v=1-hwb[2]/100,c=v-w;let g=0;return c<1&&(g=(v-c)/(1-c)),[hwb[0],100*c,100*g]},convert.apple.rgb=function(apple){return[apple[0]/65535*255,apple[1]/65535*255,apple[2]/65535*255]},convert.rgb.apple=function(rgb){return[rgb[0]/255*65535,rgb[1]/255*65535,rgb[2]/255*65535]},convert.gray.rgb=function(args){return[args[0]/100*255,args[0]/100*255,args[0]/100*255]},convert.gray.hsl=function(args){return[0,0,args[0]]},convert.gray.hsv=convert.gray.hsl,convert.gray.hwb=function(gray){return[0,100,gray[0]]},convert.gray.cmyk=function(gray){return[0,0,0,gray[0]]},convert.gray.lab=function(gray){return[gray[0],0,0]},convert.gray.hex=function(gray){const val=255&Math.round(gray[0]/100*255),string=((val<<16)+(val<<8)+val).toString(16).toUpperCase();return"000000".substring(string.length)+string},convert.rgb.gray=function(rgb){return[(rgb[0]+rgb[1]+rgb[2])/3/255*100]};var route=function(fromModel){const graph=deriveBFS(fromModel),conversion={},models=Object.keys(graph);for(let len=models.length,i=0;i<len;i++){const toModel=models[i];null!==graph[toModel].parent&&(conversion[toModel]=wrapConversion(toModel,graph))}return conversion};const convert$1={},models=Object.keys(conversions);function wrapRaw(fn){const wrappedFn=function(...args){const arg0=args[0];return null==arg0?arg0:(arg0.length>1&&(args=arg0),fn(args))};return"conversion"in fn&&(wrappedFn.conversion=fn.conversion),wrappedFn}function wrapRounded(fn){const wrappedFn=function(...args){const arg0=args[0];if(null==arg0)return arg0;arg0.length>1&&(args=arg0);const result=fn(args);if("object"==typeof result)for(let len=result.length,i=0;i<len;i++)result[i]=Math.round(result[i]);return result};return"conversion"in fn&&(wrappedFn.conversion=fn.conversion),wrappedFn}models.forEach(fromModel=>{convert$1[fromModel]={},Object.defineProperty(convert$1[fromModel],"channels",{value:conversions[fromModel].channels}),Object.defineProperty(convert$1[fromModel],"labels",{value:conversions[fromModel].labels});const routes=route(fromModel);Object.keys(routes).forEach(toModel=>{const fn=routes[toModel];convert$1[fromModel][toModel]=wrapRounded(fn),convert$1[fromModel][toModel].raw=wrapRaw(fn)})});var colorConvert=convert$1,ansiStyles=createCommonjsModule((function(module){const wrapAnsi16=(fn,offset)=>(...args)=>`[${fn(...args)+offset}m`,wrapAnsi256=(fn,offset)=>(...args)=>{const code=fn(...args);return`[${38+offset};5;${code}m`},wrapAnsi16m=(fn,offset)=>(...args)=>{const rgb=fn(...args);return`[${38+offset};2;${rgb[0]};${rgb[1]};${rgb[2]}m`},ansi2ansi=n=>n,rgb2rgb=(r,g,b)=>[r,g,b],setLazyProperty=(object,property,get)=>{Object.defineProperty(object,property,{get:()=>{const value=get();return Object.defineProperty(object,property,{value:value,enumerable:!0,configurable:!0}),value},enumerable:!0,configurable:!0})};let colorConvert$1;const makeDynamicStyles=(wrap,targetSpace,identity,isBackground)=>{void 0===colorConvert$1&&(colorConvert$1=colorConvert);const offset=isBackground?10:0,styles={};for(const[sourceSpace,suite]of Object.entries(colorConvert$1)){const name="ansi16"===sourceSpace?"ansi":sourceSpace;sourceSpace===targetSpace?styles[name]=wrap(identity,offset):"object"==typeof suite&&(styles[name]=wrap(suite[targetSpace],offset))}return styles};Object.defineProperty(module,"exports",{enumerable:!0,get:function(){const codes=new Map,styles={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};styles.color.gray=styles.color.blackBright,styles.bgColor.bgGray=styles.bgColor.bgBlackBright,styles.color.grey=styles.color.blackBright,styles.bgColor.bgGrey=styles.bgColor.bgBlackBright;for(const[groupName,group]of Object.entries(styles)){for(const[styleName,style]of Object.entries(group))styles[styleName]={open:`[${style[0]}m`,close:`[${style[1]}m`},group[styleName]=styles[styleName],codes.set(style[0],style[1]);Object.defineProperty(styles,groupName,{value:group,enumerable:!1})}return Object.defineProperty(styles,"codes",{value:codes,enumerable:!1}),styles.color.close="[39m",styles.bgColor.close="[49m",setLazyProperty(styles.color,"ansi",()=>makeDynamicStyles(wrapAnsi16,"ansi16",ansi2ansi,!1)),setLazyProperty(styles.color,"ansi256",()=>makeDynamicStyles(wrapAnsi256,"ansi256",ansi2ansi,!1)),setLazyProperty(styles.color,"ansi16m",()=>makeDynamicStyles(wrapAnsi16m,"rgb",rgb2rgb,!1)),setLazyProperty(styles.bgColor,"ansi",()=>makeDynamicStyles(wrapAnsi16,"ansi16",ansi2ansi,!0)),setLazyProperty(styles.bgColor,"ansi256",()=>makeDynamicStyles(wrapAnsi256,"ansi256",ansi2ansi,!0)),setLazyProperty(styles.bgColor,"ansi16m",()=>makeDynamicStyles(wrapAnsi16m,"rgb",rgb2rgb,!0)),styles}})}));const ESCAPES=new Set(["",""]),END_CODE=39,wrapAnsi=code=>`${ESCAPES.values().next().value}[${code}m`,wordLengths=string=>string.split(" ").map(character=>stringWidth_1(character)),wrapWord=(rows,word,columns)=>{const characters=[...word];let isInsideEscape=!1,visible=stringWidth_1(stripAnsi$2(rows[rows.length-1]));for(const[index,character]of characters.entries()){const characterLength=stringWidth_1(character);if(visible+characterLength<=columns?rows[rows.length-1]+=character:(rows.push(character),visible=0),ESCAPES.has(character))isInsideEscape=!0;else if(isInsideEscape&&"m"===character){isInsideEscape=!1;continue}isInsideEscape||(visible+=characterLength,visible===columns&&index<characters.length-1&&(rows.push(""),visible=0))}!visible&&rows[rows.length-1].length>0&&rows.length>1&&(rows[rows.length-2]+=rows.pop())},stringVisibleTrimSpacesRight=str=>{const words=str.split(" ");let last=words.length;for(;last>0&&!(stringWidth_1(words[last-1])>0);)last--;return last===words.length?str:words.slice(0,last).join(" ")+words.slice(last).join("")},exec=(string,columns,options={})=>{if(!1!==options.trim&&""===string.trim())return"";let escapeCode,pre="",ret="";const lengths=wordLengths(string);let rows=[""];for(const[index,word]of string.split(" ").entries()){!1!==options.trim&&(rows[rows.length-1]=rows[rows.length-1].trimLeft());let rowLength=stringWidth_1(rows[rows.length-1]);if(0!==index&&(rowLength>=columns&&(!1===options.wordWrap||!1===options.trim)&&(rows.push(""),rowLength=0),(rowLength>0||!1===options.trim)&&(rows[rows.length-1]+=" ",rowLength++)),options.hard&&lengths[index]>columns){const remainingColumns=columns-rowLength,breaksStartingThisLine=1+Math.floor((lengths[index]-remainingColumns-1)/columns);Math.floor((lengths[index]-1)/columns)<breaksStartingThisLine&&rows.push(""),wrapWord(rows,word,columns)}else{if(rowLength+lengths[index]>columns&&rowLength>0&&lengths[index]>0){if(!1===options.wordWrap&&rowLength<columns){wrapWord(rows,word,columns);continue}rows.push("")}rowLength+lengths[index]>columns&&!1===options.wordWrap?wrapWord(rows,word,columns):rows[rows.length-1]+=word}}!1!==options.trim&&(rows=rows.map(stringVisibleTrimSpacesRight)),pre=rows.join("\n");for(const[index,character]of[...pre].entries()){if(ret+=character,ESCAPES.has(character)){const code=parseFloat(/\d[^m]*/.exec(pre.slice(index,index+4)));escapeCode=39===code?null:code}const code=ansiStyles.codes.get(Number(escapeCode));escapeCode&&code&&("\n"===pre[index+1]?ret+=wrapAnsi(code):"\n"===character&&(ret+=wrapAnsi(escapeCode)))}return ret};var wrapAnsi_1=(string,columns,options)=>String(string).normalize().replace(/\r\n/g,"\n").split("\n").map(line=>exec(line,columns,options)).join("\n");const align={right:alignRight,center:alignCenter},top=0,right=1,bottom=2,left=3;class UI{constructor(opts){this.width=opts.width,this.wrap=opts.wrap,this.rows=[]}span(...args){this.div(...args).span=!0}resetOutput(){this.rows=[]}div(...args){if(0===args.length&&this.div(""),this.wrap&&this._shouldApplyLayoutDSL(...args))return this._applyLayoutDSL(args[0]);const cols=args.map(arg=>"string"==typeof arg?this._colFromString(arg):arg);return this.rows.push(cols),cols}_shouldApplyLayoutDSL(...args){return 1===args.length&&"string"==typeof args[0]&&/[\t\n]/.test(args[0])}_applyLayoutDSL(str){const rows=str.split("\n").map(row=>row.split("\t"));let leftColumnWidth=0;return rows.forEach(columns=>{columns.length>1&&stringWidth_1(columns[0])>leftColumnWidth&&(leftColumnWidth=Math.min(Math.floor(.5*this.width),stringWidth_1(columns[0])))}),rows.forEach(columns=>{this.div(...columns.map((r,i)=>({text:r.trim(),padding:this._measurePadding(r),width:0===i&&columns.length>1?leftColumnWidth:void 0})))}),this.rows[this.rows.length-1]}_colFromString(text){return{text:text,padding:this._measurePadding(text)}}_measurePadding(str){const noAnsi=stripAnsi$1(str);return[0,noAnsi.match(/\s*$/)[0].length,0,noAnsi.match(/^\s*/)[0].length]}toString(){const lines=[];return this.rows.forEach(row=>{this.rowToString(row,lines)}),lines.filter(line=>!line.hidden).map(line=>line.text).join("\n")}rowToString(row,lines){return this._rasterize(row).forEach((rrow,r)=>{let str="";rrow.forEach((col,c)=>{const{width:width}=row[c],wrapWidth=this._negatePadding(row[c]);let ts=col;wrapWidth>stringWidth_1(col)&&(ts+=" ".repeat(wrapWidth-stringWidth_1(col))),row[c].align&&"left"!==row[c].align&&this.wrap&&(ts=align[row[c].align](ts,wrapWidth),stringWidth_1(ts)<wrapWidth&&(ts+=" ".repeat(width-stringWidth_1(ts)-1)));const padding=row[c].padding||[0,0,0,0];padding[3]&&(str+=" ".repeat(padding[3])),str+=addBorder(row[c],ts,"| "),str+=ts,str+=addBorder(row[c],ts," |"),padding[1]&&(str+=" ".repeat(padding[1])),0===r&&lines.length>0&&(str=this._renderInline(str,lines[lines.length-1]))}),lines.push({text:str.replace(/ +$/,""),span:row.span})}),lines}_renderInline(source,previousLine){const leadingWhitespace=source.match(/^ */)[0].length,target=previousLine.text,targetTextWidth=stringWidth_1(target.trimRight());return previousLine.span?this.wrap?leadingWhitespace<targetTextWidth?source:(previousLine.hidden=!0,target.trimRight()+" ".repeat(leadingWhitespace-targetTextWidth)+source.trimLeft()):(previousLine.hidden=!0,target+source):source}_rasterize(row){const rrows=[],widths=this._columnWidths(row);let wrapped;return row.forEach((col,c)=>{col.width=widths[c],wrapped=this.wrap?wrapAnsi_1(col.text,this._negatePadding(col),{hard:!0}).split("\n"):col.text.split("\n"),col.border&&(wrapped.unshift("."+"-".repeat(this._negatePadding(col)+2)+"."),wrapped.push("'"+"-".repeat(this._negatePadding(col)+2)+"'")),col.padding&&(wrapped.unshift(...new Array(col.padding[0]||0).fill("")),wrapped.push(...new Array(col.padding[2]||0).fill(""))),wrapped.forEach((str,r)=>{rrows[r]||rrows.push([]);const rrow=rrows[r];for(let i=0;i<c;i++)void 0===rrow[i]&&rrow.push("");rrow.push(str)})}),rrows}_negatePadding(col){let wrapWidth=col.width;return col.padding&&(wrapWidth-=(col.padding[3]||0)+(col.padding[1]||0)),col.border&&(wrapWidth-=4),wrapWidth}_columnWidths(row){if(!this.wrap)return row.map(col=>col.width||stringWidth_1(col.text));let unset=row.length,remainingWidth=this.width;const widths=row.map(col=>{if(col.width)return unset--,remainingWidth-=col.width,col.width}),unsetWidth=unset?Math.floor(remainingWidth/unset):0;return widths.map((w,i)=>void 0===w?Math.max(unsetWidth,_minWidth(row[i])):w)}}function addBorder(col,ts,style){return col.border?/[.']-+[.']/.test(ts)?"":0!==ts.trim().length?style:"  ":""}function _minWidth(col){const padding=col.padding||[],minWidth=1+(padding[3]||0)+(padding[1]||0);return col.border?minWidth+4:minWidth}function getWindowWidth(){if("object"==typeof process&&process.stdout&&process.stdout.columns)return process.stdout.columns}function alignRight(str,width){str=str.trim();const strWidth=stringWidth_1(str);return strWidth<width?" ".repeat(width-strWidth)+str:str}function alignCenter(str,width){str=str.trim();const strWidth=stringWidth_1(str);return strWidth>=width?str:" ".repeat(width-strWidth>>1)+str}var cliui=function(opts={}){return new UI({width:opts.width||getWindowWidth()||80,wrap:!1!==opts.wrap})},usage=function(yargs,y18n){const __=y18n.__,self={},fails=[];self.failFn=function(f){fails.push(f)};let failMessage=null,showHelpOnFail=!0;self.showHelpOnFail=function(enabled,message){return"string"==typeof enabled?(message=enabled,enabled=!0):void 0===enabled&&(enabled=!0),failMessage=message,showHelpOnFail=enabled,self};let failureOutput=!1;self.fail=function(msg,err){const logger=yargs._getLoggerInstance();if(!fails.length){if(yargs.getExitProcess()&&setBlocking(!0),failureOutput||(failureOutput=!0,showHelpOnFail&&(yargs.showHelp("error"),logger.error()),(msg||err)&&logger.error(msg||err),failMessage&&((msg||err)&&logger.error(""),logger.error(failMessage))),err=err||new yerror(msg),yargs.getExitProcess())return yargs.exit(1);if(yargs._hasParseCallback())return yargs.exit(1,err);throw err}for(let i=fails.length-1;i>=0;--i)fails[i](msg,err,self)};let usages=[],usageDisabled=!1;self.usage=(msg,description)=>null===msg?(usageDisabled=!0,void(usages=[])):(usageDisabled=!1,usages.push([msg,description||""]),self),self.getUsage=()=>usages,self.getUsageDisabled=()=>usageDisabled,self.getPositionalGroupName=()=>__("Positionals:");let examples=[];self.example=(cmd,description)=>{examples.push([cmd,description||""])};let commands=[];self.command=function(cmd,description,isDefault,aliases){isDefault&&(commands=commands.map(cmdArray=>(cmdArray[2]=!1,cmdArray))),commands.push([cmd,description||"",isDefault,aliases])},self.getCommands=()=>commands;let descriptions={};self.describe=function(key,desc){"object"==typeof key?Object.keys(key).forEach(k=>{self.describe(k,key[k])}):descriptions[key]=desc},self.getDescriptions=()=>descriptions;let epilogs=[];self.epilog=msg=>{epilogs.push(msg)};let wrap,wrapSet=!1;function getWrap(){return wrapSet||(wrap="object"==typeof process&&process.stdout&&process.stdout.columns?Math.min(80,process.stdout.columns):80,wrapSet=!0),wrap}self.wrap=cols=>{wrapSet=!0,wrap=cols};self.deferY18nLookup=str=>"__yargsString__:"+str;const defaultGroup=__("Options:");function maxWidth(table,theWrap,modifier){let width=0;return Array.isArray(table)||(table=Object.keys(table).map(key=>[table[key]])),table.forEach(v=>{width=Math.max(stringWidth_1(modifier?`${modifier} ${v[0]}`:v[0]),width)}),theWrap&&(width=Math.min(width,parseInt(.5*theWrap,10))),width}let cachedHelpMessage;function filterHiddenOptions(key){return yargs.getOptions().hiddenOptions.indexOf(key)<0||yargs.parsed.argv[yargs.getOptions().showHiddenOpt]}function defaultString(value,defaultDescription){let string=`[${__("default:")} `;if(void 0===value&&!defaultDescription)return null;if(defaultDescription)string+=defaultDescription;else switch(typeof value){case"string":string+=`"${value}"`;break;case"object":string+=JSON.stringify(value);break;default:string+=value}return`${string}]`}self.help=function(){if(cachedHelpMessage)return cachedHelpMessage;!function(){const demandedOptions=yargs.getDemandedOptions(),options=yargs.getOptions();(Object.keys(options.alias)||[]).forEach(key=>{options.alias[key].forEach(alias=>{descriptions[alias]&&self.describe(key,descriptions[alias]),alias in demandedOptions&&yargs.demandOption(key,demandedOptions[alias]),~options.boolean.indexOf(alias)&&yargs.boolean(key),~options.count.indexOf(alias)&&yargs.count(key),~options.string.indexOf(alias)&&yargs.string(key),~options.normalize.indexOf(alias)&&yargs.normalize(key),~options.array.indexOf(alias)&&yargs.array(key),~options.number.indexOf(alias)&&yargs.number(key)})})}();const base$0=yargs.customScriptName?yargs.$0:path.basename(yargs.$0),demandedOptions=yargs.getDemandedOptions(),demandedCommands=yargs.getDemandedCommands(),deprecatedOptions=yargs.getDeprecatedOptions(),groups=yargs.getGroups(),options=yargs.getOptions();let keys=[];keys=keys.concat(Object.keys(descriptions)),keys=keys.concat(Object.keys(demandedOptions)),keys=keys.concat(Object.keys(demandedCommands)),keys=keys.concat(Object.keys(options.default)),keys=keys.filter(filterHiddenOptions),keys=Object.keys(keys.reduce((acc,key)=>("_"!==key&&(acc[key]=!0),acc),{}));const theWrap=getWrap(),ui=cliui({width:theWrap,wrap:!!theWrap});if(!usageDisabled)if(usages.length)usages.forEach(usage=>{ui.div(`${usage[0].replace(/\$0/g,base$0)}`),usage[1]&&ui.div({text:`${usage[1]}`,padding:[1,0,0,0]})}),ui.div();else if(commands.length){let u=null;u=demandedCommands._?`${base$0} <${__("command")}>\n`:`${base$0} [${__("command")}]\n`,ui.div(`${u}`)}if(commands.length){ui.div(__("Commands:"));const context=yargs.getContext(),parentCommands=context.commands.length?`${context.commands.join(" ")} `:"";!0===yargs.getParserConfiguration()["sort-commands"]&&(commands=commands.sort((a,b)=>a[0].localeCompare(b[0]))),commands.forEach(command=>{const commandString=`${base$0} ${parentCommands}${command[0].replace(/^\$0 ?/,"")}`;ui.span({text:commandString,padding:[0,2,0,2],width:maxWidth(commands,theWrap,`${base$0}${parentCommands}`)+4},{text:command[1]});const hints=[];command[2]&&hints.push(`[${__("default")}]`),command[3]&&command[3].length&&hints.push(`[${__("aliases:")} ${command[3].join(", ")}]`),hints.length?ui.div({text:hints.join(" "),padding:[0,0,0,2],align:"right"}):ui.div()}),ui.div()}const aliasKeys=(Object.keys(options.alias)||[]).concat(Object.keys(yargs.parsed.newAliases)||[]);if(keys=keys.filter(key=>!yargs.parsed.newAliases[key]&&aliasKeys.every(alias=>-1===(options.alias[alias]||[]).indexOf(key))),groups[defaultGroup]||(groups[defaultGroup]=[]),function(keys,aliases,groups){let groupedKeys=[],toCheck=null;Object.keys(groups).forEach(group=>{groupedKeys=groupedKeys.concat(groups[group])}),keys.forEach(key=>{toCheck=[key].concat(aliases[key]),toCheck.some(k=>-1!==groupedKeys.indexOf(k))||groups[defaultGroup].push(key)})}(keys,options.alias,groups),Object.keys(groups).forEach(groupName=>{if(!groups[groupName].length)return;const normalizedKeys=groups[groupName].filter(filterHiddenOptions).map(key=>{if(~aliasKeys.indexOf(key))return key;for(let aliasKey,i=0;void 0!==(aliasKey=aliasKeys[i]);i++)if(~(options.alias[aliasKey]||[]).indexOf(key))return aliasKey;return key});if(normalizedKeys.length<1)return;ui.div(groupName);const switches=normalizedKeys.reduce((acc,key)=>(acc[key]=[key].concat(options.alias[key]||[]).map(sw=>groupName===self.getPositionalGroupName()?sw:(/^[0-9]$/.test(sw)?~options.boolean.indexOf(key)?"-":"--":sw.length>1?"--":"-")+sw).join(", "),acc),{});normalizedKeys.forEach(key=>{const kswitch=switches[key];let desc=descriptions[key]||"",type=null;~desc.lastIndexOf("__yargsString__:")&&(desc=__(desc.substring("__yargsString__:".length))),~options.boolean.indexOf(key)&&(type=`[${__("boolean")}]`),~options.count.indexOf(key)&&(type=`[${__("count")}]`),~options.string.indexOf(key)&&(type=`[${__("string")}]`),~options.normalize.indexOf(key)&&(type=`[${__("string")}]`),~options.array.indexOf(key)&&(type=`[${__("array")}]`),~options.number.indexOf(key)&&(type=`[${__("number")}]`);const extra=[key in deprecatedOptions?"string"==typeof deprecatedOptions[key]?`[${__("deprecated: %s",deprecatedOptions[key])}]`:`[${__("deprecated")}]`:null,type,key in demandedOptions?`[${__("required")}]`:null,options.choices&&options.choices[key]?`[${__("choices:")} ${self.stringifiedValues(options.choices[key])}]`:null,defaultString(options.default[key],options.defaultDescription[key])].filter(Boolean).join(" ");ui.span({text:kswitch,padding:[0,2,0,2],width:maxWidth(switches,theWrap)+4},desc),extra?ui.div({text:extra,padding:[0,0,0,2],align:"right"}):ui.div()}),ui.div()}),examples.length&&(ui.div(__("Examples:")),examples.forEach(example=>{example[0]=example[0].replace(/\$0/g,base$0)}),examples.forEach(example=>{""===example[1]?ui.div({text:example[0],padding:[0,2,0,2]}):ui.div({text:example[0],padding:[0,2,0,2],width:maxWidth(examples,theWrap)+4},{text:example[1]})}),ui.div()),epilogs.length>0){const e=epilogs.map(epilog=>epilog.replace(/\$0/g,base$0)).join("\n");ui.div(`${e}\n`)}return ui.toString().replace(/\s*$/,"")},self.cacheHelpMessage=function(){cachedHelpMessage=this.help()},self.clearCachedHelpMessage=function(){cachedHelpMessage=void 0},self.showHelp=level=>{const logger=yargs._getLoggerInstance();level||(level="error"),("function"==typeof level?level:logger[level])(self.help())},self.functionDescription=fn=>["(",fn.name?decamelize(fn.name,"-"):__("generated-value"),")"].join(""),self.stringifiedValues=function(values,separator){let string="";const sep=separator||", ",array=[].concat(values);return values&&array.length?(array.forEach(value=>{string.length&&(string+=sep),string+=JSON.stringify(value)}),string):string};let version=null;self.version=ver=>{version=ver},self.showVersion=()=>{yargs._getLoggerInstance().log(version)},self.reset=function(localLookup){return failMessage=null,failureOutput=!1,usages=[],usageDisabled=!1,epilogs=[],examples=[],commands=[],descriptions=objFilter(descriptions,(k,v)=>!localLookup[k]),self};const frozens=[];return self.freeze=function(){const frozen={};frozens.push(frozen),frozen.failMessage=failMessage,frozen.failureOutput=failureOutput,frozen.usages=usages,frozen.usageDisabled=usageDisabled,frozen.epilogs=epilogs,frozen.examples=examples,frozen.commands=commands,frozen.descriptions=descriptions},self.unfreeze=function(){const frozen=frozens.pop();failMessage=frozen.failMessage,failureOutput=frozen.failureOutput,usages=frozen.usages,usageDisabled=frozen.usageDisabled,epilogs=frozen.epilogs,examples=frozen.examples,commands=frozen.commands,descriptions=frozen.descriptions},self},levenshtein=function(a,b){if(0===a.length)return b.length;if(0===b.length)return a.length;const matrix=[];let i,j;for(i=0;i<=b.length;i++)matrix[i]=[i];for(j=0;j<=a.length;j++)matrix[0][j]=j;for(i=1;i<=b.length;i++)for(j=1;j<=a.length;j++)b.charAt(i-1)===a.charAt(j-1)?matrix[i][j]=matrix[i-1][j-1]:matrix[i][j]=Math.min(matrix[i-1][j-1]+1,Math.min(matrix[i][j-1]+1,matrix[i-1][j]+1));return matrix[b.length][a.length]};const specialKeys=["$0","--","_"];var validation=function(yargs,usage,y18n){const __=y18n.__,__n=y18n.__n,self={nonOptionCount:function(argv){const demandedCommands=yargs.getDemandedCommands(),_s=argv._.length-yargs.getContext().commands.length;demandedCommands._&&(_s<demandedCommands._.min||_s>demandedCommands._.max)&&(_s<demandedCommands._.min?void 0!==demandedCommands._.minMsg?usage.fail(demandedCommands._.minMsg?demandedCommands._.minMsg.replace(/\$0/g,_s).replace(/\$1/,demandedCommands._.min):null):usage.fail(__n("Not enough non-option arguments: got %s, need at least %s","Not enough non-option arguments: got %s, need at least %s",_s,_s,demandedCommands._.min)):_s>demandedCommands._.max&&(void 0!==demandedCommands._.maxMsg?usage.fail(demandedCommands._.maxMsg?demandedCommands._.maxMsg.replace(/\$0/g,_s).replace(/\$1/,demandedCommands._.max):null):usage.fail(__n("Too many non-option arguments: got %s, maximum of %s","Too many non-option arguments: got %s, maximum of %s",_s,_s,demandedCommands._.max))))},positionalCount:function(required,observed){observed<required&&usage.fail(__n("Not enough non-option arguments: got %s, need at least %s","Not enough non-option arguments: got %s, need at least %s",observed,observed,required))},requiredArguments:function(argv){const demandedOptions=yargs.getDemandedOptions();let missing=null;if(Object.keys(demandedOptions).forEach(key=>{Object.prototype.hasOwnProperty.call(argv,key)&&void 0!==argv[key]||(missing=missing||{},missing[key]=demandedOptions[key])}),missing){const customMsgs=[];Object.keys(missing).forEach(key=>{const msg=missing[key];msg&&customMsgs.indexOf(msg)<0&&customMsgs.push(msg)});const customMsg=customMsgs.length?`\n${customMsgs.join("\n")}`:"";usage.fail(__n("Missing required argument: %s","Missing required arguments: %s",Object.keys(missing).length,Object.keys(missing).join(", ")+customMsg))}},unknownArguments:function(argv,aliases,positionalMap){const commandKeys=yargs.getCommandInstance().getCommands(),unknown=[],currentContext=yargs.getContext();Object.keys(argv).forEach(key=>{-1!==specialKeys.indexOf(key)||Object.prototype.hasOwnProperty.call(positionalMap,key)||Object.prototype.hasOwnProperty.call(yargs._getParseContext(),key)||self.isValidAndSomeAliasIsNotNew(key,aliases)||unknown.push(key)}),(currentContext.commands.length>0||commandKeys.length>0)&&argv._.slice(currentContext.commands.length).forEach(key=>{-1===commandKeys.indexOf(key)&&unknown.push(key)}),unknown.length>0&&usage.fail(__n("Unknown argument: %s","Unknown arguments: %s",unknown.length,unknown.join(", ")))},unknownCommands:function(argv,aliases,positionalMap){const commandKeys=yargs.getCommandInstance().getCommands(),unknown=[],currentContext=yargs.getContext();return(currentContext.commands.length>0||commandKeys.length>0)&&argv._.slice(currentContext.commands.length).forEach(key=>{-1===commandKeys.indexOf(key)&&unknown.push(key)}),unknown.length>0&&(usage.fail(__n("Unknown command: %s","Unknown commands: %s",unknown.length,unknown.join(", "))),!0)},isValidAndSomeAliasIsNotNew:function(key,aliases){if(!Object.prototype.hasOwnProperty.call(aliases,key))return!1;const newAliases=yargs.parsed.newAliases;for(const a of[key,...aliases[key]])if(!Object.prototype.hasOwnProperty.call(newAliases,a)||!newAliases[key])return!0;return!1},limitedChoices:function(argv){const options=yargs.getOptions(),invalid={};if(!Object.keys(options.choices).length)return;Object.keys(argv).forEach(key=>{-1===specialKeys.indexOf(key)&&Object.prototype.hasOwnProperty.call(options.choices,key)&&[].concat(argv[key]).forEach(value=>{-1===options.choices[key].indexOf(value)&&void 0!==value&&(invalid[key]=(invalid[key]||[]).concat(value))})});const invalidKeys=Object.keys(invalid);if(!invalidKeys.length)return;let msg=__("Invalid values:");invalidKeys.forEach(key=>{msg+=`\n  ${__("Argument: %s, Given: %s, Choices: %s",key,usage.stringifiedValues(invalid[key]),usage.stringifiedValues(options.choices[key]))}`}),usage.fail(msg)}};let checks=[];self.check=function(f,global){checks.push({func:f,global:global})},self.customChecks=function(argv,aliases){for(let f,i=0;void 0!==(f=checks[i]);i++){const func=f.func;let result=null;try{result=func(argv,aliases)}catch(err){usage.fail(err.message?err.message:err,err);continue}result?("string"==typeof result||result instanceof Error)&&usage.fail(result.toString(),result):usage.fail(__("Argument check failed: %s",func.toString()))}};let implied={};function keyExists(argv,val){const num=Number(val);return val="number"==typeof(val=isNaN(num)?val:num)?argv._.length>=val:val.match(/^--no-.+/)?!argv[val=val.match(/^--no-(.+)/)[1]]:argv[val]}self.implies=function(key,value){argsert_1("<string|object> [array|number|string]",[key,value],arguments.length),"object"==typeof key?Object.keys(key).forEach(k=>{self.implies(k,key[k])}):(yargs.global(key),implied[key]||(implied[key]=[]),Array.isArray(value)?value.forEach(i=>self.implies(key,i)):implied[key].push(value))},self.getImplied=function(){return implied},self.implications=function(argv){const implyFail=[];if(Object.keys(implied).forEach(key=>{const origKey=key;(implied[key]||[]).forEach(value=>{let key=origKey;const origValue=value;key=keyExists(argv,key),value=keyExists(argv,value),key&&!value&&implyFail.push(` ${origKey} -> ${origValue}`)})}),implyFail.length){let msg=`${__("Implications failed:")}\n`;implyFail.forEach(value=>{msg+=value}),usage.fail(msg)}};let conflicting={};self.conflicts=function(key,value){argsert_1("<string|object> [array|string]",[key,value],arguments.length),"object"==typeof key?Object.keys(key).forEach(k=>{self.conflicts(k,key[k])}):(yargs.global(key),conflicting[key]||(conflicting[key]=[]),Array.isArray(value)?value.forEach(i=>self.conflicts(key,i)):conflicting[key].push(value))},self.getConflicting=()=>conflicting,self.conflicting=function(argv){Object.keys(argv).forEach(key=>{conflicting[key]&&conflicting[key].forEach(value=>{value&&void 0!==argv[key]&&void 0!==argv[value]&&usage.fail(__("Arguments %s and %s are mutually exclusive",key,value))})})},self.recommendCommands=function(cmd,potentialCommands){const distance=levenshtein;potentialCommands=potentialCommands.sort((a,b)=>b.length-a.length);let recommended=null,bestDistance=1/0;for(let candidate,i=0;void 0!==(candidate=potentialCommands[i]);i++){const d=distance(cmd,candidate);d<=3&&d<bestDistance&&(bestDistance=d,recommended=candidate)}recommended&&usage.fail(__("Did you mean %s?",recommended))},self.reset=function(localLookup){return implied=objFilter(implied,(k,v)=>!localLookup[k]),conflicting=objFilter(conflicting,(k,v)=>!localLookup[k]),checks=checks.filter(c=>c.global),self};const frozens=[];return self.freeze=function(){const frozen={};frozens.push(frozen),frozen.implied=implied,frozen.checks=checks,frozen.conflicting=conflicting},self.unfreeze=function(){const frozen=frozens.pop();implied=frozen.implied,checks=frozen.checks,conflicting=frozen.conflicting},self};function Y18N(opts){opts=opts||{},this.directory=opts.directory||"./locales",this.updateFiles="boolean"!=typeof opts.updateFiles||opts.updateFiles,this.locale=opts.locale||"en",this.fallbackToLanguage="boolean"!=typeof opts.fallbackToLanguage||opts.fallbackToLanguage,this.cache={},this.writeQueue=[]}Y18N.prototype.__=function(){if("string"!=typeof arguments[0])return this._taggedLiteral.apply(this,arguments);var args=Array.prototype.slice.call(arguments),str=args.shift(),cb=function(){};return"function"==typeof args[args.length-1]&&(cb=args.pop()),cb=cb||function(){},this.cache[this.locale]||this._readLocaleFile(),!this.cache[this.locale][str]&&this.updateFiles?(this.cache[this.locale][str]=str,this._enqueueWrite([this.directory,this.locale,cb])):cb(),util$1.format.apply(util$1,[this.cache[this.locale][str]||str].concat(args))},Y18N.prototype._taggedLiteral=function(parts){var args=arguments,str="";return parts.forEach((function(part,i){var arg=args[i+1];str+=part,void 0!==arg&&(str+="%s")})),this.__.apply(null,[str].concat([].slice.call(arguments,1)))},Y18N.prototype._enqueueWrite=function(work){this.writeQueue.push(work),1===this.writeQueue.length&&this._processWriteQueue()},Y18N.prototype._processWriteQueue=function(){var _this=this,work=this.writeQueue[0],directory=work[0],locale=work[1],cb=work[2],languageFile=this._resolveLocaleFile(directory,locale),serializedLocale=JSON.stringify(this.cache[locale],null,2);fs.writeFile(languageFile,serializedLocale,"utf-8",(function(err){_this.writeQueue.shift(),_this.writeQueue.length>0&&_this._processWriteQueue(),cb(err)}))},Y18N.prototype._readLocaleFile=function(){var localeLookup={},languageFile=this._resolveLocaleFile(this.directory,this.locale);try{localeLookup=JSON.parse(fs.readFileSync(languageFile,"utf-8"))}catch(err){if(err instanceof SyntaxError&&(err.message="syntax error in "+languageFile),"ENOENT"!==err.code)throw err;localeLookup={}}this.cache[this.locale]=localeLookup},Y18N.prototype._resolveLocaleFile=function(directory,locale){var file=path.resolve(directory,"./",locale+".json");if(this.fallbackToLanguage&&!this._fileExistsSync(file)&&~locale.lastIndexOf("_")){var languageFile=path.resolve(directory,"./",locale.split("_")[0]+".json");this._fileExistsSync(languageFile)&&(file=languageFile)}return file},Y18N.prototype._fileExistsSync=function(file){try{return fs.statSync(file).isFile()}catch(err){return!1}},Y18N.prototype.__n=function(){var args=Array.prototype.slice.call(arguments),singular=args.shift(),plural=args.shift(),quantity=args.shift(),cb=function(){};"function"==typeof args[args.length-1]&&(cb=args.pop()),this.cache[this.locale]||this._readLocaleFile();var str=1===quantity?singular:plural;this.cache[this.locale][singular]&&(str=this.cache[this.locale][singular][1===quantity?"one":"other"]),!this.cache[this.locale][singular]&&this.updateFiles?(this.cache[this.locale][singular]={one:singular,other:plural},this._enqueueWrite([this.directory,this.locale,cb])):cb();var values=[str];return~str.indexOf("%d")&&values.push(quantity),util$1.format.apply(util$1,values.concat(args))},Y18N.prototype.setLocale=function(locale){this.locale=locale},Y18N.prototype.getLocale=function(){return this.locale},Y18N.prototype.updateLocale=function(obj){for(var key in this.cache[this.locale]||this._readLocaleFile(),obj)this.cache[this.locale][key]=obj[key]};var y18n=function(opts){var y18n=new Y18N(opts);for(var key in y18n)"function"==typeof y18n[key]&&(y18n[key]=y18n[key].bind(y18n));return y18n};let previouslyVisitedConfigs=[];function checkForCircularExtends(cfgPath){if(previouslyVisitedConfigs.indexOf(cfgPath)>-1)throw new yerror(`Circular extended configurations: '${cfgPath}'.`)}function getPathToDefaultConfig(cwd,pathToExtend){return path.resolve(cwd,pathToExtend)}function mergeDeep(config1,config2){const target={},isObject=obj=>obj&&"object"==typeof obj&&!Array.isArray(obj);Object.assign(target,config1);for(const key of Object.keys(config2))isObject(config2[key])&&isObject(target[key])?target[key]=mergeDeep(config1[key],config2[key]):target[key]=config2[key];return target}function applyExtends(config,cwd,mergeExtends){let defaultConfig={};if(Object.prototype.hasOwnProperty.call(config,"extends")){if("string"!=typeof config.extends)return defaultConfig;const isPath=/\.json|\..*rc$/.test(config.extends);let pathToDefault=null;if(isPath)pathToDefault=getPathToDefaultConfig(cwd,config.extends);else try{pathToDefault=commonjsRequire.resolve(config.extends)}catch(err){}if(!pathToDefault&&!isPath)return config;checkForCircularExtends(pathToDefault),previouslyVisitedConfigs.push(pathToDefault),defaultConfig=isPath?JSON.parse(fs.readFileSync(pathToDefault,"utf8")):commonjsRequire(config.extends),delete config.extends,defaultConfig=applyExtends(defaultConfig,path.dirname(pathToDefault),mergeExtends)}return previouslyVisitedConfigs=[],mergeExtends?mergeDeep(defaultConfig,config):Object.assign({},defaultConfig,config)}var applyExtends_1=applyExtends;function getProcessArgvBinIndex(){return isBundledElectronApp()?0:1}function isBundledElectronApp(){return isElectronApp()&&!process.defaultApp}function isElectronApp(){return!!process.versions.electron}function getProcessArgvWithoutBin(){return process.argv.slice(getProcessArgvBinIndex()+1)}function getProcessArgvBin(){return process.argv[getProcessArgvBinIndex()]}var processArgv={getProcessArgvBin:getProcessArgvBin,getProcessArgvWithoutBin:getProcessArgvWithoutBin},getCallerFile=function(position){if(void 0===position&&(position=2),position>=Error.stackTraceLimit)throw new TypeError("getCallerFile(position) requires position be less then Error.stackTraceLimit but position was: `"+position+"` and Error.stackTraceLimit was: `"+Error.stackTraceLimit+"`");var oldPrepareStackTrace=Error.prepareStackTrace;Error.prepareStackTrace=function(_,stack){return stack};var stack=(new Error).stack;if(Error.prepareStackTrace=oldPrepareStackTrace,null!==stack&&"object"==typeof stack)return stack[position]?stack[position].getFileName():void 0};const pTry=(fn,...arguments_)=>new Promise(resolve=>{resolve(fn(...arguments_))});var pTry_1=pTry,default_1$3=pTry;pTry_1.default=default_1$3;const pLimit=concurrency=>{if(!Number.isInteger(concurrency)&&concurrency!==1/0||!(concurrency>0))return Promise.reject(new TypeError("Expected `concurrency` to be a number from 1 and up"));const queue=[];let activeCount=0;const next=()=>{activeCount--,queue.length>0&&queue.shift()()},run=(fn,resolve,...args)=>{activeCount++;const result=pTry_1(fn,...args);resolve(result),result.then(next,next)},generator=(fn,...args)=>new Promise(resolve=>((fn,resolve,...args)=>{activeCount<concurrency?run(fn,resolve,...args):queue.push(run.bind(null,fn,resolve,...args))})(fn,resolve,...args));return Object.defineProperties(generator,{activeCount:{get:()=>activeCount},pendingCount:{get:()=>queue.length}}),generator};var pLimit_1=pLimit,default_1$4=pLimit;pLimit_1.default=default_1$4;class EndError extends Error{constructor(value){super(),this.value=value}}const testElement=async(element,tester)=>tester(await element),finder=async element=>{const values=await Promise.all(element);if(!0===values[1])throw new EndError(values[0]);return!1},pLocate=async(iterable,tester,options)=>{options={concurrency:1/0,preserveOrder:!0,...options};const limit=pLimit_1(options.concurrency),items=[...iterable].map(element=>[element,limit(testElement,element,tester)]),checkLimit=pLimit_1(options.preserveOrder?1:1/0);try{await Promise.all(items.map(element=>checkLimit(finder,element)))}catch(error){if(error instanceof EndError)return error.value;throw error}};var pLocate_1=pLocate,default_1$5=pLocate;pLocate_1.default=default_1$5;const{promisify:promisify}=util$1,fsStat=promisify(fs.stat),fsLStat=promisify(fs.lstat),typeMappings={directory:"isDirectory",file:"isFile"};function checkType({type:type}){if(!(type in typeMappings))throw new Error(`Invalid type specified: ${type}`)}const matchType=(type,stat)=>void 0===type||stat[typeMappings[type]]();var locatePath=async(paths,options)=>{checkType(options={cwd:process.cwd(),type:"file",allowSymlinks:!0,...options});const statFn=options.allowSymlinks?fsStat:fsLStat;return pLocate_1(paths,async path_=>{try{const stat=await statFn(path.resolve(options.cwd,path_));return matchType(options.type,stat)}catch(_){return!1}},options)},sync=(paths,options)=>{checkType(options={cwd:process.cwd(),allowSymlinks:!0,type:"file",...options});const statFn=options.allowSymlinks?fs.statSync:fs.lstatSync;for(const path_ of paths)try{const stat=statFn(path.resolve(options.cwd,path_));if(matchType(options.type,stat))return path_}catch(_){}};locatePath.sync=sync;const{promisify:promisify$1}=util$1,pAccess=promisify$1(fs.access);var pathExists=async path=>{try{return await pAccess(path),!0}catch(_){return!1}},sync$1=path=>{try{return fs.accessSync(path),!0}catch(_){return!1}};pathExists.sync=sync$1;var findUp=createCommonjsModule((function(module){const stop=Symbol("findUp.stop");module.exports=async(name,options={})=>{let directory=path.resolve(options.cwd||"");const{root:root}=path.parse(directory),paths=[].concat(name),runMatcher=async locateOptions=>{if("function"!=typeof name)return locatePath(paths,locateOptions);const foundPath=await name(locateOptions.cwd);return"string"==typeof foundPath?locatePath([foundPath],locateOptions):foundPath};for(;;){const foundPath=await runMatcher({...options,cwd:directory});if(foundPath===stop)return;if(foundPath)return path.resolve(directory,foundPath);if(directory===root)return;directory=path.dirname(directory)}},module.exports.sync=(name,options={})=>{let directory=path.resolve(options.cwd||"");const{root:root}=path.parse(directory),paths=[].concat(name),runMatcher=locateOptions=>{if("function"!=typeof name)return locatePath.sync(paths,locateOptions);const foundPath=name(locateOptions.cwd);return"string"==typeof foundPath?locatePath.sync([foundPath],locateOptions):foundPath};for(;;){const foundPath=runMatcher({...options,cwd:directory});if(foundPath===stop)return;if(foundPath)return path.resolve(directory,foundPath);if(directory===root)return;directory=path.dirname(directory)}},module.exports.exists=pathExists,module.exports.sync.exists=pathExists.sync,module.exports.stop=stop})),findUp_1=findUp.sync,findUp_2=findUp.exists,findUp_3=findUp.stop,requireMainFilename=function(_require){var main=(_require=_require||commonjsRequire).main;return main&&isIISNode(main)?handleIISNode(main):main?main.filename:process.cwd()};function isIISNode(main){return/\\iisnode\\/.test(main.filename)}function handleIISNode(main){return main.children.length?main.children[0].filename:main.filename}var yargs=createCommonjsModule((function(module,exports){const{globalMiddlewareFactory:globalMiddlewareFactory}=middleware;function rebase(base,dir){return path.relative(base,dir)}(exports=module.exports=function(processArgs,cwd,parentRequire){processArgs=processArgs||[];const self={};let command$1=null,completion$1=null,groups={};const globalMiddleware=[];let output="";const preservedGroups={};let usage$1=null,validation$1=null,handlerFinishCommand=null;const y18n$1=y18n({directory:path.resolve(__dirname,"./locales"),updateFiles:!1});self.middleware=globalMiddlewareFactory(globalMiddleware,self),cwd||(cwd=process.cwd());self.scriptName=function(scriptName){return self.customScriptName=!0,self.$0=scriptName,self},/\b(node|iojs|electron)(\.exe)?$/.test(process.argv[0])?self.$0=process.argv.slice(1,2):self.$0=process.argv.slice(0,1);self.$0=self.$0.map((x,i)=>{const b=rebase(cwd,x);return x.match(/^(\/|([a-zA-Z]:)?\\)/)&&b.length<x.length?b:x}).join(" ").trim(),void 0!==process.env._&&processArgv.getProcessArgvBin()===process.env._&&(self.$0=process.env._.replace(`${path.dirname(process.execPath)}/`,""));const context={resets:-1,commands:[],fullCommands:[],files:[]};let options;self.getContext=()=>context,self.resetOptions=self.reset=function(aliases){context.resets++,aliases=aliases||{},options=options||{};const tmpOptions={};tmpOptions.local=options.local?options.local:[],tmpOptions.configObjects=options.configObjects?options.configObjects:[];const localLookup={};tmpOptions.local.forEach(l=>{localLookup[l]=!0,(aliases[l]||[]).forEach(a=>{localLookup[a]=!0})}),Object.assign(preservedGroups,Object.keys(groups).reduce((acc,groupName)=>{const keys=groups[groupName].filter(key=>!(key in localLookup));return keys.length>0&&(acc[groupName]=keys),acc},{})),groups={};return["array","boolean","string","skipValidation","count","normalize","number","hiddenOptions"].forEach(k=>{tmpOptions[k]=(options[k]||[]).filter(k=>!localLookup[k])}),["narg","key","alias","default","defaultDescription","config","choices","demandedOptions","demandedCommands","coerce","deprecatedOptions"].forEach(k=>{tmpOptions[k]=objFilter(options[k],(k,v)=>!localLookup[k])}),tmpOptions.envPrefix=options.envPrefix,options=tmpOptions,usage$1=usage$1?usage$1.reset(localLookup):usage(self,y18n$1),validation$1=validation$1?validation$1.reset(localLookup):validation(self,usage$1,y18n$1),command$1=command$1?command$1.reset():command(self,usage$1,validation$1,globalMiddleware),completion$1||(completion$1=completion(self,usage$1,command$1)),completionCommand=null,output="",exitError=null,hasOutput=!1,self.parsed=!1,self},self.resetOptions();const frozens=[];function freeze(){const frozen={};frozens.push(frozen),frozen.options=options,frozen.configObjects=options.configObjects.slice(0),frozen.exitProcess=exitProcess,frozen.groups=groups,usage$1.freeze(),validation$1.freeze(),command$1.freeze(),frozen.strict=strict,frozen.strictCommands=strictCommands,frozen.completionCommand=completionCommand,frozen.output=output,frozen.exitError=exitError,frozen.hasOutput=hasOutput,frozen.parsed=self.parsed,frozen.parseFn=parseFn,frozen.parseContext=parseContext,frozen.handlerFinishCommand=handlerFinishCommand}function unfreeze(){const frozen=frozens.pop();options=frozen.options,options.configObjects=frozen.configObjects,exitProcess=frozen.exitProcess,groups=frozen.groups,output=frozen.output,exitError=frozen.exitError,hasOutput=frozen.hasOutput,self.parsed=frozen.parsed,usage$1.unfreeze(),validation$1.unfreeze(),command$1.unfreeze(),strict=frozen.strict,strictCommands=frozen.strictCommands,completionCommand=frozen.completionCommand,parseFn=frozen.parseFn,parseContext=frozen.parseContext,handlerFinishCommand=frozen.handlerFinishCommand}function populateParserHintArray(type,keys,value){(keys=[].concat(keys)).forEach(key=>{key=sanitizeKey(key),options[type].push(key)})}function populateParserHintObject(builder,isArray,type,key,value){if(Array.isArray(key)){const temp=Object.create(null);key.forEach(k=>{temp[k]=value}),builder(temp)}else"object"==typeof key?Object.keys(key).forEach(k=>{builder(k,key[k])}):(key=sanitizeKey(key),options[type][key]=isArray?(options[type][key]||[]).concat(value):value)}function sanitizeKey(key){return"__proto__"===key?"___proto___":key}function deleteFromParserHintObject(optionKey){Object.keys(options).forEach(hintKey=>{const hint=options[hintKey];Array.isArray(hint)?~hint.indexOf(optionKey)&&hint.splice(hint.indexOf(optionKey),1):"object"==typeof hint&&delete hint[optionKey]}),delete usage$1.getDescriptions()[optionKey]}self.boolean=function(keys){return argsert_1("<array|string>",[keys],arguments.length),populateParserHintArray("boolean",keys),self},self.array=function(keys){return argsert_1("<array|string>",[keys],arguments.length),populateParserHintArray("array",keys),self},self.number=function(keys){return argsert_1("<array|string>",[keys],arguments.length),populateParserHintArray("number",keys),self},self.normalize=function(keys){return argsert_1("<array|string>",[keys],arguments.length),populateParserHintArray("normalize",keys),self},self.count=function(keys){return argsert_1("<array|string>",[keys],arguments.length),populateParserHintArray("count",keys),self},self.string=function(keys){return argsert_1("<array|string>",[keys],arguments.length),populateParserHintArray("string",keys),self},self.requiresArg=function(keys,value){return argsert_1("<array|string|object> [number]",[keys],arguments.length),"string"==typeof keys&&options.narg[keys]||populateParserHintObject(self.requiresArg,!1,"narg",keys,NaN),self},self.skipValidation=function(keys){return argsert_1("<array|string>",[keys],arguments.length),populateParserHintArray("skipValidation",keys),self},self.nargs=function(key,value){return argsert_1("<string|object|array> [number]",[key,value],arguments.length),populateParserHintObject(self.nargs,!1,"narg",key,value),self},self.choices=function(key,value){return argsert_1("<object|string|array> [string|array]",[key,value],arguments.length),populateParserHintObject(self.choices,!0,"choices",key,value),self},self.alias=function(key,value){return argsert_1("<object|string|array> [string|array]",[key,value],arguments.length),populateParserHintObject(self.alias,!0,"alias",key,value),self},self.default=self.defaults=function(key,value,defaultDescription){return argsert_1("<object|string|array> [*] [string]",[key,value,defaultDescription],arguments.length),defaultDescription&&(options.defaultDescription[key]=defaultDescription),"function"==typeof value&&(options.defaultDescription[key]||(options.defaultDescription[key]=usage$1.functionDescription(value)),value=value.call()),populateParserHintObject(self.default,!1,"default",key,value),self},self.describe=function(key,desc){return argsert_1("<object|string|array> [string]",[key,desc],arguments.length),populateParserHintObject(self.describe,!1,"key",key,!0),usage$1.describe(key,desc),self},self.demandOption=function(keys,msg){return argsert_1("<object|string|array> [string]",[keys,msg],arguments.length),populateParserHintObject(self.demandOption,!1,"demandedOptions",keys,msg),self},self.coerce=function(keys,value){return argsert_1("<object|string|array> [function]",[keys,value],arguments.length),populateParserHintObject(self.coerce,!1,"coerce",keys,value),self},self.config=function(key,msg,parseFn){return argsert_1("[object|string] [string|function] [function]",[key,msg,parseFn],arguments.length),"object"==typeof key?(key=applyExtends_1(key,cwd,self.getParserConfiguration()["deep-merge-config"]),options.configObjects=(options.configObjects||[]).concat(key),self):("function"==typeof msg&&(parseFn=msg,msg=null),key=key||"config",self.describe(key,msg||usage$1.deferY18nLookup("Path to JSON config file")),(Array.isArray(key)?key:[key]).forEach(k=>{options.config[k]=parseFn||!0}),self)},self.example=function(cmd,description){return argsert_1("<string> [string]",[cmd,description],arguments.length),usage$1.example(cmd,description),self},self.command=function(cmd,description,builder,handler,middlewares){return argsert_1("<string|array|object> [string|boolean] [function|object] [function] [array]",[cmd,description,builder,handler,middlewares],arguments.length),command$1.addHandler(cmd,description,builder,handler,middlewares),self},self.commandDir=function(dir,opts){argsert_1("<string> [object]",[dir,opts],arguments.length);const req=parentRequire||commonjsRequire;return command$1.addDirectory(dir,self.getContext(),req,getCallerFile(),opts),self},self.demand=self.required=self.require=function(keys,max,msg){return Array.isArray(max)?(max.forEach(key=>{self.demandOption(key,msg)}),max=1/0):"number"!=typeof max&&(msg=max,max=1/0),"number"==typeof keys?self.demandCommand(keys,max,msg,msg):Array.isArray(keys)?keys.forEach(key=>{self.demandOption(key,msg)}):"string"==typeof msg?self.demandOption(keys,msg):!0!==msg&&void 0!==msg||self.demandOption(keys),self},self.demandCommand=function(min,max,minMsg,maxMsg){return argsert_1("[number] [number|string] [string|null|undefined] [string|null|undefined]",[min,max,minMsg,maxMsg],arguments.length),void 0===min&&(min=1),"number"!=typeof max&&(minMsg=max,max=1/0),self.global("_",!1),options.demandedCommands._={min:min,max:max,minMsg:minMsg,maxMsg:maxMsg},self},self.getDemandedOptions=()=>(argsert_1([],0),options.demandedOptions),self.getDemandedCommands=()=>(argsert_1([],0),options.demandedCommands),self.deprecateOption=function(option,message){return argsert_1("<string> [string|boolean]",[option,message],arguments.length),options.deprecatedOptions[option]=message,self},self.getDeprecatedOptions=()=>(argsert_1([],0),options.deprecatedOptions),self.implies=function(key,value){return argsert_1("<string|object> [number|string|array]",[key,value],arguments.length),validation$1.implies(key,value),self},self.conflicts=function(key1,key2){return argsert_1("<string|object> [string|array]",[key1,key2],arguments.length),validation$1.conflicts(key1,key2),self},self.usage=function(msg,description,builder,handler){if(argsert_1("<string|null|undefined> [string|boolean] [function|object] [function]",[msg,description,builder,handler],arguments.length),void 0!==description){if((msg||"").match(/^\$0( |$)/))return self.command(msg,description,builder,handler);throw new yerror(".usage() description must start with $0 if being used as alias for .command()")}return usage$1.usage(msg),self},self.epilogue=self.epilog=function(msg){return argsert_1("<string>",[msg],arguments.length),usage$1.epilog(msg),self},self.fail=function(f){return argsert_1("<function>",[f],arguments.length),usage$1.failFn(f),self},self.onFinishCommand=function(f){return argsert_1("<function>",[f],arguments.length),handlerFinishCommand=f,self},self.getHandlerFinishCommand=()=>handlerFinishCommand,self.check=function(f,_global){return argsert_1("<function> [boolean]",[f,_global],arguments.length),validation$1.check(f,!1!==_global),self},self.global=function(globals,global){return argsert_1("<string|array> [boolean]",[globals,global],arguments.length),globals=[].concat(globals),!1!==global?options.local=options.local.filter(l=>-1===globals.indexOf(l)):globals.forEach(g=>{-1===options.local.indexOf(g)&&options.local.push(g)}),self},self.pkgConf=function(key,rootPath){argsert_1("<string> [string]",[key,rootPath],arguments.length);let conf=null;const obj=pkgUp(rootPath||cwd);return obj[key]&&"object"==typeof obj[key]&&(conf=applyExtends_1(obj[key],rootPath||cwd,self.getParserConfiguration()["deep-merge-config"]),options.configObjects=(options.configObjects||[]).concat(conf)),self};const pkgs={};function pkgUp(rootPath){const npath=rootPath||"*";if(pkgs[npath])return pkgs[npath];const findUp$1=findUp;let obj={};try{let startDir=rootPath||requireMainFilename(parentRequire||commonjsRequire);!rootPath&&path.extname(startDir)&&(startDir=path.dirname(startDir));const pkgJsonPath=findUp$1.sync("package.json",{cwd:startDir});obj=JSON.parse(fs.readFileSync(pkgJsonPath))}catch(noop){}return pkgs[npath]=obj||{},pkgs[npath]}let parseFn=null,parseContext=null;self.parse=function(args,shortCircuit,_parseFn){if(argsert_1("[string|array] [function|boolean|object] [function]",[args,shortCircuit,_parseFn],arguments.length),freeze(),void 0===args){const argv=self._parseArgs(processArgs),tmpParsed=self.parsed;return unfreeze(),self.parsed=tmpParsed,argv}"object"==typeof shortCircuit&&(parseContext=shortCircuit,shortCircuit=_parseFn),"function"==typeof shortCircuit&&(parseFn=shortCircuit,shortCircuit=null),shortCircuit||(processArgs=args),parseFn&&(exitProcess=!1);const parsed=self._parseArgs(args,shortCircuit);return completion$1.setParsed(self.parsed),parseFn&&parseFn(exitError,parsed,output),unfreeze(),parsed},self._getParseContext=()=>parseContext||{},self._hasParseCallback=()=>!!parseFn,self.option=self.options=function(key,opt){if(argsert_1("<string|object> [object]",[key,opt],arguments.length),"object"==typeof key)Object.keys(key).forEach(k=>{self.options(k,key[k])});else{"object"!=typeof opt&&(opt={}),options.key[key]=!0,opt.alias&&self.alias(key,opt.alias);const deprecate=opt.deprecate||opt.deprecated;deprecate&&self.deprecateOption(key,deprecate);const demand=opt.demand||opt.required||opt.require;demand&&self.demand(key,demand),opt.demandOption&&self.demandOption(key,"string"==typeof opt.demandOption?opt.demandOption:void 0),"conflicts"in opt&&self.conflicts(key,opt.conflicts),"default"in opt&&self.default(key,opt.default),"implies"in opt&&self.implies(key,opt.implies),"nargs"in opt&&self.nargs(key,opt.nargs),opt.config&&self.config(key,opt.configParser),opt.normalize&&self.normalize(key),"choices"in opt&&self.choices(key,opt.choices),"coerce"in opt&&self.coerce(key,opt.coerce),"group"in opt&&self.group(key,opt.group),(opt.boolean||"boolean"===opt.type)&&(self.boolean(key),opt.alias&&self.boolean(opt.alias)),(opt.array||"array"===opt.type)&&(self.array(key),opt.alias&&self.array(opt.alias)),(opt.number||"number"===opt.type)&&(self.number(key),opt.alias&&self.number(opt.alias)),(opt.string||"string"===opt.type)&&(self.string(key),opt.alias&&self.string(opt.alias)),(opt.count||"count"===opt.type)&&self.count(key),"boolean"==typeof opt.global&&self.global(key,opt.global),opt.defaultDescription&&(options.defaultDescription[key]=opt.defaultDescription),opt.skipValidation&&self.skipValidation(key);const desc=opt.describe||opt.description||opt.desc;self.describe(key,desc),opt.hidden&&self.hide(key),opt.requiresArg&&self.requiresArg(key)}return self},self.getOptions=()=>options,self.positional=function(key,opts){if(argsert_1("<string> <object>",[key,opts],arguments.length),0===context.resets)throw new yerror(".positional() can only be called in a command's builder function");const supportedOpts=["default","defaultDescription","implies","normalize","choices","conflicts","coerce","type","describe","desc","description","alias"];opts=objFilter(opts,(k,v)=>{let accept=-1!==supportedOpts.indexOf(k);return"type"===k&&-1===["string","number","boolean"].indexOf(v)&&(accept=!1),accept});const fullCommand=context.fullCommands[context.fullCommands.length-1],parseOptions=fullCommand?command$1.cmdToParseOptions(fullCommand):{array:[],alias:{},default:{},demand:{}};return Object.keys(parseOptions).forEach(pk=>{Array.isArray(parseOptions[pk])?-1!==parseOptions[pk].indexOf(key)&&(opts[pk]=!0):parseOptions[pk][key]&&!(pk in opts)&&(opts[pk]=parseOptions[pk][key])}),self.group(key,usage$1.getPositionalGroupName()),self.option(key,opts)},self.group=function(opts,groupName){argsert_1("<string|array> <string>",[opts,groupName],arguments.length);const existing=preservedGroups[groupName]||groups[groupName];preservedGroups[groupName]&&delete preservedGroups[groupName];const seen={};return groups[groupName]=(existing||[]).concat(opts).filter(key=>!seen[key]&&(seen[key]=!0)),self},self.getGroups=()=>Object.assign({},groups,preservedGroups),self.env=function(prefix){return argsert_1("[string|boolean]",[prefix],arguments.length),options.envPrefix=!1===prefix?void 0:prefix||"",self},self.wrap=function(cols){return argsert_1("<number|null|undefined>",[cols],arguments.length),usage$1.wrap(cols),self};let strict=!1;self.strict=function(enabled){return argsert_1("[boolean]",[enabled],arguments.length),strict=!1!==enabled,self},self.getStrict=()=>strict;let strictCommands=!1;self.strictCommands=function(enabled){return argsert_1("[boolean]",[enabled],arguments.length),strictCommands=!1!==enabled,self},self.getStrictCommands=()=>strictCommands;let parserConfig={};self.parserConfiguration=function(config){return argsert_1("<object>",[config],arguments.length),parserConfig=config,self},self.getParserConfiguration=()=>parserConfig,self.showHelp=function(level){return argsert_1("[string|function]",[level],arguments.length),self.parsed||self._parseArgs(processArgs),command$1.hasDefaultCommand()&&(context.resets++,command$1.runDefaultBuilderOn(self,!0)),usage$1.showHelp(level),self};let versionOpt=null;function guessVersion(){return pkgUp().version||"unknown"}self.version=function(opt,msg,ver){const defaultVersionOpt="version";if(argsert_1("[boolean|string] [string] [string]",[opt,msg,ver],arguments.length),versionOpt&&(deleteFromParserHintObject(versionOpt),usage$1.version(void 0),versionOpt=null),0===arguments.length)ver=guessVersion(),opt=defaultVersionOpt;else if(1===arguments.length){if(!1===opt)return self;ver=opt,opt=defaultVersionOpt}else 2===arguments.length&&(ver=msg,msg=null);return versionOpt="string"==typeof opt?opt:defaultVersionOpt,msg=msg||usage$1.deferY18nLookup("Show version number"),usage$1.version(ver||void 0),self.boolean(versionOpt),self.describe(versionOpt,msg),self};let helpOpt=null;self.addHelpOpt=self.help=function(opt,msg){const defaultHelpOpt="help";return argsert_1("[string|boolean] [string]",[opt,msg],arguments.length),helpOpt&&(deleteFromParserHintObject(helpOpt),helpOpt=null),1===arguments.length&&!1===opt||(helpOpt="string"==typeof opt?opt:defaultHelpOpt,self.boolean(helpOpt),self.describe(helpOpt,msg||usage$1.deferY18nLookup("Show help"))),self};options.showHiddenOpt="show-hidden",self.addShowHiddenOpt=self.showHidden=function(opt,msg){if(argsert_1("[string|boolean] [string]",[opt,msg],arguments.length),1===arguments.length&&!1===opt)return self;const showHiddenOpt="string"==typeof opt?opt:"show-hidden";return self.boolean(showHiddenOpt),self.describe(showHiddenOpt,msg||usage$1.deferY18nLookup("Show hidden options")),options.showHiddenOpt=showHiddenOpt,self},self.hide=function(key){return argsert_1("<string|object>",[key],arguments.length),options.hiddenOptions.push(key),self},self.showHelpOnFail=function(enabled,message){return argsert_1("[boolean|string] [string]",[enabled,message],arguments.length),usage$1.showHelpOnFail(enabled,message),self};var exitProcess=!0;self.exitProcess=function(enabled){return argsert_1("[boolean]",[enabled],arguments.length),"boolean"!=typeof enabled&&(enabled=!0),exitProcess=enabled,self},self.getExitProcess=()=>exitProcess;var completionCommand=null;self.completion=function(cmd,desc,fn){return argsert_1("[string] [string|boolean|function] [function]",[cmd,desc,fn],arguments.length),"function"==typeof desc&&(fn=desc,desc=null),completionCommand=cmd||completionCommand||"completion",desc||!1===desc||(desc="generate completion script"),self.command(completionCommand,desc),fn&&completion$1.registerFunction(fn),self},self.showCompletionScript=function($0,cmd){return argsert_1("[string] [string]",[$0,cmd],arguments.length),$0=$0||self.$0,_logger.log(completion$1.generateCompletionScript($0,cmd||completionCommand||"completion")),self},self.getCompletion=function(args,done){argsert_1("<array> <function>",[args,done],arguments.length),completion$1.getCompletion(args,done)},self.locale=function(locale){return argsert_1("[string]",[locale],arguments.length),0===arguments.length?(guessLocale(),y18n$1.getLocale()):(detectLocale=!1,y18n$1.setLocale(locale),self)},self.updateStrings=self.updateLocale=function(obj){return argsert_1("<object>",[obj],arguments.length),detectLocale=!1,y18n$1.updateLocale(obj),self};let detectLocale=!0;self.detectLocale=function(detect){return argsert_1("<boolean>",[detect],arguments.length),detectLocale=detect,self},self.getDetectLocale=()=>detectLocale;var hasOutput=!1,exitError=null;self.exit=(code,err)=>{hasOutput=!0,exitError=err,exitProcess&&process.exit(code)};const _logger={log(){const args=[];for(let i=0;i<arguments.length;i++)args.push(arguments[i]);self._hasParseCallback()||console.log.apply(console,args),hasOutput=!0,output.length&&(output+="\n"),output+=args.join(" ")},error(){const args=[];for(let i=0;i<arguments.length;i++)args.push(arguments[i]);self._hasParseCallback()||console.error.apply(console,args),hasOutput=!0,output.length&&(output+="\n"),output+=args.join(" ")}};let recommendCommands;function guessLocale(){if(!detectLocale)return;const locale=process.env.LC_ALL||process.env.LC_MESSAGES||process.env.LANG||process.env.LANGUAGE||"en_US";self.locale(locale.replace(/[.:].*/,""))}return self._getLoggerInstance=()=>_logger,self._hasOutput=()=>hasOutput,self._setHasOutput=()=>{hasOutput=!0},self.recommendCommands=function(recommend){return argsert_1("[boolean]",[recommend],arguments.length),recommendCommands="boolean"!=typeof recommend||recommend,self},self.getUsageInstance=()=>usage$1,self.getValidationInstance=()=>validation$1,self.getCommandInstance=()=>command$1,self.terminalWidth=()=>(argsert_1([],0),void 0!==process.stdout.columns?process.stdout.columns:null),Object.defineProperty(self,"argv",{get:()=>self._parseArgs(processArgs),enumerable:!0}),self._parseArgs=function(args,shortCircuit,_calledFromCommand,commandIndex){let skipValidation=!!_calledFromCommand;args=args||processArgs,options.__=y18n$1.__,options.configuration=self.getParserConfiguration();const populateDoubleDash=!!options.configuration["populate--"],config=Object.assign({},options.configuration,{"populate--":!0}),parsed=yargsParser.detailed(args,Object.assign({},options,{configuration:config}));let argv=parsed.argv;parseContext&&(argv=Object.assign({},argv,parseContext));const aliases=parsed.aliases;argv.$0=self.$0,self.parsed=parsed;try{if(guessLocale(),shortCircuit)return populateDoubleDash||_calledFromCommand?argv:self._copyDoubleDash(argv);if(helpOpt){~[helpOpt].concat(aliases[helpOpt]||[]).filter(k=>k.length>1).indexOf(argv._[argv._.length-1])&&(argv._.pop(),argv[helpOpt]=!0)}const handlerKeys=command$1.getCommands(),requestCompletions=completion$1.completionKey in argv,skipRecommendation=argv[helpOpt]||requestCompletions,skipDefaultCommand=skipRecommendation&&(handlerKeys.length>1||"$0"!==handlerKeys[0]);if(argv._.length){if(handlerKeys.length){let firstUnknownCommand;for(let cmd,i=commandIndex||0;void 0!==argv._[i];i++){if(cmd=String(argv._[i]),~handlerKeys.indexOf(cmd)&&cmd!==completionCommand){const innerArgv=command$1.runCommand(cmd,self,parsed,i+1);return populateDoubleDash?innerArgv:self._copyDoubleDash(innerArgv)}if(!firstUnknownCommand&&cmd!==completionCommand){firstUnknownCommand=cmd;break}}if(command$1.hasDefaultCommand()&&!skipDefaultCommand){const innerArgv=command$1.runCommand(null,self,parsed);return populateDoubleDash?innerArgv:self._copyDoubleDash(innerArgv)}recommendCommands&&firstUnknownCommand&&!skipRecommendation&&validation$1.recommendCommands(firstUnknownCommand,handlerKeys)}completionCommand&&~argv._.indexOf(completionCommand)&&!requestCompletions&&(exitProcess&&setBlocking(!0),self.showCompletionScript(),self.exit(0))}else if(command$1.hasDefaultCommand()&&!skipDefaultCommand){const innerArgv=command$1.runCommand(null,self,parsed);return populateDoubleDash?innerArgv:self._copyDoubleDash(innerArgv)}if(requestCompletions){exitProcess&&setBlocking(!0);const completionArgs=args.slice(args.indexOf(`--${completion$1.completionKey}`)+1);return completion$1.getCompletion(completionArgs,completions=>{(completions||[]).forEach(completion=>{_logger.log(completion)}),self.exit(0)}),populateDoubleDash||_calledFromCommand?argv:self._copyDoubleDash(argv)}if(hasOutput||Object.keys(argv).forEach(key=>{key===helpOpt&&argv[key]?(exitProcess&&setBlocking(!0),skipValidation=!0,self.showHelp("log"),self.exit(0)):key===versionOpt&&argv[key]&&(exitProcess&&setBlocking(!0),skipValidation=!0,usage$1.showVersion(),self.exit(0))}),!skipValidation&&options.skipValidation.length>0&&(skipValidation=Object.keys(argv).some(key=>options.skipValidation.indexOf(key)>=0&&!0===argv[key])),!skipValidation){if(parsed.error)throw new yerror(parsed.error.message);requestCompletions||self._runValidation(argv,aliases,{},parsed.error)}}catch(err){if(!(err instanceof yerror))throw err;usage$1.fail(err.message,err)}return populateDoubleDash||_calledFromCommand?argv:self._copyDoubleDash(argv)},self._copyDoubleDash=function(argv){if(!argv._||!argv["--"])return argv;argv._.push.apply(argv._,argv["--"]);try{delete argv["--"]}catch(_err){}return argv},self._runValidation=function(argv,aliases,positionalMap,parseErrors){if(parseErrors)throw new yerror(parseErrors.message);validation$1.nonOptionCount(argv),validation$1.requiredArguments(argv);let failedStrictCommands=!1;strictCommands&&(failedStrictCommands=validation$1.unknownCommands(argv,aliases,positionalMap)),strict&&!failedStrictCommands&&validation$1.unknownArguments(argv,aliases,positionalMap),validation$1.customChecks(argv,aliases),validation$1.limitedChoices(argv),validation$1.implications(argv),validation$1.conflicting(argv)},self.help(),self.version(),self}).Parser=yargsParser,exports.rebase=rebase})),yargs_1=yargs.Parser,yargs_2=yargs.rebase;Argv(processArgv.getProcessArgvWithoutBin());var yargs_1$1=Argv;function Argv(processArgs,cwd){const argv=yargs(processArgs,cwd,commonjsRequire);return singletonify(argv),argv}function singletonify(inst){Object.keys(inst).forEach(key=>{"argv"===key?Argv.__defineGetter__(key,inst.__lookupGetter__(key)):"function"==typeof inst[key]?Argv[key]=inst[key].bind(inst):(Argv.__defineGetter__("$0",()=>inst.$0),Argv.__defineGetter__("parsed",()=>inst.parsed))})}let quiet=!1;function log(message){quiet||console.log(message)}log.configure=function(options){quiet=options.quiet};var log_1=log,colorName$1={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};const reverseKeywords$1={};for(const key of Object.keys(colorName$1))reverseKeywords$1[colorName$1[key]]=key;const convert$2={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};var conversions$1=convert$2;for(const model of Object.keys(convert$2)){if(!("channels"in convert$2[model]))throw new Error("missing channels property: "+model);if(!("labels"in convert$2[model]))throw new Error("missing channel labels property: "+model);if(convert$2[model].labels.length!==convert$2[model].channels)throw new Error("channel and label counts mismatch: "+model);const{channels:channels,labels:labels}=convert$2[model];delete convert$2[model].channels,delete convert$2[model].labels,Object.defineProperty(convert$2[model],"channels",{value:channels}),Object.defineProperty(convert$2[model],"labels",{value:labels})}function comparativeDistance$1(x,y){return(x[0]-y[0])**2+(x[1]-y[1])**2+(x[2]-y[2])**2}function buildGraph$1(){const graph={},models=Object.keys(conversions$1);for(let len=models.length,i=0;i<len;i++)graph[models[i]]={distance:-1,parent:null};return graph}function deriveBFS$1(fromModel){const graph=buildGraph$1(),queue=[fromModel];for(graph[fromModel].distance=0;queue.length;){const current=queue.pop(),adjacents=Object.keys(conversions$1[current]);for(let len=adjacents.length,i=0;i<len;i++){const adjacent=adjacents[i],node=graph[adjacent];-1===node.distance&&(node.distance=graph[current].distance+1,node.parent=current,queue.unshift(adjacent))}}return graph}function link$1(from,to){return function(args){return to(from(args))}}function wrapConversion$1(toModel,graph){const path=[graph[toModel].parent,toModel];let fn=conversions$1[graph[toModel].parent][toModel],cur=graph[toModel].parent;for(;graph[cur].parent;)path.unshift(graph[cur].parent),fn=link$1(conversions$1[graph[cur].parent][cur],fn),cur=graph[cur].parent;return fn.conversion=path,fn}convert$2.rgb.hsl=function(rgb){const r=rgb[0]/255,g=rgb[1]/255,b=rgb[2]/255,min=Math.min(r,g,b),max=Math.max(r,g,b),delta=max-min;let h,s;max===min?h=0:r===max?h=(g-b)/delta:g===max?h=2+(b-r)/delta:b===max&&(h=4+(r-g)/delta),h=Math.min(60*h,360),h<0&&(h+=360);const l=(min+max)/2;return s=max===min?0:l<=.5?delta/(max+min):delta/(2-max-min),[h,100*s,100*l]},convert$2.rgb.hsv=function(rgb){let rdif,gdif,bdif,h,s;const r=rgb[0]/255,g=rgb[1]/255,b=rgb[2]/255,v=Math.max(r,g,b),diff=v-Math.min(r,g,b),diffc=function(c){return(v-c)/6/diff+.5};return 0===diff?(h=0,s=0):(s=diff/v,rdif=diffc(r),gdif=diffc(g),bdif=diffc(b),r===v?h=bdif-gdif:g===v?h=1/3+rdif-bdif:b===v&&(h=2/3+gdif-rdif),h<0?h+=1:h>1&&(h-=1)),[360*h,100*s,100*v]},convert$2.rgb.hwb=function(rgb){const r=rgb[0],g=rgb[1];let b=rgb[2];const h=convert$2.rgb.hsl(rgb)[0],w=1/255*Math.min(r,Math.min(g,b));return b=1-1/255*Math.max(r,Math.max(g,b)),[h,100*w,100*b]},convert$2.rgb.cmyk=function(rgb){const r=rgb[0]/255,g=rgb[1]/255,b=rgb[2]/255,k=Math.min(1-r,1-g,1-b);return[100*((1-r-k)/(1-k)||0),100*((1-g-k)/(1-k)||0),100*((1-b-k)/(1-k)||0),100*k]},convert$2.rgb.keyword=function(rgb){const reversed=reverseKeywords$1[rgb];if(reversed)return reversed;let currentClosestKeyword,currentClosestDistance=1/0;for(const keyword of Object.keys(colorName$1)){const distance=comparativeDistance$1(rgb,colorName$1[keyword]);distance<currentClosestDistance&&(currentClosestDistance=distance,currentClosestKeyword=keyword)}return currentClosestKeyword},convert$2.keyword.rgb=function(keyword){return colorName$1[keyword]},convert$2.rgb.xyz=function(rgb){let r=rgb[0]/255,g=rgb[1]/255,b=rgb[2]/255;return r=r>.04045?((r+.055)/1.055)**2.4:r/12.92,g=g>.04045?((g+.055)/1.055)**2.4:g/12.92,b=b>.04045?((b+.055)/1.055)**2.4:b/12.92,[100*(.4124*r+.3576*g+.1805*b),100*(.2126*r+.7152*g+.0722*b),100*(.0193*r+.1192*g+.9505*b)]},convert$2.rgb.lab=function(rgb){const xyz=convert$2.rgb.xyz(rgb);let x=xyz[0],y=xyz[1],z=xyz[2];return x/=95.047,y/=100,z/=108.883,x=x>.008856?x**(1/3):7.787*x+16/116,y=y>.008856?y**(1/3):7.787*y+16/116,z=z>.008856?z**(1/3):7.787*z+16/116,[116*y-16,500*(x-y),200*(y-z)]},convert$2.hsl.rgb=function(hsl){const h=hsl[0]/360,s=hsl[1]/100,l=hsl[2]/100;let t2,t3,val;if(0===s)return val=255*l,[val,val,val];t2=l<.5?l*(1+s):l+s-l*s;const t1=2*l-t2,rgb=[0,0,0];for(let i=0;i<3;i++)t3=h+1/3*-(i-1),t3<0&&t3++,t3>1&&t3--,val=6*t3<1?t1+6*(t2-t1)*t3:2*t3<1?t2:3*t3<2?t1+(t2-t1)*(2/3-t3)*6:t1,rgb[i]=255*val;return rgb},convert$2.hsl.hsv=function(hsl){const h=hsl[0];let s=hsl[1]/100,l=hsl[2]/100,smin=s;const lmin=Math.max(l,.01);return l*=2,s*=l<=1?l:2-l,smin*=lmin<=1?lmin:2-lmin,[h,100*(0===l?2*smin/(lmin+smin):2*s/(l+s)),100*((l+s)/2)]},convert$2.hsv.rgb=function(hsv){const h=hsv[0]/60,s=hsv[1]/100;let v=hsv[2]/100;const hi=Math.floor(h)%6,f=h-Math.floor(h),p=255*v*(1-s),q=255*v*(1-s*f),t=255*v*(1-s*(1-f));switch(v*=255,hi){case 0:return[v,t,p];case 1:return[q,v,p];case 2:return[p,v,t];case 3:return[p,q,v];case 4:return[t,p,v];case 5:return[v,p,q]}},convert$2.hsv.hsl=function(hsv){const h=hsv[0],s=hsv[1]/100,v=hsv[2]/100,vmin=Math.max(v,.01);let sl,l;l=(2-s)*v;const lmin=(2-s)*vmin;return sl=s*vmin,sl/=lmin<=1?lmin:2-lmin,sl=sl||0,l/=2,[h,100*sl,100*l]},convert$2.hwb.rgb=function(hwb){const h=hwb[0]/360;let wh=hwb[1]/100,bl=hwb[2]/100;const ratio=wh+bl;let f;ratio>1&&(wh/=ratio,bl/=ratio);const i=Math.floor(6*h),v=1-bl;f=6*h-i,0!=(1&i)&&(f=1-f);const n=wh+f*(v-wh);let r,g,b;switch(i){default:case 6:case 0:r=v,g=n,b=wh;break;case 1:r=n,g=v,b=wh;break;case 2:r=wh,g=v,b=n;break;case 3:r=wh,g=n,b=v;break;case 4:r=n,g=wh,b=v;break;case 5:r=v,g=wh,b=n}return[255*r,255*g,255*b]},convert$2.cmyk.rgb=function(cmyk){const c=cmyk[0]/100,m=cmyk[1]/100,y=cmyk[2]/100,k=cmyk[3]/100;return[255*(1-Math.min(1,c*(1-k)+k)),255*(1-Math.min(1,m*(1-k)+k)),255*(1-Math.min(1,y*(1-k)+k))]},convert$2.xyz.rgb=function(xyz){const x=xyz[0]/100,y=xyz[1]/100,z=xyz[2]/100;let r,g,b;return r=3.2406*x+-1.5372*y+-.4986*z,g=-.9689*x+1.8758*y+.0415*z,b=.0557*x+-.204*y+1.057*z,r=r>.0031308?1.055*r**(1/2.4)-.055:12.92*r,g=g>.0031308?1.055*g**(1/2.4)-.055:12.92*g,b=b>.0031308?1.055*b**(1/2.4)-.055:12.92*b,r=Math.min(Math.max(0,r),1),g=Math.min(Math.max(0,g),1),b=Math.min(Math.max(0,b),1),[255*r,255*g,255*b]},convert$2.xyz.lab=function(xyz){let x=xyz[0],y=xyz[1],z=xyz[2];return x/=95.047,y/=100,z/=108.883,x=x>.008856?x**(1/3):7.787*x+16/116,y=y>.008856?y**(1/3):7.787*y+16/116,z=z>.008856?z**(1/3):7.787*z+16/116,[116*y-16,500*(x-y),200*(y-z)]},convert$2.lab.xyz=function(lab){let x,y,z;y=(lab[0]+16)/116,x=lab[1]/500+y,z=y-lab[2]/200;const y2=y**3,x2=x**3,z2=z**3;return y=y2>.008856?y2:(y-16/116)/7.787,x=x2>.008856?x2:(x-16/116)/7.787,z=z2>.008856?z2:(z-16/116)/7.787,x*=95.047,y*=100,z*=108.883,[x,y,z]},convert$2.lab.lch=function(lab){const l=lab[0],a=lab[1],b=lab[2];let h;return h=360*Math.atan2(b,a)/2/Math.PI,h<0&&(h+=360),[l,Math.sqrt(a*a+b*b),h]},convert$2.lch.lab=function(lch){const l=lch[0],c=lch[1],hr=lch[2]/360*2*Math.PI;return[l,c*Math.cos(hr),c*Math.sin(hr)]},convert$2.rgb.ansi16=function(args,saturation=null){const[r,g,b]=args;let value=null===saturation?convert$2.rgb.hsv(args)[2]:saturation;if(value=Math.round(value/50),0===value)return 30;let ansi=30+(Math.round(b/255)<<2|Math.round(g/255)<<1|Math.round(r/255));return 2===value&&(ansi+=60),ansi},convert$2.hsv.ansi16=function(args){return convert$2.rgb.ansi16(convert$2.hsv.rgb(args),args[2])},convert$2.rgb.ansi256=function(args){const r=args[0],g=args[1],b=args[2];return r===g&&g===b?r<8?16:r>248?231:Math.round((r-8)/247*24)+232:16+36*Math.round(r/255*5)+6*Math.round(g/255*5)+Math.round(b/255*5)},convert$2.ansi16.rgb=function(args){let color=args%10;if(0===color||7===color)return args>50&&(color+=3.5),color=color/10.5*255,[color,color,color];const mult=.5*(1+~~(args>50));return[(1&color)*mult*255,(color>>1&1)*mult*255,(color>>2&1)*mult*255]},convert$2.ansi256.rgb=function(args){if(args>=232){const c=10*(args-232)+8;return[c,c,c]}let rem;return args-=16,[Math.floor(args/36)/5*255,Math.floor((rem=args%36)/6)/5*255,rem%6/5*255]},convert$2.rgb.hex=function(args){const string=(((255&Math.round(args[0]))<<16)+((255&Math.round(args[1]))<<8)+(255&Math.round(args[2]))).toString(16).toUpperCase();return"000000".substring(string.length)+string},convert$2.hex.rgb=function(args){const match=args.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!match)return[0,0,0];let colorString=match[0];3===match[0].length&&(colorString=colorString.split("").map(char=>char+char).join(""));const integer=parseInt(colorString,16);return[integer>>16&255,integer>>8&255,255&integer]},convert$2.rgb.hcg=function(rgb){const r=rgb[0]/255,g=rgb[1]/255,b=rgb[2]/255,max=Math.max(Math.max(r,g),b),min=Math.min(Math.min(r,g),b),chroma=max-min;let grayscale,hue;return grayscale=chroma<1?min/(1-chroma):0,hue=chroma<=0?0:max===r?(g-b)/chroma%6:max===g?2+(b-r)/chroma:4+(r-g)/chroma,hue/=6,hue%=1,[360*hue,100*chroma,100*grayscale]},convert$2.hsl.hcg=function(hsl){const s=hsl[1]/100,l=hsl[2]/100,c=l<.5?2*s*l:2*s*(1-l);let f=0;return c<1&&(f=(l-.5*c)/(1-c)),[hsl[0],100*c,100*f]},convert$2.hsv.hcg=function(hsv){const s=hsv[1]/100,v=hsv[2]/100,c=s*v;let f=0;return c<1&&(f=(v-c)/(1-c)),[hsv[0],100*c,100*f]},convert$2.hcg.rgb=function(hcg){const h=hcg[0]/360,c=hcg[1]/100,g=hcg[2]/100;if(0===c)return[255*g,255*g,255*g];const pure=[0,0,0],hi=h%1*6,v=hi%1,w=1-v;let mg=0;switch(Math.floor(hi)){case 0:pure[0]=1,pure[1]=v,pure[2]=0;break;case 1:pure[0]=w,pure[1]=1,pure[2]=0;break;case 2:pure[0]=0,pure[1]=1,pure[2]=v;break;case 3:pure[0]=0,pure[1]=w,pure[2]=1;break;case 4:pure[0]=v,pure[1]=0,pure[2]=1;break;default:pure[0]=1,pure[1]=0,pure[2]=w}return mg=(1-c)*g,[255*(c*pure[0]+mg),255*(c*pure[1]+mg),255*(c*pure[2]+mg)]},convert$2.hcg.hsv=function(hcg){const c=hcg[1]/100,v=c+hcg[2]/100*(1-c);let f=0;return v>0&&(f=c/v),[hcg[0],100*f,100*v]},convert$2.hcg.hsl=function(hcg){const c=hcg[1]/100,l=hcg[2]/100*(1-c)+.5*c;let s=0;return l>0&&l<.5?s=c/(2*l):l>=.5&&l<1&&(s=c/(2*(1-l))),[hcg[0],100*s,100*l]},convert$2.hcg.hwb=function(hcg){const c=hcg[1]/100,v=c+hcg[2]/100*(1-c);return[hcg[0],100*(v-c),100*(1-v)]},convert$2.hwb.hcg=function(hwb){const w=hwb[1]/100,v=1-hwb[2]/100,c=v-w;let g=0;return c<1&&(g=(v-c)/(1-c)),[hwb[0],100*c,100*g]},convert$2.apple.rgb=function(apple){return[apple[0]/65535*255,apple[1]/65535*255,apple[2]/65535*255]},convert$2.rgb.apple=function(rgb){return[rgb[0]/255*65535,rgb[1]/255*65535,rgb[2]/255*65535]},convert$2.gray.rgb=function(args){return[args[0]/100*255,args[0]/100*255,args[0]/100*255]},convert$2.gray.hsl=function(args){return[0,0,args[0]]},convert$2.gray.hsv=convert$2.gray.hsl,convert$2.gray.hwb=function(gray){return[0,100,gray[0]]},convert$2.gray.cmyk=function(gray){return[0,0,0,gray[0]]},convert$2.gray.lab=function(gray){return[gray[0],0,0]},convert$2.gray.hex=function(gray){const val=255&Math.round(gray[0]/100*255),string=((val<<16)+(val<<8)+val).toString(16).toUpperCase();return"000000".substring(string.length)+string},convert$2.rgb.gray=function(rgb){return[(rgb[0]+rgb[1]+rgb[2])/3/255*100]};var route$1=function(fromModel){const graph=deriveBFS$1(fromModel),conversion={},models=Object.keys(graph);for(let len=models.length,i=0;i<len;i++){const toModel=models[i];null!==graph[toModel].parent&&(conversion[toModel]=wrapConversion$1(toModel,graph))}return conversion};const convert$3={},models$1=Object.keys(conversions$1);function wrapRaw$1(fn){const wrappedFn=function(...args){const arg0=args[0];return null==arg0?arg0:(arg0.length>1&&(args=arg0),fn(args))};return"conversion"in fn&&(wrappedFn.conversion=fn.conversion),wrappedFn}function wrapRounded$1(fn){const wrappedFn=function(...args){const arg0=args[0];if(null==arg0)return arg0;arg0.length>1&&(args=arg0);const result=fn(args);if("object"==typeof result)for(let len=result.length,i=0;i<len;i++)result[i]=Math.round(result[i]);return result};return"conversion"in fn&&(wrappedFn.conversion=fn.conversion),wrappedFn}models$1.forEach(fromModel=>{convert$3[fromModel]={},Object.defineProperty(convert$3[fromModel],"channels",{value:conversions$1[fromModel].channels}),Object.defineProperty(convert$3[fromModel],"labels",{value:conversions$1[fromModel].labels});const routes=route$1(fromModel);Object.keys(routes).forEach(toModel=>{const fn=routes[toModel];convert$3[fromModel][toModel]=wrapRounded$1(fn),convert$3[fromModel][toModel].raw=wrapRaw$1(fn)})});var colorConvert$1=convert$3,ansiStyles$1=createCommonjsModule((function(module){const wrapAnsi16=(fn,offset)=>(...args)=>`[${fn(...args)+offset}m`,wrapAnsi256=(fn,offset)=>(...args)=>{const code=fn(...args);return`[${38+offset};5;${code}m`},wrapAnsi16m=(fn,offset)=>(...args)=>{const rgb=fn(...args);return`[${38+offset};2;${rgb[0]};${rgb[1]};${rgb[2]}m`},ansi2ansi=n=>n,rgb2rgb=(r,g,b)=>[r,g,b],setLazyProperty=(object,property,get)=>{Object.defineProperty(object,property,{get:()=>{const value=get();return Object.defineProperty(object,property,{value:value,enumerable:!0,configurable:!0}),value},enumerable:!0,configurable:!0})};let colorConvert;const makeDynamicStyles=(wrap,targetSpace,identity,isBackground)=>{void 0===colorConvert&&(colorConvert=colorConvert$1);const offset=isBackground?10:0,styles={};for(const[sourceSpace,suite]of Object.entries(colorConvert)){const name="ansi16"===sourceSpace?"ansi":sourceSpace;sourceSpace===targetSpace?styles[name]=wrap(identity,offset):"object"==typeof suite&&(styles[name]=wrap(suite[targetSpace],offset))}return styles};Object.defineProperty(module,"exports",{enumerable:!0,get:function(){const codes=new Map,styles={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};styles.color.gray=styles.color.blackBright,styles.bgColor.bgGray=styles.bgColor.bgBlackBright,styles.color.grey=styles.color.blackBright,styles.bgColor.bgGrey=styles.bgColor.bgBlackBright;for(const[groupName,group]of Object.entries(styles)){for(const[styleName,style]of Object.entries(group))styles[styleName]={open:`[${style[0]}m`,close:`[${style[1]}m`},group[styleName]=styles[styleName],codes.set(style[0],style[1]);Object.defineProperty(styles,groupName,{value:group,enumerable:!1})}return Object.defineProperty(styles,"codes",{value:codes,enumerable:!1}),styles.color.close="[39m",styles.bgColor.close="[49m",setLazyProperty(styles.color,"ansi",()=>makeDynamicStyles(wrapAnsi16,"ansi16",ansi2ansi,!1)),setLazyProperty(styles.color,"ansi256",()=>makeDynamicStyles(wrapAnsi256,"ansi256",ansi2ansi,!1)),setLazyProperty(styles.color,"ansi16m",()=>makeDynamicStyles(wrapAnsi16m,"rgb",rgb2rgb,!1)),setLazyProperty(styles.bgColor,"ansi",()=>makeDynamicStyles(wrapAnsi16,"ansi16",ansi2ansi,!0)),setLazyProperty(styles.bgColor,"ansi256",()=>makeDynamicStyles(wrapAnsi256,"ansi256",ansi2ansi,!0)),setLazyProperty(styles.bgColor,"ansi16m",()=>makeDynamicStyles(wrapAnsi16m,"rgb",rgb2rgb,!0)),styles}})})),hasFlag=(flag,argv=process.argv)=>{const prefix=flag.startsWith("-")?"":1===flag.length?"-":"--",position=argv.indexOf(prefix+flag),terminatorPosition=argv.indexOf("--");return-1!==position&&(-1===terminatorPosition||position<terminatorPosition)};const{env:env}=process;let forceColor;function translateLevel(level){return 0!==level&&{level:level,hasBasic:!0,has256:level>=2,has16m:level>=3}}function supportsColor(haveStream,streamIsTTY){if(0===forceColor)return 0;if(hasFlag("color=16m")||hasFlag("color=full")||hasFlag("color=truecolor"))return 3;if(hasFlag("color=256"))return 2;if(haveStream&&!streamIsTTY&&void 0===forceColor)return 0;const min=forceColor||0;if("dumb"===env.TERM)return min;if("win32"===process.platform){const osRelease=os.release().split(".");return Number(osRelease[0])>=10&&Number(osRelease[2])>=10586?Number(osRelease[2])>=14931?3:2:1}if("CI"in env)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some(sign=>sign in env)||"codeship"===env.CI_NAME?1:min;if("TEAMCITY_VERSION"in env)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(env.TEAMCITY_VERSION)?1:0;if("GITHUB_ACTIONS"in env)return 1;if("truecolor"===env.COLORTERM)return 3;if("TERM_PROGRAM"in env){const version=parseInt((env.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(env.TERM_PROGRAM){case"iTerm.app":return version>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(env.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(env.TERM)||"COLORTERM"in env?1:min}function getSupportLevel(stream){return translateLevel(supportsColor(stream,stream&&stream.isTTY))}hasFlag("no-color")||hasFlag("no-colors")||hasFlag("color=false")||hasFlag("color=never")?forceColor=0:(hasFlag("color")||hasFlag("colors")||hasFlag("color=true")||hasFlag("color=always"))&&(forceColor=1),"FORCE_COLOR"in env&&(forceColor="true"===env.FORCE_COLOR?1:"false"===env.FORCE_COLOR?0:0===env.FORCE_COLOR.length?1:Math.min(parseInt(env.FORCE_COLOR,10),3));var supportsColor_1={supportsColor:getSupportLevel,stdout:translateLevel(supportsColor(!0,tty.isatty(1))),stderr:translateLevel(supportsColor(!0,tty.isatty(2)))};const stringReplaceAll=(string,substring,replacer)=>{let index=string.indexOf(substring);if(-1===index)return string;const substringLength=substring.length;let endIndex=0,returnValue="";do{returnValue+=string.substr(endIndex,index-endIndex)+substring+replacer,endIndex=index+substringLength,index=string.indexOf(substring,endIndex)}while(-1!==index);return returnValue+=string.substr(endIndex),returnValue},stringEncaseCRLFWithFirstIndex=(string,prefix,postfix,index)=>{let endIndex=0,returnValue="";do{const gotCR="\r"===string[index-1];returnValue+=string.substr(endIndex,(gotCR?index-1:index)-endIndex)+prefix+(gotCR?"\r\n":"\n")+postfix,endIndex=index+1,index=string.indexOf("\n",endIndex)}while(-1!==index);return returnValue+=string.substr(endIndex),returnValue};var util={stringReplaceAll:stringReplaceAll,stringEncaseCRLFWithFirstIndex:stringEncaseCRLFWithFirstIndex};const TEMPLATE_REGEX=/(?:\\(u(?:[a-f\d]{4}|\{[a-f\d]{1,6}\})|x[a-f\d]{2}|.))|(?:\{(~)?(\w+(?:\([^)]*\))?(?:\.\w+(?:\([^)]*\))?)*)(?:[ \t]|(?=\r?\n)))|(\})|((?:.|[\r\n\f])+?)/gi,STYLE_REGEX=/(?:^|\.)(\w+)(?:\(([^)]*)\))?/g,STRING_REGEX=/^(['"])((?:\\.|(?!\1)[^\\])*)\1$/,ESCAPE_REGEX=/\\(u(?:[a-f\d]{4}|{[a-f\d]{1,6}})|x[a-f\d]{2}|.)|([^\\])/gi,ESCAPES$1=new Map([["n","\n"],["r","\r"],["t","\t"],["b","\b"],["f","\f"],["v","\v"],["0","\0"],["\\","\\"],["e",""],["a",""]]);function unescape(c){const u="u"===c[0],bracket="{"===c[1];return u&&!bracket&&5===c.length||"x"===c[0]&&3===c.length?String.fromCharCode(parseInt(c.slice(1),16)):u&&bracket?String.fromCodePoint(parseInt(c.slice(2,-1),16)):ESCAPES$1.get(c)||c}function parseArguments(name,arguments_){const results=[],chunks=arguments_.trim().split(/\s*,\s*/g);let matches;for(const chunk of chunks){const number=Number(chunk);if(Number.isNaN(number)){if(!(matches=chunk.match(STRING_REGEX)))throw new Error(`Invalid Chalk template style argument: ${chunk} (in style '${name}')`);results.push(matches[2].replace(ESCAPE_REGEX,(m,escape,character)=>escape?unescape(escape):character))}else results.push(number)}return results}function parseStyle(style){STYLE_REGEX.lastIndex=0;const results=[];let matches;for(;null!==(matches=STYLE_REGEX.exec(style));){const name=matches[1];if(matches[2]){const args=parseArguments(name,matches[2]);results.push([name].concat(args))}else results.push([name])}return results}function buildStyle(chalk,styles){const enabled={};for(const layer of styles)for(const style of layer.styles)enabled[style[0]]=layer.inverse?null:style.slice(1);let current=chalk;for(const[styleName,styles]of Object.entries(enabled))if(Array.isArray(styles)){if(!(styleName in current))throw new Error(`Unknown Chalk style: ${styleName}`);current=styles.length>0?current[styleName](...styles):current[styleName]}return current}var templates=(chalk,temporary)=>{const styles=[],chunks=[];let chunk=[];if(temporary.replace(TEMPLATE_REGEX,(m,escapeCharacter,inverse,style,close,character)=>{if(escapeCharacter)chunk.push(unescape(escapeCharacter));else if(style){const string=chunk.join("");chunk=[],chunks.push(0===styles.length?string:buildStyle(chalk,styles)(string)),styles.push({inverse:inverse,styles:parseStyle(style)})}else if(close){if(0===styles.length)throw new Error("Found extraneous } in Chalk template literal");chunks.push(buildStyle(chalk,styles)(chunk.join(""))),chunk=[],styles.pop()}else chunk.push(character)}),chunks.push(chunk.join("")),styles.length>0){const errMessage=`Chalk template literal is missing ${styles.length} closing bracket${1===styles.length?"":"s"} (\`}\`)`;throw new Error(errMessage)}return chunks.join("")};const{stdout:stdoutColor,stderr:stderrColor}=supportsColor_1,{stringReplaceAll:stringReplaceAll$1,stringEncaseCRLFWithFirstIndex:stringEncaseCRLFWithFirstIndex$1}=util,levelMapping=["ansi","ansi","ansi256","ansi16m"],styles=Object.create(null),applyOptions=(object,options={})=>{if(options.level&&!(Number.isInteger(options.level)&&options.level>=0&&options.level<=3))throw new Error("The `level` option should be an integer from 0 to 3");const colorLevel=stdoutColor?stdoutColor.level:0;object.level=void 0===options.level?colorLevel:options.level};class ChalkClass{constructor(options){return chalkFactory(options)}}const chalkFactory=options=>{const chalk={};return applyOptions(chalk,options),chalk.template=(...arguments_)=>chalkTag(chalk.template,...arguments_),Object.setPrototypeOf(chalk,Chalk.prototype),Object.setPrototypeOf(chalk.template,chalk),chalk.template.constructor=()=>{throw new Error("`chalk.constructor()` is deprecated. Use `new chalk.Instance()` instead.")},chalk.template.Instance=ChalkClass,chalk.template};function Chalk(options){return chalkFactory(options)}for(const[styleName,style]of Object.entries(ansiStyles$1))styles[styleName]={get(){const builder=createBuilder(this,createStyler(style.open,style.close,this._styler),this._isEmpty);return Object.defineProperty(this,styleName,{value:builder}),builder}};styles.visible={get(){const builder=createBuilder(this,this._styler,!0);return Object.defineProperty(this,"visible",{value:builder}),builder}};const usedModels=["rgb","hex","keyword","hsl","hsv","hwb","ansi","ansi256"];for(const model of usedModels)styles[model]={get(){const{level:level}=this;return function(...arguments_){const styler=createStyler(ansiStyles$1.color[levelMapping[level]][model](...arguments_),ansiStyles$1.color.close,this._styler);return createBuilder(this,styler,this._isEmpty)}}};for(const model of usedModels){styles["bg"+model[0].toUpperCase()+model.slice(1)]={get(){const{level:level}=this;return function(...arguments_){const styler=createStyler(ansiStyles$1.bgColor[levelMapping[level]][model](...arguments_),ansiStyles$1.bgColor.close,this._styler);return createBuilder(this,styler,this._isEmpty)}}}}const proto=Object.defineProperties(()=>{},{...styles,level:{enumerable:!0,get(){return this._generator.level},set(level){this._generator.level=level}}}),createStyler=(open,close,parent)=>{let openAll,closeAll;return void 0===parent?(openAll=open,closeAll=close):(openAll=parent.openAll+open,closeAll=close+parent.closeAll),{open:open,close:close,openAll:openAll,closeAll:closeAll,parent:parent}},createBuilder=(self,_styler,_isEmpty)=>{const builder=(...arguments_)=>applyStyle(builder,1===arguments_.length?""+arguments_[0]:arguments_.join(" "));return Object.setPrototypeOf(builder,proto),builder._generator=self,builder._styler=_styler,builder._isEmpty=_isEmpty,builder},applyStyle=(self,string)=>{if(self.level<=0||!string)return self._isEmpty?"":string;let styler=self._styler;if(void 0===styler)return string;const{openAll:openAll,closeAll:closeAll}=styler;if(-1!==string.indexOf(""))for(;void 0!==styler;)string=stringReplaceAll$1(string,styler.close,styler.open),styler=styler.parent;const lfIndex=string.indexOf("\n");return-1!==lfIndex&&(string=stringEncaseCRLFWithFirstIndex$1(string,closeAll,openAll,lfIndex)),openAll+string+closeAll};let template;const chalkTag=(chalk,...strings)=>{const[firstString]=strings;if(!Array.isArray(firstString))return strings.join(" ");const arguments_=strings.slice(1),parts=[firstString.raw[0]];for(let i=1;i<firstString.length;i++)parts.push(String(arguments_[i-1]).replace(/[{}\\]/g,"\\$&"),String(firstString.raw[i]));return void 0===template&&(template=templates),template(chalk,parts.join(""))};Object.defineProperties(Chalk.prototype,styles);const chalk=Chalk();chalk.supportsColor=stdoutColor,chalk.stderr=Chalk({level:stderrColor?stderrColor.level:0}),chalk.stderr.supportsColor=stderrColor;var source=chalk;class BaseMvnxError extends Error{constructor(code,context,cause){super(),this.code=code,this.context=context||{},this.cause=cause}toString(){const chalk=source,EOL=os.EOL;let output=chalk.redBright("ERROR")+" – "+chalk.redBright.bold(this.code)+EOL;return this.details&&(output+=chalk.bold("Details")+EOL+this.details+EOL+EOL),this.solution&&(output+=chalk.bold("Possible Solution")+EOL+this.solution+EOL+EOL),output+=chalk.bold("More information at: ")+this.link,this.cause&&(output+=EOL+EOL+chalk.bold("Caused By")+EOL+this.cause.stack),output}get message(){return this.details}addToContext(obj){Object.assign(this.context,obj)}get link(){return`https://github.com/mvnx/mvnx/FIXME/${this.code}`}get details(){}get solution(){}}var BaseMvnxError_1=BaseMvnxError;class JavaNotFoundError extends BaseMvnxError_1{constructor(context,cause){super("EJAVANOTFOUNDERROR",context,cause)}get details(){return`Failed to run Java executable:\n\n  ${this.context.executable}`}get solution(){return"Check if the JRE is installed and the java executable is available on the path."}}var JavaNotFoundError_1=JavaNotFoundError;const{execSync:execSync}=child_process;function executeJar(options){const command=`${options.javaExecutable} -jar ${options.jar} ${options.arguments.join(" ")}`;log_1(`Executing JAR\n  ${command}`);const bareJavaExecutable=command.split(" ").shift();try{execSync(`${bareJavaExecutable} --version`,{stdio:"ignore"})}catch(err){throw new JavaNotFoundError_1({executable:bareJavaExecutable})}try{execSync(command,{stdio:"inherit"})}catch(err){}}var java={executeJar:executeJar};const{promisify:promisify$2}=util$1,optsArg=opts=>{if(opts)if("object"==typeof opts)opts={mode:511&~process.umask(),fs:fs,...opts};else if("number"==typeof opts)opts={mode:opts,fs:fs};else{if("string"!=typeof opts)throw new TypeError("invalid options argument");opts={mode:parseInt(opts,8),fs:fs}}else opts={mode:511&~process.umask(),fs:fs};return opts.mkdir=opts.mkdir||opts.fs.mkdir||fs.mkdir,opts.mkdirAsync=promisify$2(opts.mkdir),opts.stat=opts.stat||opts.fs.stat||fs.stat,opts.statAsync=promisify$2(opts.stat),opts.statSync=opts.statSync||opts.fs.statSync||fs.statSync,opts.mkdirSync=opts.mkdirSync||opts.fs.mkdirSync||fs.mkdirSync,opts};var optsArg_1=optsArg;const platform=process.env.__TESTING_MKDIRP_PLATFORM__||process.platform,{resolve:resolve$1,parse:parse$1}=path,pathArg=path=>{if(/\0/.test(path))throw Object.assign(new TypeError("path must be a string without null bytes"),{path:path,code:"ERR_INVALID_ARG_VALUE"});if(path=resolve$1(path),"win32"===platform){const badWinChars=/[*|"<>?:]/,{root:root}=parse$1(path);if(badWinChars.test(path.substr(root.length)))throw Object.assign(new Error("Illegal characters in path."),{path:path,code:"EINVAL"})}return path};var pathArg_1=pathArg;const{dirname:dirname$1}=path,findMade=(opts,parent,path)=>path===parent?Promise.resolve():opts.statAsync(parent).then(st=>st.isDirectory()?path:void 0,er=>"ENOENT"===er.code?findMade(opts,dirname$1(parent),parent):void 0),findMadeSync=(opts,parent,path)=>{if(path!==parent)try{return opts.statSync(parent).isDirectory()?path:void 0}catch(er){return"ENOENT"===er.code?findMadeSync(opts,dirname$1(parent),parent):void 0}};var findMade_1={findMade:findMade,findMadeSync:findMadeSync};const{dirname:dirname$2}=path,mkdirpManual=(path,opts,made)=>{opts.recursive=!1;const parent=dirname$2(path);return parent===path?opts.mkdirAsync(path,opts).catch(er=>{if("EISDIR"!==er.code)throw er}):opts.mkdirAsync(path,opts).then(()=>made||path,er=>{if("ENOENT"===er.code)return mkdirpManual(parent,opts).then(made=>mkdirpManual(path,opts,made));if("EEXIST"!==er.code&&"EROFS"!==er.code)throw er;return opts.statAsync(path).then(st=>{if(st.isDirectory())return made;throw er},()=>{throw er})})},mkdirpManualSync=(path,opts,made)=>{const parent=dirname$2(path);if(opts.recursive=!1,parent===path)try{return opts.mkdirSync(path,opts)}catch(er){if("EISDIR"!==er.code)throw er;return}try{return opts.mkdirSync(path,opts),made||path}catch(er){if("ENOENT"===er.code)return mkdirpManualSync(path,opts,mkdirpManualSync(parent,opts,made));if("EEXIST"!==er.code&&"EROFS"!==er.code)throw er;try{if(!opts.statSync(path).isDirectory())throw er}catch(_){throw er}}};var mkdirpManual_1={mkdirpManual:mkdirpManual,mkdirpManualSync:mkdirpManualSync};const{dirname:dirname$3}=path,{findMade:findMade$1,findMadeSync:findMadeSync$1}=findMade_1,{mkdirpManual:mkdirpManual$1,mkdirpManualSync:mkdirpManualSync$1}=mkdirpManual_1,mkdirpNative=(path,opts)=>(opts.recursive=!0,dirname$3(path)===path?opts.mkdirAsync(path,opts):findMade$1(opts,path).then(made=>opts.mkdirAsync(path,opts).then(()=>made).catch(er=>{if("ENOENT"===er.code)return mkdirpManual$1(path,opts);throw er}))),mkdirpNativeSync=(path,opts)=>{if(opts.recursive=!0,dirname$3(path)===path)return opts.mkdirSync(path,opts);const made=findMadeSync$1(opts,path);try{return opts.mkdirSync(path,opts),made}catch(er){if("ENOENT"===er.code)return mkdirpManualSync$1(path,opts);throw er}};var mkdirpNative_1={mkdirpNative:mkdirpNative,mkdirpNativeSync:mkdirpNativeSync};const version=process.env.__TESTING_MKDIRP_NODE_VERSION__||process.version,versArr=version.replace(/^v/,"").split("."),hasNative=+versArr[0]>10||10==+versArr[0]&&+versArr[1]>=12,useNative=hasNative?opts=>opts.mkdir===fs.mkdir:()=>!1,useNativeSync=hasNative?opts=>opts.mkdirSync===fs.mkdirSync:()=>!1;var useNative_1={useNative:useNative,useNativeSync:useNativeSync};const{mkdirpNative:mkdirpNative$1,mkdirpNativeSync:mkdirpNativeSync$1}=mkdirpNative_1,{mkdirpManual:mkdirpManual$2,mkdirpManualSync:mkdirpManualSync$2}=mkdirpManual_1,{useNative:useNative$1,useNativeSync:useNativeSync$1}=useNative_1,mkdirp=(path,opts)=>(path=pathArg_1(path),opts=optsArg_1(opts),useNative$1(opts)?mkdirpNative$1(path,opts):mkdirpManual$2(path,opts)),mkdirpSync=(path,opts)=>(path=pathArg_1(path),opts=optsArg_1(opts),useNativeSync$1(opts)?mkdirpNativeSync$1(path,opts):mkdirpManualSync$2(path,opts));mkdirp.sync=mkdirpSync,mkdirp.native=(path,opts)=>mkdirpNative$1(pathArg_1(path),optsArg_1(opts)),mkdirp.manual=(path,opts)=>mkdirpManual$2(pathArg_1(path),optsArg_1(opts)),mkdirp.nativeSync=(path,opts)=>mkdirpNativeSync$1(pathArg_1(path),optsArg_1(opts)),mkdirp.manualSync=(path,opts)=>mkdirpManualSync$2(pathArg_1(path),optsArg_1(opts));var mkdirp_1=mkdirp,filename_1=createCommonjsModule((function(module,exports){var __importDefault=commonjsGlobal&&commonjsGlobal.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const util_1=__importDefault(util$1);exports.default=function(artifact){const extension=artifact.extension||"jar";let version=function(artifact){let suffix="";return artifact.isSnapShot&&(suffix=null!=artifact.snapShotVersion?`-${artifact.snapShotVersion}`:"-SNAPSHOT"),`${artifact.version}${suffix}`}(artifact);return artifact.classifier?util_1.default.format("%s-%s-%s.%s",artifact.artifactId,version,artifact.classifier,extension):util_1.default.format("%s-%s.%s",artifact.artifactId,version,extension)}}));unwrapExports(filename_1);var parse$2=createCommonjsModule((function(module,exports){Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(name){const parts=name.split(":");if(parts.length>=3){const artifact={groupId:parts[0],artifactId:parts[1],version:parts[parts.length-1]};return parts.length>3&&(artifact.extension=parts[2]),parts.length>4&&(artifact.classifier=parts[3]),artifact.version.endsWith("-SNAPSHOT")&&(artifact.isSnapShot=!0,artifact.version=artifact.version.substr(0,artifact.version.indexOf("-SNAPSHOT"))),artifact}throw new Error("not a maven package name. try <group>:<artifact>:<version>")}}));unwrapExports(parse$2);const Readable=Stream.Readable,BUFFER=Symbol("buffer"),TYPE=Symbol("type");class Blob{constructor(){this[TYPE]="";const blobParts=arguments[0],options=arguments[1],buffers=[];let size=0;if(blobParts){const a=blobParts,length=Number(a.length);for(let i=0;i<length;i++){const element=a[i];let buffer;buffer=element instanceof Buffer?element:ArrayBuffer.isView(element)?Buffer.from(element.buffer,element.byteOffset,element.byteLength):element instanceof ArrayBuffer?Buffer.from(element):element instanceof Blob?element[BUFFER]:Buffer.from("string"==typeof element?element:String(element)),size+=buffer.length,buffers.push(buffer)}}this[BUFFER]=Buffer.concat(buffers);let type=options&&void 0!==options.type&&String(options.type).toLowerCase();type&&!/[^\u0020-\u007E]/.test(type)&&(this[TYPE]=type)}get size(){return this[BUFFER].length}get type(){return this[TYPE]}text(){return Promise.resolve(this[BUFFER].toString())}arrayBuffer(){const buf=this[BUFFER],ab=buf.buffer.slice(buf.byteOffset,buf.byteOffset+buf.byteLength);return Promise.resolve(ab)}stream(){const readable=new Readable;return readable._read=function(){},readable.push(this[BUFFER]),readable.push(null),readable}toString(){return"[object Blob]"}slice(){const size=this.size,start=arguments[0],end=arguments[1];let relativeStart,relativeEnd;relativeStart=void 0===start?0:start<0?Math.max(size+start,0):Math.min(start,size),relativeEnd=void 0===end?size:end<0?Math.max(size+end,0):Math.min(end,size);const span=Math.max(relativeEnd-relativeStart,0),slicedBuffer=this[BUFFER].slice(relativeStart,relativeStart+span),blob=new Blob([],{type:arguments[2]});return blob[BUFFER]=slicedBuffer,blob}}function FetchError(message,type,systemError){Error.call(this,message),this.message=message,this.type=type,systemError&&(this.code=this.errno=systemError.code),Error.captureStackTrace(this,this.constructor)}let convert$4;Object.defineProperties(Blob.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}}),Object.defineProperty(Blob.prototype,Symbol.toStringTag,{value:"Blob",writable:!1,enumerable:!1,configurable:!0}),FetchError.prototype=Object.create(Error.prototype),FetchError.prototype.constructor=FetchError,FetchError.prototype.name="FetchError";try{convert$4=require("encoding").convert}catch(e){}const INTERNALS=Symbol("Body internals"),PassThrough=Stream.PassThrough;function Body(body){var _this=this,_ref=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_ref$size=_ref.size;let size=void 0===_ref$size?0:_ref$size;var _ref$timeout=_ref.timeout;let timeout=void 0===_ref$timeout?0:_ref$timeout;null==body?body=null:isURLSearchParams(body)?body=Buffer.from(body.toString()):isBlob(body)||Buffer.isBuffer(body)||("[object ArrayBuffer]"===Object.prototype.toString.call(body)?body=Buffer.from(body):ArrayBuffer.isView(body)?body=Buffer.from(body.buffer,body.byteOffset,body.byteLength):body instanceof Stream||(body=Buffer.from(String(body)))),this[INTERNALS]={body:body,disturbed:!1,error:null},this.size=size,this.timeout=timeout,body instanceof Stream&&body.on("error",(function(err){const error="AbortError"===err.name?err:new FetchError(`Invalid response body while trying to fetch ${_this.url}: ${err.message}`,"system",err);_this[INTERNALS].error=error}))}function consumeBody(){var _this4=this;if(this[INTERNALS].disturbed)return Body.Promise.reject(new TypeError(`body used already for: ${this.url}`));if(this[INTERNALS].disturbed=!0,this[INTERNALS].error)return Body.Promise.reject(this[INTERNALS].error);let body=this.body;if(null===body)return Body.Promise.resolve(Buffer.alloc(0));if(isBlob(body)&&(body=body.stream()),Buffer.isBuffer(body))return Body.Promise.resolve(body);if(!(body instanceof Stream))return Body.Promise.resolve(Buffer.alloc(0));let accum=[],accumBytes=0,abort=!1;return new Body.Promise((function(resolve,reject){let resTimeout;_this4.timeout&&(resTimeout=setTimeout((function(){abort=!0,reject(new FetchError(`Response timeout while trying to fetch ${_this4.url} (over ${_this4.timeout}ms)`,"body-timeout"))}),_this4.timeout)),body.on("error",(function(err){"AbortError"===err.name?(abort=!0,reject(err)):reject(new FetchError(`Invalid response body while trying to fetch ${_this4.url}: ${err.message}`,"system",err))})),body.on("data",(function(chunk){if(!abort&&null!==chunk){if(_this4.size&&accumBytes+chunk.length>_this4.size)return abort=!0,void reject(new FetchError(`content size at ${_this4.url} over limit: ${_this4.size}`,"max-size"));accumBytes+=chunk.length,accum.push(chunk)}})),body.on("end",(function(){if(!abort){clearTimeout(resTimeout);try{resolve(Buffer.concat(accum,accumBytes))}catch(err){reject(new FetchError(`Could not create Buffer from response body for ${_this4.url}: ${err.message}`,"system",err))}}}))}))}function convertBody(buffer,headers){if("function"!=typeof convert$4)throw new Error("The package `encoding` must be installed to use the textConverted() function");const ct=headers.get("content-type");let res,str,charset="utf-8";return ct&&(res=/charset=([^;]*)/i.exec(ct)),str=buffer.slice(0,1024).toString(),!res&&str&&(res=/<meta.+?charset=(['"])(.+?)\1/i.exec(str)),!res&&str&&(res=/<meta[\s]+?http-equiv=(['"])content-type\1[\s]+?content=(['"])(.+?)\2/i.exec(str),res&&(res=/charset=(.*)/i.exec(res.pop()))),!res&&str&&(res=/<\?xml.+?encoding=(['"])(.+?)\1/i.exec(str)),res&&(charset=res.pop(),"gb2312"!==charset&&"gbk"!==charset||(charset="gb18030")),convert$4(buffer,"UTF-8",charset).toString()}function isURLSearchParams(obj){return"object"==typeof obj&&"function"==typeof obj.append&&"function"==typeof obj.delete&&"function"==typeof obj.get&&"function"==typeof obj.getAll&&"function"==typeof obj.has&&"function"==typeof obj.set&&("URLSearchParams"===obj.constructor.name||"[object URLSearchParams]"===Object.prototype.toString.call(obj)||"function"==typeof obj.sort)}function isBlob(obj){return"object"==typeof obj&&"function"==typeof obj.arrayBuffer&&"string"==typeof obj.type&&"function"==typeof obj.stream&&"function"==typeof obj.constructor&&"string"==typeof obj.constructor.name&&/^(Blob|File)$/.test(obj.constructor.name)&&/^(Blob|File)$/.test(obj[Symbol.toStringTag])}function clone(instance){let p1,p2,body=instance.body;if(instance.bodyUsed)throw new Error("cannot clone body after it is used");return body instanceof Stream&&"function"!=typeof body.getBoundary&&(p1=new PassThrough,p2=new PassThrough,body.pipe(p1),body.pipe(p2),instance[INTERNALS].body=p1,body=p2),body}function extractContentType(body){return null===body?null:"string"==typeof body?"text/plain;charset=UTF-8":isURLSearchParams(body)?"application/x-www-form-urlencoded;charset=UTF-8":isBlob(body)?body.type||null:Buffer.isBuffer(body)||"[object ArrayBuffer]"===Object.prototype.toString.call(body)||ArrayBuffer.isView(body)?null:"function"==typeof body.getBoundary?`multipart/form-data;boundary=${body.getBoundary()}`:body instanceof Stream?null:"text/plain;charset=UTF-8"}function getTotalBytes(instance){const body=instance.body;return null===body?0:isBlob(body)?body.size:Buffer.isBuffer(body)?body.length:body&&"function"==typeof body.getLengthSync&&(body._lengthRetrievers&&0==body._lengthRetrievers.length||body.hasKnownLength&&body.hasKnownLength())?body.getLengthSync():null}function writeToStream(dest,instance){const body=instance.body;null===body?dest.end():isBlob(body)?body.stream().pipe(dest):Buffer.isBuffer(body)?(dest.write(body),dest.end()):body.pipe(dest)}Body.prototype={get body(){return this[INTERNALS].body},get bodyUsed(){return this[INTERNALS].disturbed},arrayBuffer(){return consumeBody.call(this).then((function(buf){return buf.buffer.slice(buf.byteOffset,buf.byteOffset+buf.byteLength)}))},blob(){let ct=this.headers&&this.headers.get("content-type")||"";return consumeBody.call(this).then((function(buf){return Object.assign(new Blob([],{type:ct.toLowerCase()}),{[BUFFER]:buf})}))},json(){var _this2=this;return consumeBody.call(this).then((function(buffer){try{return JSON.parse(buffer.toString())}catch(err){return Body.Promise.reject(new FetchError(`invalid json response body at ${_this2.url} reason: ${err.message}`,"invalid-json"))}}))},text(){return consumeBody.call(this).then((function(buffer){return buffer.toString()}))},buffer(){return consumeBody.call(this)},textConverted(){var _this3=this;return consumeBody.call(this).then((function(buffer){return convertBody(buffer,_this3.headers)}))}},Object.defineProperties(Body.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0}}),Body.mixIn=function(proto){for(const name of Object.getOwnPropertyNames(Body.prototype))if(!(name in proto)){const desc=Object.getOwnPropertyDescriptor(Body.prototype,name);Object.defineProperty(proto,name,desc)}},Body.Promise=global.Promise;const invalidTokenRegex=/[^\^_`a-zA-Z\-0-9!#$%&'*+.|~]/,invalidHeaderCharRegex=/[^\t\x20-\x7e\x80-\xff]/;function validateName(name){if(name=`${name}`,invalidTokenRegex.test(name)||""===name)throw new TypeError(`${name} is not a legal HTTP header name`)}function validateValue(value){if(value=`${value}`,invalidHeaderCharRegex.test(value))throw new TypeError(`${value} is not a legal HTTP header value`)}function find(map,name){name=name.toLowerCase();for(const key in map)if(key.toLowerCase()===name)return key}const MAP=Symbol("map");class Headers{constructor(){let init=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(this[MAP]=Object.create(null),init instanceof Headers){const rawHeaders=init.raw(),headerNames=Object.keys(rawHeaders);for(const headerName of headerNames)for(const value of rawHeaders[headerName])this.append(headerName,value)}else if(null==init);else{if("object"!=typeof init)throw new TypeError("Provided initializer must be an object");{const method=init[Symbol.iterator];if(null!=method){if("function"!=typeof method)throw new TypeError("Header pairs must be iterable");const pairs=[];for(const pair of init){if("object"!=typeof pair||"function"!=typeof pair[Symbol.iterator])throw new TypeError("Each header pair must be iterable");pairs.push(Array.from(pair))}for(const pair of pairs){if(2!==pair.length)throw new TypeError("Each header pair must be a name/value tuple");this.append(pair[0],pair[1])}}else for(const key of Object.keys(init)){const value=init[key];this.append(key,value)}}}}get(name){validateName(name=`${name}`);const key=find(this[MAP],name);return void 0===key?null:this[MAP][key].join(", ")}forEach(callback){let thisArg=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,pairs=getHeaders(this),i=0;for(;i<pairs.length;){var _pairs$i=pairs[i];const name=_pairs$i[0],value=_pairs$i[1];callback.call(thisArg,value,name,this),pairs=getHeaders(this),i++}}set(name,value){value=`${value}`,validateName(name=`${name}`),validateValue(value);const key=find(this[MAP],name);this[MAP][void 0!==key?key:name]=[value]}append(name,value){value=`${value}`,validateName(name=`${name}`),validateValue(value);const key=find(this[MAP],name);void 0!==key?this[MAP][key].push(value):this[MAP][name]=[value]}has(name){return validateName(name=`${name}`),void 0!==find(this[MAP],name)}delete(name){validateName(name=`${name}`);const key=find(this[MAP],name);void 0!==key&&delete this[MAP][key]}raw(){return this[MAP]}keys(){return createHeadersIterator(this,"key")}values(){return createHeadersIterator(this,"value")}[Symbol.iterator](){return createHeadersIterator(this,"key+value")}}function getHeaders(headers){let kind=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"key+value";const keys=Object.keys(headers[MAP]).sort();return keys.map("key"===kind?function(k){return k.toLowerCase()}:"value"===kind?function(k){return headers[MAP][k].join(", ")}:function(k){return[k.toLowerCase(),headers[MAP][k].join(", ")]})}Headers.prototype.entries=Headers.prototype[Symbol.iterator],Object.defineProperty(Headers.prototype,Symbol.toStringTag,{value:"Headers",writable:!1,enumerable:!1,configurable:!0}),Object.defineProperties(Headers.prototype,{get:{enumerable:!0},forEach:{enumerable:!0},set:{enumerable:!0},append:{enumerable:!0},has:{enumerable:!0},delete:{enumerable:!0},keys:{enumerable:!0},values:{enumerable:!0},entries:{enumerable:!0}});const INTERNAL=Symbol("internal");function createHeadersIterator(target,kind){const iterator=Object.create(HeadersIteratorPrototype);return iterator[INTERNAL]={target:target,kind:kind,index:0},iterator}const HeadersIteratorPrototype=Object.setPrototypeOf({next(){if(!this||Object.getPrototypeOf(this)!==HeadersIteratorPrototype)throw new TypeError("Value of `this` is not a HeadersIterator");var _INTERNAL=this[INTERNAL];const target=_INTERNAL.target,kind=_INTERNAL.kind,index=_INTERNAL.index,values=getHeaders(target,kind);return index>=values.length?{value:void 0,done:!0}:(this[INTERNAL].index=index+1,{value:values[index],done:!1})}},Object.getPrototypeOf(Object.getPrototypeOf([][Symbol.iterator]())));function exportNodeCompatibleHeaders(headers){const obj=Object.assign({__proto__:null},headers[MAP]),hostHeaderKey=find(headers[MAP],"Host");return void 0!==hostHeaderKey&&(obj[hostHeaderKey]=obj[hostHeaderKey][0]),obj}function createHeadersLenient(obj){const headers=new Headers;for(const name of Object.keys(obj))if(!invalidTokenRegex.test(name))if(Array.isArray(obj[name]))for(const val of obj[name])invalidHeaderCharRegex.test(val)||(void 0===headers[MAP][name]?headers[MAP][name]=[val]:headers[MAP][name].push(val));else invalidHeaderCharRegex.test(obj[name])||(headers[MAP][name]=[obj[name]]);return headers}Object.defineProperty(HeadersIteratorPrototype,Symbol.toStringTag,{value:"HeadersIterator",writable:!1,enumerable:!1,configurable:!0});const INTERNALS$1=Symbol("Response internals"),STATUS_CODES=http.STATUS_CODES;class Response{constructor(){let body=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,opts=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Body.call(this,body,opts);const status=opts.status||200,headers=new Headers(opts.headers);if(null!=body&&!headers.has("Content-Type")){const contentType=extractContentType(body);contentType&&headers.append("Content-Type",contentType)}this[INTERNALS$1]={url:opts.url,status:status,statusText:opts.statusText||STATUS_CODES[status],headers:headers,counter:opts.counter}}get url(){return this[INTERNALS$1].url||""}get status(){return this[INTERNALS$1].status}get ok(){return this[INTERNALS$1].status>=200&&this[INTERNALS$1].status<300}get redirected(){return this[INTERNALS$1].counter>0}get statusText(){return this[INTERNALS$1].statusText}get headers(){return this[INTERNALS$1].headers}clone(){return new Response(clone(this),{url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected})}}Body.mixIn(Response.prototype),Object.defineProperties(Response.prototype,{url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}}),Object.defineProperty(Response.prototype,Symbol.toStringTag,{value:"Response",writable:!1,enumerable:!1,configurable:!0});const INTERNALS$2=Symbol("Request internals"),parse_url=Url.parse,format_url=Url.format,streamDestructionSupported="destroy"in Stream.Readable.prototype;function isRequest(input){return"object"==typeof input&&"object"==typeof input[INTERNALS$2]}function isAbortSignal(signal){const proto=signal&&"object"==typeof signal&&Object.getPrototypeOf(signal);return!(!proto||"AbortSignal"!==proto.constructor.name)}class Request{constructor(input){let parsedURL,init=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};isRequest(input)?parsedURL=parse_url(input.url):(parsedURL=input&&input.href?parse_url(input.href):parse_url(`${input}`),input={});let method=init.method||input.method||"GET";if(method=method.toUpperCase(),(null!=init.body||isRequest(input)&&null!==input.body)&&("GET"===method||"HEAD"===method))throw new TypeError("Request with GET/HEAD method cannot have body");let inputBody=null!=init.body?init.body:isRequest(input)&&null!==input.body?clone(input):null;Body.call(this,inputBody,{timeout:init.timeout||input.timeout||0,size:init.size||input.size||0});const headers=new Headers(init.headers||input.headers||{});if(null!=inputBody&&!headers.has("Content-Type")){const contentType=extractContentType(inputBody);contentType&&headers.append("Content-Type",contentType)}let signal=isRequest(input)?input.signal:null;if("signal"in init&&(signal=init.signal),null!=signal&&!isAbortSignal(signal))throw new TypeError("Expected signal to be an instanceof AbortSignal");this[INTERNALS$2]={method:method,redirect:init.redirect||input.redirect||"follow",headers:headers,parsedURL:parsedURL,signal:signal},this.follow=void 0!==init.follow?init.follow:void 0!==input.follow?input.follow:20,this.compress=void 0!==init.compress?init.compress:void 0===input.compress||input.compress,this.counter=init.counter||input.counter||0,this.agent=init.agent||input.agent}get method(){return this[INTERNALS$2].method}get url(){return format_url(this[INTERNALS$2].parsedURL)}get headers(){return this[INTERNALS$2].headers}get redirect(){return this[INTERNALS$2].redirect}get signal(){return this[INTERNALS$2].signal}clone(){return new Request(this)}}function getNodeRequestOptions(request){const parsedURL=request[INTERNALS$2].parsedURL,headers=new Headers(request[INTERNALS$2].headers);if(headers.has("Accept")||headers.set("Accept","*/*"),!parsedURL.protocol||!parsedURL.hostname)throw new TypeError("Only absolute URLs are supported");if(!/^https?:$/.test(parsedURL.protocol))throw new TypeError("Only HTTP(S) protocols are supported");if(request.signal&&request.body instanceof Stream.Readable&&!streamDestructionSupported)throw new Error("Cancellation of streamed requests with AbortSignal is not supported in node < 8");let contentLengthValue=null;if(null==request.body&&/^(POST|PUT)$/i.test(request.method)&&(contentLengthValue="0"),null!=request.body){const totalBytes=getTotalBytes(request);"number"==typeof totalBytes&&(contentLengthValue=String(totalBytes))}contentLengthValue&&headers.set("Content-Length",contentLengthValue),headers.has("User-Agent")||headers.set("User-Agent","node-fetch/1.0 (+https://github.com/bitinn/node-fetch)"),request.compress&&!headers.has("Accept-Encoding")&&headers.set("Accept-Encoding","gzip,deflate");let agent=request.agent;return"function"==typeof agent&&(agent=agent(parsedURL)),headers.has("Connection")||agent||headers.set("Connection","close"),Object.assign({},parsedURL,{method:request.method,headers:exportNodeCompatibleHeaders(headers),agent:agent})}function AbortError(message){Error.call(this,message),this.type="aborted",this.message=message,Error.captureStackTrace(this,this.constructor)}Body.mixIn(Request.prototype),Object.defineProperty(Request.prototype,Symbol.toStringTag,{value:"Request",writable:!1,enumerable:!1,configurable:!0}),Object.defineProperties(Request.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0}}),AbortError.prototype=Object.create(Error.prototype),AbortError.prototype.constructor=AbortError,AbortError.prototype.name="AbortError";const PassThrough$1=Stream.PassThrough,resolve_url=Url.resolve;function fetch(url,opts){if(!fetch.Promise)throw new Error("native promise missing, set fetch.Promise to your favorite alternative");return Body.Promise=fetch.Promise,new fetch.Promise((function(resolve,reject){const request=new Request(url,opts),options=getNodeRequestOptions(request),send=("https:"===options.protocol?https:http).request,signal=request.signal;let response=null;const abort=function(){let error=new AbortError("The user aborted a request.");reject(error),request.body&&request.body instanceof Stream.Readable&&request.body.destroy(error),response&&response.body&&response.body.emit("error",error)};if(signal&&signal.aborted)return void abort();const abortAndFinalize=function(){abort(),finalize()},req=send(options);let reqTimeout;function finalize(){req.abort(),signal&&signal.removeEventListener("abort",abortAndFinalize),clearTimeout(reqTimeout)}signal&&signal.addEventListener("abort",abortAndFinalize),request.timeout&&req.once("socket",(function(socket){reqTimeout=setTimeout((function(){reject(new FetchError(`network timeout at: ${request.url}`,"request-timeout")),finalize()}),request.timeout)})),req.on("error",(function(err){reject(new FetchError(`request to ${request.url} failed, reason: ${err.message}`,"system",err)),finalize()})),req.on("response",(function(res){clearTimeout(reqTimeout);const headers=createHeadersLenient(res.headers);if(fetch.isRedirect(res.statusCode)){const location=headers.get("Location"),locationURL=null===location?null:resolve_url(request.url,location);switch(request.redirect){case"error":return reject(new FetchError(`redirect mode is set to error: ${request.url}`,"no-redirect")),void finalize();case"manual":if(null!==locationURL)try{headers.set("Location",locationURL)}catch(err){reject(err)}break;case"follow":if(null===locationURL)break;if(request.counter>=request.follow)return reject(new FetchError(`maximum redirect reached at: ${request.url}`,"max-redirect")),void finalize();const requestOpts={headers:new Headers(request.headers),follow:request.follow,counter:request.counter+1,agent:request.agent,compress:request.compress,method:request.method,body:request.body,signal:request.signal,timeout:request.timeout};return 303!==res.statusCode&&request.body&&null===getTotalBytes(request)?(reject(new FetchError("Cannot follow redirect with body being a readable stream","unsupported-redirect")),void finalize()):(303!==res.statusCode&&(301!==res.statusCode&&302!==res.statusCode||"POST"!==request.method)||(requestOpts.method="GET",requestOpts.body=void 0,requestOpts.headers.delete("content-length")),resolve(fetch(new Request(locationURL,requestOpts))),void finalize())}}res.once("end",(function(){signal&&signal.removeEventListener("abort",abortAndFinalize)}));let body=res.pipe(new PassThrough$1);const response_options={url:request.url,status:res.statusCode,statusText:res.statusMessage,headers:headers,size:request.size,timeout:request.timeout,counter:request.counter},codings=headers.get("Content-Encoding");if(!request.compress||"HEAD"===request.method||null===codings||204===res.statusCode||304===res.statusCode)return response=new Response(body,response_options),void resolve(response);const zlibOptions={flush:zlib.Z_SYNC_FLUSH,finishFlush:zlib.Z_SYNC_FLUSH};if("gzip"==codings||"x-gzip"==codings)return body=body.pipe(zlib.createGunzip(zlibOptions)),response=new Response(body,response_options),void resolve(response);if("deflate"!=codings&&"x-deflate"!=codings){if("br"==codings&&"function"==typeof zlib.createBrotliDecompress)return body=body.pipe(zlib.createBrotliDecompress()),response=new Response(body,response_options),void resolve(response);response=new Response(body,response_options),resolve(response)}else{res.pipe(new PassThrough$1).once("data",(function(chunk){body=8==(15&chunk[0])?body.pipe(zlib.createInflate()):body.pipe(zlib.createInflateRaw()),response=new Response(body,response_options),resolve(response)}))}})),writeToStream(req,request)}))}fetch.isRedirect=function(code){return 301===code||302===code||303===code||307===code||308===code},fetch.Promise=global.Promise;var lib=Object.freeze({__proto__:null,default:fetch,Headers:Headers,Request:Request,Response:Response,FetchError:FetchError}),defaults$1=createCommonjsModule((function(module,exports){(function(){exports.defaults={.1:{explicitCharkey:!1,trim:!0,normalize:!0,normalizeTags:!1,attrkey:"@",charkey:"#",explicitArray:!1,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!1,validator:null,xmlns:!1,explicitChildren:!1,childkey:"@@",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,emptyTag:""},.2:{explicitCharkey:!1,trim:!1,normalize:!1,normalizeTags:!1,attrkey:"$",charkey:"_",explicitArray:!0,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!0,validator:null,xmlns:!1,explicitChildren:!1,preserveChildrenOrder:!1,childkey:"$$",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,rootName:"root",xmldec:{version:"1.0",encoding:"UTF-8",standalone:!0},doctype:null,renderOpts:{pretty:!0,indent:"  ",newline:"\n"},headless:!1,chunkSize:1e4,emptyTag:"",cdata:!1}}}).call(commonjsGlobal)})),defaults_1=defaults$1.defaults,Utility=createCommonjsModule((function(module){(function(){var assign,getValue,isArray,isEmpty,isFunction,isObject,isPlainObject,slice=[].slice,hasProp={}.hasOwnProperty;assign=function(){var i,key,len,source,sources,target;if(target=arguments[0],sources=2<=arguments.length?slice.call(arguments,1):[],isFunction(Object.assign))Object.assign.apply(null,arguments);else for(i=0,len=sources.length;i<len;i++)if(null!=(source=sources[i]))for(key in source)hasProp.call(source,key)&&(target[key]=source[key]);return target},isFunction=function(val){return!!val&&"[object Function]"===Object.prototype.toString.call(val)},isObject=function(val){var ref;return!!val&&("function"==(ref=typeof val)||"object"===ref)},isArray=function(val){return isFunction(Array.isArray)?Array.isArray(val):"[object Array]"===Object.prototype.toString.call(val)},isEmpty=function(val){var key;if(isArray(val))return!val.length;for(key in val)if(hasProp.call(val,key))return!1;return!0},isPlainObject=function(val){var ctor,proto;return isObject(val)&&(proto=Object.getPrototypeOf(val))&&(ctor=proto.constructor)&&"function"==typeof ctor&&ctor instanceof ctor&&Function.prototype.toString.call(ctor)===Function.prototype.toString.call(Object)},getValue=function(obj){return isFunction(obj.valueOf)?obj.valueOf():obj},module.exports.assign=assign,module.exports.isFunction=isFunction,module.exports.isObject=isObject,module.exports.isArray=isArray,module.exports.isEmpty=isEmpty,module.exports.isPlainObject=isPlainObject,module.exports.getValue=getValue}).call(commonjsGlobal)})),Utility_1=Utility.assign,Utility_2=Utility.isFunction,Utility_3=Utility.isObject,Utility_4=Utility.isArray,Utility_5=Utility.isEmpty,Utility_6=Utility.isPlainObject,Utility_7=Utility.getValue,XMLDOMImplementation=createCommonjsModule((function(module){(function(){module.exports=function(){function XMLDOMImplementation(){}return XMLDOMImplementation.prototype.hasFeature=function(feature,version){return!0},XMLDOMImplementation.prototype.createDocumentType=function(qualifiedName,publicId,systemId){throw new Error("This DOM method is not implemented.")},XMLDOMImplementation.prototype.createDocument=function(namespaceURI,qualifiedName,doctype){throw new Error("This DOM method is not implemented.")},XMLDOMImplementation.prototype.createHTMLDocument=function(title){throw new Error("This DOM method is not implemented.")},XMLDOMImplementation.prototype.getFeature=function(feature,version){throw new Error("This DOM method is not implemented.")},XMLDOMImplementation}()}).call(commonjsGlobal)})),XMLDOMErrorHandler=createCommonjsModule((function(module){(function(){module.exports=function(){function XMLDOMErrorHandler(){}return XMLDOMErrorHandler.prototype.handleError=function(error){throw new Error(error)},XMLDOMErrorHandler}()}).call(commonjsGlobal)})),XMLDOMStringList=createCommonjsModule((function(module){(function(){module.exports=function(){function XMLDOMStringList(arr){this.arr=arr||[]}return Object.defineProperty(XMLDOMStringList.prototype,"length",{get:function(){return this.arr.length}}),XMLDOMStringList.prototype.item=function(index){return this.arr[index]||null},XMLDOMStringList.prototype.contains=function(str){return-1!==this.arr.indexOf(str)},XMLDOMStringList}()}).call(commonjsGlobal)})),XMLDOMConfiguration=createCommonjsModule((function(module){(function(){var XMLDOMErrorHandler$1,XMLDOMStringList$1;XMLDOMErrorHandler$1=XMLDOMErrorHandler,XMLDOMStringList$1=XMLDOMStringList,module.exports=function(){function XMLDOMConfiguration(){this.defaultParams={"canonical-form":!1,"cdata-sections":!1,comments:!1,"datatype-normalization":!1,"element-content-whitespace":!0,entities:!0,"error-handler":new XMLDOMErrorHandler$1,infoset:!0,"validate-if-schema":!1,namespaces:!0,"namespace-declarations":!0,"normalize-characters":!1,"schema-location":"","schema-type":"","split-cdata-sections":!0,validate:!1,"well-formed":!0},this.params=Object.create(this.defaultParams)}return Object.defineProperty(XMLDOMConfiguration.prototype,"parameterNames",{get:function(){return new XMLDOMStringList$1(Object.keys(this.defaultParams))}}),XMLDOMConfiguration.prototype.getParameter=function(name){return this.params.hasOwnProperty(name)?this.params[name]:null},XMLDOMConfiguration.prototype.canSetParameter=function(name,value){return!0},XMLDOMConfiguration.prototype.setParameter=function(name,value){return null!=value?this.params[name]=value:delete this.params[name]},XMLDOMConfiguration}()}).call(commonjsGlobal)})),NodeType=createCommonjsModule((function(module){(function(){module.exports={Element:1,Attribute:2,Text:3,CData:4,EntityReference:5,EntityDeclaration:6,ProcessingInstruction:7,Comment:8,Document:9,DocType:10,DocumentFragment:11,NotationDeclaration:12,Declaration:201,Raw:202,AttributeDeclaration:203,ElementDeclaration:204,Dummy:205}}).call(commonjsGlobal)})),NodeType_1=NodeType.Element,NodeType_2=NodeType.Attribute,NodeType_3=NodeType.Text,NodeType_4=NodeType.CData,NodeType_5=NodeType.EntityReference,NodeType_6=NodeType.EntityDeclaration,NodeType_7=NodeType.ProcessingInstruction,NodeType_8=NodeType.Comment,NodeType_9=NodeType.Document,NodeType_10=NodeType.DocType,NodeType_11=NodeType.DocumentFragment,NodeType_12=NodeType.NotationDeclaration,NodeType_13=NodeType.Declaration,NodeType_14=NodeType.Raw,NodeType_15=NodeType.AttributeDeclaration,NodeType_16=NodeType.ElementDeclaration,NodeType_17=NodeType.Dummy,XMLAttribute=createCommonjsModule((function(module){(function(){var NodeType$1;NodeType$1=NodeType,module.exports=function(){function XMLAttribute(parent,name,value){if(this.parent=parent,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),null==name)throw new Error("Missing attribute name. "+this.debugInfo(name));this.name=this.stringify.name(name),this.value=this.stringify.attValue(value),this.type=NodeType$1.Attribute,this.isId=!1,this.schemaTypeInfo=null}return Object.defineProperty(XMLAttribute.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(XMLAttribute.prototype,"ownerElement",{get:function(){return this.parent}}),Object.defineProperty(XMLAttribute.prototype,"textContent",{get:function(){return this.value},set:function(value){return this.value=value||""}}),Object.defineProperty(XMLAttribute.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(XMLAttribute.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(XMLAttribute.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(XMLAttribute.prototype,"specified",{get:function(){return!0}}),XMLAttribute.prototype.clone=function(){return Object.create(this)},XMLAttribute.prototype.toString=function(options){return this.options.writer.attribute(this,this.options.writer.filterOptions(options))},XMLAttribute.prototype.debugInfo=function(name){return null==(name=name||this.name)?"parent: <"+this.parent.name+">":"attribute: {"+name+"}, parent: <"+this.parent.name+">"},XMLAttribute.prototype.isEqualNode=function(node){return node.namespaceURI===this.namespaceURI&&(node.prefix===this.prefix&&(node.localName===this.localName&&node.value===this.value))},XMLAttribute}()}).call(commonjsGlobal)})),XMLNamedNodeMap=createCommonjsModule((function(module){(function(){module.exports=function(){function XMLNamedNodeMap(nodes){this.nodes=nodes}return Object.defineProperty(XMLNamedNodeMap.prototype,"length",{get:function(){return Object.keys(this.nodes).length||0}}),XMLNamedNodeMap.prototype.clone=function(){return this.nodes=null},XMLNamedNodeMap.prototype.getNamedItem=function(name){return this.nodes[name]},XMLNamedNodeMap.prototype.setNamedItem=function(node){var oldNode;return oldNode=this.nodes[node.nodeName],this.nodes[node.nodeName]=node,oldNode||null},XMLNamedNodeMap.prototype.removeNamedItem=function(name){var oldNode;return oldNode=this.nodes[name],delete this.nodes[name],oldNode||null},XMLNamedNodeMap.prototype.item=function(index){return this.nodes[Object.keys(this.nodes)[index]]||null},XMLNamedNodeMap.prototype.getNamedItemNS=function(namespaceURI,localName){throw new Error("This DOM method is not implemented.")},XMLNamedNodeMap.prototype.setNamedItemNS=function(node){throw new Error("This DOM method is not implemented.")},XMLNamedNodeMap.prototype.removeNamedItemNS=function(namespaceURI,localName){throw new Error("This DOM method is not implemented.")},XMLNamedNodeMap}()}).call(commonjsGlobal)})),XMLElement=createCommonjsModule((function(module){(function(){var NodeType$1,XMLAttribute$1,XMLNamedNodeMap$1,XMLNode$1,getValue,isFunction,isObject,ref,hasProp={}.hasOwnProperty;isObject=(ref=Utility).isObject,isFunction=ref.isFunction,getValue=ref.getValue,XMLNode$1=XMLNode,NodeType$1=NodeType,XMLAttribute$1=XMLAttribute,XMLNamedNodeMap$1=XMLNamedNodeMap,module.exports=function(superClass){function XMLElement(parent,name,attributes){var child,j,len,ref1;if(XMLElement.__super__.constructor.call(this,parent),null==name)throw new Error("Missing element name. "+this.debugInfo());if(this.name=this.stringify.name(name),this.type=NodeType$1.Element,this.attribs={},this.schemaTypeInfo=null,null!=attributes&&this.attribute(attributes),parent.type===NodeType$1.Document&&(this.isRoot=!0,this.documentObject=parent,parent.rootObject=this,parent.children))for(j=0,len=(ref1=parent.children).length;j<len;j++)if((child=ref1[j]).type===NodeType$1.DocType){child.name=this.name;break}}return function(child,parent){for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);function ctor(){this.constructor=child}ctor.prototype=(parent||{}).prototype,child.prototype=new ctor,child.__super__=(parent||{}).prototype}(XMLElement,superClass),Object.defineProperty(XMLElement.prototype,"tagName",{get:function(){return this.name}}),Object.defineProperty(XMLElement.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(XMLElement.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(XMLElement.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(XMLElement.prototype,"id",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(XMLElement.prototype,"className",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(XMLElement.prototype,"classList",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(XMLElement.prototype,"attributes",{get:function(){return this.attributeMap&&this.attributeMap.nodes||(this.attributeMap=new XMLNamedNodeMap$1(this.attribs)),this.attributeMap}}),XMLElement.prototype.clone=function(){var att,attName,clonedSelf,ref1;for(attName in(clonedSelf=Object.create(this)).isRoot&&(clonedSelf.documentObject=null),clonedSelf.attribs={},ref1=this.attribs)hasProp.call(ref1,attName)&&(att=ref1[attName],clonedSelf.attribs[attName]=att.clone());return clonedSelf.children=[],this.children.forEach((function(child){var clonedChild;return(clonedChild=child.clone()).parent=clonedSelf,clonedSelf.children.push(clonedChild)})),clonedSelf},XMLElement.prototype.attribute=function(name,value){var attName,attValue;if(null!=name&&(name=getValue(name)),isObject(name))for(attName in name)hasProp.call(name,attName)&&(attValue=name[attName],this.attribute(attName,attValue));else isFunction(value)&&(value=value.apply()),this.options.keepNullAttributes&&null==value?this.attribs[name]=new XMLAttribute$1(this,name,""):null!=value&&(this.attribs[name]=new XMLAttribute$1(this,name,value));return this},XMLElement.prototype.removeAttribute=function(name){var attName,j,len;if(null==name)throw new Error("Missing attribute name. "+this.debugInfo());if(name=getValue(name),Array.isArray(name))for(j=0,len=name.length;j<len;j++)attName=name[j],delete this.attribs[attName];else delete this.attribs[name];return this},XMLElement.prototype.toString=function(options){return this.options.writer.element(this,this.options.writer.filterOptions(options))},XMLElement.prototype.att=function(name,value){return this.attribute(name,value)},XMLElement.prototype.a=function(name,value){return this.attribute(name,value)},XMLElement.prototype.getAttribute=function(name){return this.attribs.hasOwnProperty(name)?this.attribs[name].value:null},XMLElement.prototype.setAttribute=function(name,value){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLElement.prototype.getAttributeNode=function(name){return this.attribs.hasOwnProperty(name)?this.attribs[name]:null},XMLElement.prototype.setAttributeNode=function(newAttr){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLElement.prototype.removeAttributeNode=function(oldAttr){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLElement.prototype.getElementsByTagName=function(name){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLElement.prototype.getAttributeNS=function(namespaceURI,localName){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLElement.prototype.setAttributeNS=function(namespaceURI,qualifiedName,value){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLElement.prototype.removeAttributeNS=function(namespaceURI,localName){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLElement.prototype.getAttributeNodeNS=function(namespaceURI,localName){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLElement.prototype.setAttributeNodeNS=function(newAttr){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLElement.prototype.getElementsByTagNameNS=function(namespaceURI,localName){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLElement.prototype.hasAttribute=function(name){return this.attribs.hasOwnProperty(name)},XMLElement.prototype.hasAttributeNS=function(namespaceURI,localName){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLElement.prototype.setIdAttribute=function(name,isId){return this.attribs.hasOwnProperty(name)?this.attribs[name].isId:isId},XMLElement.prototype.setIdAttributeNS=function(namespaceURI,localName,isId){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLElement.prototype.setIdAttributeNode=function(idAttr,isId){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLElement.prototype.getElementsByTagName=function(tagname){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLElement.prototype.getElementsByTagNameNS=function(namespaceURI,localName){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLElement.prototype.getElementsByClassName=function(classNames){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLElement.prototype.isEqualNode=function(node){var i,j,ref1;if(!XMLElement.__super__.isEqualNode.apply(this,arguments).isEqualNode(node))return!1;if(node.namespaceURI!==this.namespaceURI)return!1;if(node.prefix!==this.prefix)return!1;if(node.localName!==this.localName)return!1;if(node.attribs.length!==this.attribs.length)return!1;for(i=j=0,ref1=this.attribs.length-1;0<=ref1?j<=ref1:j>=ref1;i=0<=ref1?++j:--j)if(!this.attribs[i].isEqualNode(node.attribs[i]))return!1;return!0},XMLElement}(XMLNode$1)}).call(commonjsGlobal)})),XMLCharacterData=createCommonjsModule((function(module){(function(){var XMLNode$1,hasProp={}.hasOwnProperty;XMLNode$1=XMLNode,module.exports=function(superClass){function XMLCharacterData(parent){XMLCharacterData.__super__.constructor.call(this,parent),this.value=""}return function(child,parent){for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);function ctor(){this.constructor=child}ctor.prototype=(parent||{}).prototype,child.prototype=new ctor,child.__super__=(parent||{}).prototype}(XMLCharacterData,superClass),Object.defineProperty(XMLCharacterData.prototype,"data",{get:function(){return this.value},set:function(value){return this.value=value||""}}),Object.defineProperty(XMLCharacterData.prototype,"length",{get:function(){return this.value.length}}),Object.defineProperty(XMLCharacterData.prototype,"textContent",{get:function(){return this.value},set:function(value){return this.value=value||""}}),XMLCharacterData.prototype.clone=function(){return Object.create(this)},XMLCharacterData.prototype.substringData=function(offset,count){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLCharacterData.prototype.appendData=function(arg){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLCharacterData.prototype.insertData=function(offset,arg){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLCharacterData.prototype.deleteData=function(offset,count){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLCharacterData.prototype.replaceData=function(offset,count,arg){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLCharacterData.prototype.isEqualNode=function(node){return!!XMLCharacterData.__super__.isEqualNode.apply(this,arguments).isEqualNode(node)&&node.data===this.data},XMLCharacterData}(XMLNode$1)}).call(commonjsGlobal)})),XMLCData=createCommonjsModule((function(module){(function(){var NodeType$1,XMLCharacterData$1,hasProp={}.hasOwnProperty;NodeType$1=NodeType,XMLCharacterData$1=XMLCharacterData,module.exports=function(superClass){function XMLCData(parent,text){if(XMLCData.__super__.constructor.call(this,parent),null==text)throw new Error("Missing CDATA text. "+this.debugInfo());this.name="#cdata-section",this.type=NodeType$1.CData,this.value=this.stringify.cdata(text)}return function(child,parent){for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);function ctor(){this.constructor=child}ctor.prototype=(parent||{}).prototype,child.prototype=new ctor,child.__super__=(parent||{}).prototype}(XMLCData,superClass),XMLCData.prototype.clone=function(){return Object.create(this)},XMLCData.prototype.toString=function(options){return this.options.writer.cdata(this,this.options.writer.filterOptions(options))},XMLCData}(XMLCharacterData$1)}).call(commonjsGlobal)})),XMLComment=createCommonjsModule((function(module){(function(){var NodeType$1,XMLCharacterData$1,hasProp={}.hasOwnProperty;NodeType$1=NodeType,XMLCharacterData$1=XMLCharacterData,module.exports=function(superClass){function XMLComment(parent,text){if(XMLComment.__super__.constructor.call(this,parent),null==text)throw new Error("Missing comment text. "+this.debugInfo());this.name="#comment",this.type=NodeType$1.Comment,this.value=this.stringify.comment(text)}return function(child,parent){for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);function ctor(){this.constructor=child}ctor.prototype=(parent||{}).prototype,child.prototype=new ctor,child.__super__=(parent||{}).prototype}(XMLComment,superClass),XMLComment.prototype.clone=function(){return Object.create(this)},XMLComment.prototype.toString=function(options){return this.options.writer.comment(this,this.options.writer.filterOptions(options))},XMLComment}(XMLCharacterData$1)}).call(commonjsGlobal)})),XMLDeclaration=createCommonjsModule((function(module){(function(){var NodeType$1,XMLNode$1,isObject,hasProp={}.hasOwnProperty;isObject=Utility.isObject,XMLNode$1=XMLNode,NodeType$1=NodeType,module.exports=function(superClass){function XMLDeclaration(parent,version,encoding,standalone){var ref;XMLDeclaration.__super__.constructor.call(this,parent),isObject(version)&&(version=(ref=version).version,encoding=ref.encoding,standalone=ref.standalone),version||(version="1.0"),this.type=NodeType$1.Declaration,this.version=this.stringify.xmlVersion(version),null!=encoding&&(this.encoding=this.stringify.xmlEncoding(encoding)),null!=standalone&&(this.standalone=this.stringify.xmlStandalone(standalone))}return function(child,parent){for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);function ctor(){this.constructor=child}ctor.prototype=(parent||{}).prototype,child.prototype=new ctor,child.__super__=(parent||{}).prototype}(XMLDeclaration,superClass),XMLDeclaration.prototype.toString=function(options){return this.options.writer.declaration(this,this.options.writer.filterOptions(options))},XMLDeclaration}(XMLNode$1)}).call(commonjsGlobal)})),XMLDTDAttList=createCommonjsModule((function(module){(function(){var NodeType$1,XMLNode$1,hasProp={}.hasOwnProperty;XMLNode$1=XMLNode,NodeType$1=NodeType,module.exports=function(superClass){function XMLDTDAttList(parent,elementName,attributeName,attributeType,defaultValueType,defaultValue){if(XMLDTDAttList.__super__.constructor.call(this,parent),null==elementName)throw new Error("Missing DTD element name. "+this.debugInfo());if(null==attributeName)throw new Error("Missing DTD attribute name. "+this.debugInfo(elementName));if(!attributeType)throw new Error("Missing DTD attribute type. "+this.debugInfo(elementName));if(!defaultValueType)throw new Error("Missing DTD attribute default. "+this.debugInfo(elementName));if(0!==defaultValueType.indexOf("#")&&(defaultValueType="#"+defaultValueType),!defaultValueType.match(/^(#REQUIRED|#IMPLIED|#FIXED|#DEFAULT)$/))throw new Error("Invalid default value type; expected: #REQUIRED, #IMPLIED, #FIXED or #DEFAULT. "+this.debugInfo(elementName));if(defaultValue&&!defaultValueType.match(/^(#FIXED|#DEFAULT)$/))throw new Error("Default value only applies to #FIXED or #DEFAULT. "+this.debugInfo(elementName));this.elementName=this.stringify.name(elementName),this.type=NodeType$1.AttributeDeclaration,this.attributeName=this.stringify.name(attributeName),this.attributeType=this.stringify.dtdAttType(attributeType),defaultValue&&(this.defaultValue=this.stringify.dtdAttDefault(defaultValue)),this.defaultValueType=defaultValueType}return function(child,parent){for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);function ctor(){this.constructor=child}ctor.prototype=(parent||{}).prototype,child.prototype=new ctor,child.__super__=(parent||{}).prototype}(XMLDTDAttList,superClass),XMLDTDAttList.prototype.toString=function(options){return this.options.writer.dtdAttList(this,this.options.writer.filterOptions(options))},XMLDTDAttList}(XMLNode$1)}).call(commonjsGlobal)})),XMLDTDEntity=createCommonjsModule((function(module){(function(){var NodeType$1,XMLNode$1,isObject,hasProp={}.hasOwnProperty;isObject=Utility.isObject,XMLNode$1=XMLNode,NodeType$1=NodeType,module.exports=function(superClass){function XMLDTDEntity(parent,pe,name,value){if(XMLDTDEntity.__super__.constructor.call(this,parent),null==name)throw new Error("Missing DTD entity name. "+this.debugInfo(name));if(null==value)throw new Error("Missing DTD entity value. "+this.debugInfo(name));if(this.pe=!!pe,this.name=this.stringify.name(name),this.type=NodeType$1.EntityDeclaration,isObject(value)){if(!value.pubID&&!value.sysID)throw new Error("Public and/or system identifiers are required for an external entity. "+this.debugInfo(name));if(value.pubID&&!value.sysID)throw new Error("System identifier is required for a public external entity. "+this.debugInfo(name));if(this.internal=!1,null!=value.pubID&&(this.pubID=this.stringify.dtdPubID(value.pubID)),null!=value.sysID&&(this.sysID=this.stringify.dtdSysID(value.sysID)),null!=value.nData&&(this.nData=this.stringify.dtdNData(value.nData)),this.pe&&this.nData)throw new Error("Notation declaration is not allowed in a parameter entity. "+this.debugInfo(name))}else this.value=this.stringify.dtdEntityValue(value),this.internal=!0}return function(child,parent){for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);function ctor(){this.constructor=child}ctor.prototype=(parent||{}).prototype,child.prototype=new ctor,child.__super__=(parent||{}).prototype}(XMLDTDEntity,superClass),Object.defineProperty(XMLDTDEntity.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(XMLDTDEntity.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(XMLDTDEntity.prototype,"notationName",{get:function(){return this.nData||null}}),Object.defineProperty(XMLDTDEntity.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(XMLDTDEntity.prototype,"xmlEncoding",{get:function(){return null}}),Object.defineProperty(XMLDTDEntity.prototype,"xmlVersion",{get:function(){return null}}),XMLDTDEntity.prototype.toString=function(options){return this.options.writer.dtdEntity(this,this.options.writer.filterOptions(options))},XMLDTDEntity}(XMLNode$1)}).call(commonjsGlobal)})),XMLDTDElement=createCommonjsModule((function(module){(function(){var NodeType$1,XMLNode$1,hasProp={}.hasOwnProperty;XMLNode$1=XMLNode,NodeType$1=NodeType,module.exports=function(superClass){function XMLDTDElement(parent,name,value){if(XMLDTDElement.__super__.constructor.call(this,parent),null==name)throw new Error("Missing DTD element name. "+this.debugInfo());value||(value="(#PCDATA)"),Array.isArray(value)&&(value="("+value.join(",")+")"),this.name=this.stringify.name(name),this.type=NodeType$1.ElementDeclaration,this.value=this.stringify.dtdElementValue(value)}return function(child,parent){for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);function ctor(){this.constructor=child}ctor.prototype=(parent||{}).prototype,child.prototype=new ctor,child.__super__=(parent||{}).prototype}(XMLDTDElement,superClass),XMLDTDElement.prototype.toString=function(options){return this.options.writer.dtdElement(this,this.options.writer.filterOptions(options))},XMLDTDElement}(XMLNode$1)}).call(commonjsGlobal)})),XMLDTDNotation=createCommonjsModule((function(module){(function(){var NodeType$1,XMLNode$1,hasProp={}.hasOwnProperty;XMLNode$1=XMLNode,NodeType$1=NodeType,module.exports=function(superClass){function XMLDTDNotation(parent,name,value){if(XMLDTDNotation.__super__.constructor.call(this,parent),null==name)throw new Error("Missing DTD notation name. "+this.debugInfo(name));if(!value.pubID&&!value.sysID)throw new Error("Public or system identifiers are required for an external entity. "+this.debugInfo(name));this.name=this.stringify.name(name),this.type=NodeType$1.NotationDeclaration,null!=value.pubID&&(this.pubID=this.stringify.dtdPubID(value.pubID)),null!=value.sysID&&(this.sysID=this.stringify.dtdSysID(value.sysID))}return function(child,parent){for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);function ctor(){this.constructor=child}ctor.prototype=(parent||{}).prototype,child.prototype=new ctor,child.__super__=(parent||{}).prototype}(XMLDTDNotation,superClass),Object.defineProperty(XMLDTDNotation.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(XMLDTDNotation.prototype,"systemId",{get:function(){return this.sysID}}),XMLDTDNotation.prototype.toString=function(options){return this.options.writer.dtdNotation(this,this.options.writer.filterOptions(options))},XMLDTDNotation}(XMLNode$1)}).call(commonjsGlobal)})),XMLDocType=createCommonjsModule((function(module){(function(){var NodeType$1,XMLDTDAttList$1,XMLDTDElement$1,XMLDTDEntity$1,XMLDTDNotation$1,XMLNamedNodeMap$1,XMLNode$1,isObject,hasProp={}.hasOwnProperty;isObject=Utility.isObject,XMLNode$1=XMLNode,NodeType$1=NodeType,XMLDTDAttList$1=XMLDTDAttList,XMLDTDEntity$1=XMLDTDEntity,XMLDTDElement$1=XMLDTDElement,XMLDTDNotation$1=XMLDTDNotation,XMLNamedNodeMap$1=XMLNamedNodeMap,module.exports=function(superClass){function XMLDocType(parent,pubID,sysID){var child,i,len,ref,ref1,ref2;if(XMLDocType.__super__.constructor.call(this,parent),this.type=NodeType$1.DocType,parent.children)for(i=0,len=(ref=parent.children).length;i<len;i++)if((child=ref[i]).type===NodeType$1.Element){this.name=child.name;break}this.documentObject=parent,isObject(pubID)&&(pubID=(ref1=pubID).pubID,sysID=ref1.sysID),null==sysID&&(sysID=(ref2=[pubID,sysID])[0],pubID=ref2[1]),null!=pubID&&(this.pubID=this.stringify.dtdPubID(pubID)),null!=sysID&&(this.sysID=this.stringify.dtdSysID(sysID))}return function(child,parent){for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);function ctor(){this.constructor=child}ctor.prototype=(parent||{}).prototype,child.prototype=new ctor,child.__super__=(parent||{}).prototype}(XMLDocType,superClass),Object.defineProperty(XMLDocType.prototype,"entities",{get:function(){var child,i,len,nodes,ref;for(nodes={},i=0,len=(ref=this.children).length;i<len;i++)(child=ref[i]).type!==NodeType$1.EntityDeclaration||child.pe||(nodes[child.name]=child);return new XMLNamedNodeMap$1(nodes)}}),Object.defineProperty(XMLDocType.prototype,"notations",{get:function(){var child,i,len,nodes,ref;for(nodes={},i=0,len=(ref=this.children).length;i<len;i++)(child=ref[i]).type===NodeType$1.NotationDeclaration&&(nodes[child.name]=child);return new XMLNamedNodeMap$1(nodes)}}),Object.defineProperty(XMLDocType.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(XMLDocType.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(XMLDocType.prototype,"internalSubset",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),XMLDocType.prototype.element=function(name,value){var child;return child=new XMLDTDElement$1(this,name,value),this.children.push(child),this},XMLDocType.prototype.attList=function(elementName,attributeName,attributeType,defaultValueType,defaultValue){var child;return child=new XMLDTDAttList$1(this,elementName,attributeName,attributeType,defaultValueType,defaultValue),this.children.push(child),this},XMLDocType.prototype.entity=function(name,value){var child;return child=new XMLDTDEntity$1(this,!1,name,value),this.children.push(child),this},XMLDocType.prototype.pEntity=function(name,value){var child;return child=new XMLDTDEntity$1(this,!0,name,value),this.children.push(child),this},XMLDocType.prototype.notation=function(name,value){var child;return child=new XMLDTDNotation$1(this,name,value),this.children.push(child),this},XMLDocType.prototype.toString=function(options){return this.options.writer.docType(this,this.options.writer.filterOptions(options))},XMLDocType.prototype.ele=function(name,value){return this.element(name,value)},XMLDocType.prototype.att=function(elementName,attributeName,attributeType,defaultValueType,defaultValue){return this.attList(elementName,attributeName,attributeType,defaultValueType,defaultValue)},XMLDocType.prototype.ent=function(name,value){return this.entity(name,value)},XMLDocType.prototype.pent=function(name,value){return this.pEntity(name,value)},XMLDocType.prototype.not=function(name,value){return this.notation(name,value)},XMLDocType.prototype.up=function(){return this.root()||this.documentObject},XMLDocType.prototype.isEqualNode=function(node){return!!XMLDocType.__super__.isEqualNode.apply(this,arguments).isEqualNode(node)&&(node.name===this.name&&(node.publicId===this.publicId&&node.systemId===this.systemId))},XMLDocType}(XMLNode$1)}).call(commonjsGlobal)})),XMLRaw=createCommonjsModule((function(module){(function(){var NodeType$1,XMLNode$1,hasProp={}.hasOwnProperty;NodeType$1=NodeType,XMLNode$1=XMLNode,module.exports=function(superClass){function XMLRaw(parent,text){if(XMLRaw.__super__.constructor.call(this,parent),null==text)throw new Error("Missing raw text. "+this.debugInfo());this.type=NodeType$1.Raw,this.value=this.stringify.raw(text)}return function(child,parent){for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);function ctor(){this.constructor=child}ctor.prototype=(parent||{}).prototype,child.prototype=new ctor,child.__super__=(parent||{}).prototype}(XMLRaw,superClass),XMLRaw.prototype.clone=function(){return Object.create(this)},XMLRaw.prototype.toString=function(options){return this.options.writer.raw(this,this.options.writer.filterOptions(options))},XMLRaw}(XMLNode$1)}).call(commonjsGlobal)})),XMLText=createCommonjsModule((function(module){(function(){var NodeType$1,XMLCharacterData$1,hasProp={}.hasOwnProperty;NodeType$1=NodeType,XMLCharacterData$1=XMLCharacterData,module.exports=function(superClass){function XMLText(parent,text){if(XMLText.__super__.constructor.call(this,parent),null==text)throw new Error("Missing element text. "+this.debugInfo());this.name="#text",this.type=NodeType$1.Text,this.value=this.stringify.text(text)}return function(child,parent){for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);function ctor(){this.constructor=child}ctor.prototype=(parent||{}).prototype,child.prototype=new ctor,child.__super__=(parent||{}).prototype}(XMLText,superClass),Object.defineProperty(XMLText.prototype,"isElementContentWhitespace",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(XMLText.prototype,"wholeText",{get:function(){var next,prev,str;for(str="",prev=this.previousSibling;prev;)str=prev.data+str,prev=prev.previousSibling;for(str+=this.data,next=this.nextSibling;next;)str+=next.data,next=next.nextSibling;return str}}),XMLText.prototype.clone=function(){return Object.create(this)},XMLText.prototype.toString=function(options){return this.options.writer.text(this,this.options.writer.filterOptions(options))},XMLText.prototype.splitText=function(offset){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLText.prototype.replaceWholeText=function(content){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLText}(XMLCharacterData$1)}).call(commonjsGlobal)})),XMLProcessingInstruction=createCommonjsModule((function(module){(function(){var NodeType$1,XMLCharacterData$1,hasProp={}.hasOwnProperty;NodeType$1=NodeType,XMLCharacterData$1=XMLCharacterData,module.exports=function(superClass){function XMLProcessingInstruction(parent,target,value){if(XMLProcessingInstruction.__super__.constructor.call(this,parent),null==target)throw new Error("Missing instruction target. "+this.debugInfo());this.type=NodeType$1.ProcessingInstruction,this.target=this.stringify.insTarget(target),this.name=this.target,value&&(this.value=this.stringify.insValue(value))}return function(child,parent){for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);function ctor(){this.constructor=child}ctor.prototype=(parent||{}).prototype,child.prototype=new ctor,child.__super__=(parent||{}).prototype}(XMLProcessingInstruction,superClass),XMLProcessingInstruction.prototype.clone=function(){return Object.create(this)},XMLProcessingInstruction.prototype.toString=function(options){return this.options.writer.processingInstruction(this,this.options.writer.filterOptions(options))},XMLProcessingInstruction.prototype.isEqualNode=function(node){return!!XMLProcessingInstruction.__super__.isEqualNode.apply(this,arguments).isEqualNode(node)&&node.target===this.target},XMLProcessingInstruction}(XMLCharacterData$1)}).call(commonjsGlobal)})),XMLDummy=createCommonjsModule((function(module){(function(){var NodeType$1,XMLNode$1,hasProp={}.hasOwnProperty;XMLNode$1=XMLNode,NodeType$1=NodeType,module.exports=function(superClass){function XMLDummy(parent){XMLDummy.__super__.constructor.call(this,parent),this.type=NodeType$1.Dummy}return function(child,parent){for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);function ctor(){this.constructor=child}ctor.prototype=(parent||{}).prototype,child.prototype=new ctor,child.__super__=(parent||{}).prototype}(XMLDummy,superClass),XMLDummy.prototype.clone=function(){return Object.create(this)},XMLDummy.prototype.toString=function(options){return""},XMLDummy}(XMLNode$1)}).call(commonjsGlobal)})),XMLNodeList=createCommonjsModule((function(module){(function(){module.exports=function(){function XMLNodeList(nodes){this.nodes=nodes}return Object.defineProperty(XMLNodeList.prototype,"length",{get:function(){return this.nodes.length||0}}),XMLNodeList.prototype.clone=function(){return this.nodes=null},XMLNodeList.prototype.item=function(index){return this.nodes[index]||null},XMLNodeList}()}).call(commonjsGlobal)})),DocumentPosition=createCommonjsModule((function(module){(function(){module.exports={Disconnected:1,Preceding:2,Following:4,Contains:8,ContainedBy:16,ImplementationSpecific:32}}).call(commonjsGlobal)})),DocumentPosition_1=DocumentPosition.Disconnected,DocumentPosition_2=DocumentPosition.Preceding,DocumentPosition_3=DocumentPosition.Following,DocumentPosition_4=DocumentPosition.Contains,DocumentPosition_5=DocumentPosition.ContainedBy,DocumentPosition_6=DocumentPosition.ImplementationSpecific,XMLNode=createCommonjsModule((function(module){(function(){var DocumentPosition$1,NodeType$1,XMLCData$1,XMLComment$1,XMLDeclaration$1,XMLDocType$1,XMLDummy$1,XMLElement$1,XMLNodeList$1,XMLProcessingInstruction$1,XMLRaw$1,XMLText$1,getValue,isEmpty,isFunction,isObject,ref1,hasProp={}.hasOwnProperty;isObject=(ref1=Utility).isObject,isFunction=ref1.isFunction,isEmpty=ref1.isEmpty,getValue=ref1.getValue,XMLElement$1=null,XMLCData$1=null,XMLComment$1=null,XMLDeclaration$1=null,XMLDocType$1=null,XMLRaw$1=null,XMLText$1=null,XMLProcessingInstruction$1=null,XMLDummy$1=null,NodeType$1=null,XMLNodeList$1=null,DocumentPosition$1=null,module.exports=function(){function XMLNode(parent1){this.parent=parent1,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),this.value=null,this.children=[],this.baseURI=null,XMLElement$1||(XMLElement$1=XMLElement,XMLCData$1=XMLCData,XMLComment$1=XMLComment,XMLDeclaration$1=XMLDeclaration,XMLDocType$1=XMLDocType,XMLRaw$1=XMLRaw,XMLText$1=XMLText,XMLProcessingInstruction$1=XMLProcessingInstruction,XMLDummy$1=XMLDummy,NodeType$1=NodeType,XMLNodeList$1=XMLNodeList,DocumentPosition$1=DocumentPosition)}return Object.defineProperty(XMLNode.prototype,"nodeName",{get:function(){return this.name}}),Object.defineProperty(XMLNode.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(XMLNode.prototype,"nodeValue",{get:function(){return this.value}}),Object.defineProperty(XMLNode.prototype,"parentNode",{get:function(){return this.parent}}),Object.defineProperty(XMLNode.prototype,"childNodes",{get:function(){return this.childNodeList&&this.childNodeList.nodes||(this.childNodeList=new XMLNodeList$1(this.children)),this.childNodeList}}),Object.defineProperty(XMLNode.prototype,"firstChild",{get:function(){return this.children[0]||null}}),Object.defineProperty(XMLNode.prototype,"lastChild",{get:function(){return this.children[this.children.length-1]||null}}),Object.defineProperty(XMLNode.prototype,"previousSibling",{get:function(){var i;return i=this.parent.children.indexOf(this),this.parent.children[i-1]||null}}),Object.defineProperty(XMLNode.prototype,"nextSibling",{get:function(){var i;return i=this.parent.children.indexOf(this),this.parent.children[i+1]||null}}),Object.defineProperty(XMLNode.prototype,"ownerDocument",{get:function(){return this.document()||null}}),Object.defineProperty(XMLNode.prototype,"textContent",{get:function(){var child,j,len,ref2,str;if(this.nodeType===NodeType$1.Element||this.nodeType===NodeType$1.DocumentFragment){for(str="",j=0,len=(ref2=this.children).length;j<len;j++)(child=ref2[j]).textContent&&(str+=child.textContent);return str}return null},set:function(value){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),XMLNode.prototype.setParent=function(parent){var child,j,len,ref2,results;for(this.parent=parent,parent&&(this.options=parent.options,this.stringify=parent.stringify),results=[],j=0,len=(ref2=this.children).length;j<len;j++)child=ref2[j],results.push(child.setParent(this));return results},XMLNode.prototype.element=function(name,attributes,text){var childNode,item,j,k,key,lastChild,len,len1,ref2,ref3,val;if(lastChild=null,null===attributes&&null==text&&(attributes=(ref2=[{},null])[0],text=ref2[1]),null==attributes&&(attributes={}),attributes=getValue(attributes),isObject(attributes)||(text=(ref3=[attributes,text])[0],attributes=ref3[1]),null!=name&&(name=getValue(name)),Array.isArray(name))for(j=0,len=name.length;j<len;j++)item=name[j],lastChild=this.element(item);else if(isFunction(name))lastChild=this.element(name.apply());else if(isObject(name)){for(key in name)if(hasProp.call(name,key))if(val=name[key],isFunction(val)&&(val=val.apply()),!this.options.ignoreDecorators&&this.stringify.convertAttKey&&0===key.indexOf(this.stringify.convertAttKey))lastChild=this.attribute(key.substr(this.stringify.convertAttKey.length),val);else if(!this.options.separateArrayItems&&Array.isArray(val)&&isEmpty(val))lastChild=this.dummy();else if(isObject(val)&&isEmpty(val))lastChild=this.element(key);else if(this.options.keepNullNodes||null!=val)if(!this.options.separateArrayItems&&Array.isArray(val))for(k=0,len1=val.length;k<len1;k++)item=val[k],(childNode={})[key]=item,lastChild=this.element(childNode);else isObject(val)?!this.options.ignoreDecorators&&this.stringify.convertTextKey&&0===key.indexOf(this.stringify.convertTextKey)?lastChild=this.element(val):(lastChild=this.element(key)).element(val):lastChild=this.element(key,val);else lastChild=this.dummy()}else lastChild=this.options.keepNullNodes||null!==text?!this.options.ignoreDecorators&&this.stringify.convertTextKey&&0===name.indexOf(this.stringify.convertTextKey)?this.text(text):!this.options.ignoreDecorators&&this.stringify.convertCDataKey&&0===name.indexOf(this.stringify.convertCDataKey)?this.cdata(text):!this.options.ignoreDecorators&&this.stringify.convertCommentKey&&0===name.indexOf(this.stringify.convertCommentKey)?this.comment(text):!this.options.ignoreDecorators&&this.stringify.convertRawKey&&0===name.indexOf(this.stringify.convertRawKey)?this.raw(text):!this.options.ignoreDecorators&&this.stringify.convertPIKey&&0===name.indexOf(this.stringify.convertPIKey)?this.instruction(name.substr(this.stringify.convertPIKey.length),text):this.node(name,attributes,text):this.dummy();if(null==lastChild)throw new Error("Could not create any elements with: "+name+". "+this.debugInfo());return lastChild},XMLNode.prototype.insertBefore=function(name,attributes,text){var child,i,newChild,refChild,removed;if(null!=name?name.type:void 0)return refChild=attributes,(newChild=name).setParent(this),refChild?(i=children.indexOf(refChild),removed=children.splice(i),children.push(newChild),Array.prototype.push.apply(children,removed)):children.push(newChild),newChild;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(name));return i=this.parent.children.indexOf(this),removed=this.parent.children.splice(i),child=this.parent.element(name,attributes,text),Array.prototype.push.apply(this.parent.children,removed),child},XMLNode.prototype.insertAfter=function(name,attributes,text){var child,i,removed;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(name));return i=this.parent.children.indexOf(this),removed=this.parent.children.splice(i+1),child=this.parent.element(name,attributes,text),Array.prototype.push.apply(this.parent.children,removed),child},XMLNode.prototype.remove=function(){var i;if(this.isRoot)throw new Error("Cannot remove the root element. "+this.debugInfo());return i=this.parent.children.indexOf(this),[].splice.apply(this.parent.children,[i,i-i+1].concat([])),this.parent},XMLNode.prototype.node=function(name,attributes,text){var child,ref2;return null!=name&&(name=getValue(name)),attributes||(attributes={}),attributes=getValue(attributes),isObject(attributes)||(text=(ref2=[attributes,text])[0],attributes=ref2[1]),child=new XMLElement$1(this,name,attributes),null!=text&&child.text(text),this.children.push(child),child},XMLNode.prototype.text=function(value){var child;return isObject(value)&&this.element(value),child=new XMLText$1(this,value),this.children.push(child),this},XMLNode.prototype.cdata=function(value){var child;return child=new XMLCData$1(this,value),this.children.push(child),this},XMLNode.prototype.comment=function(value){var child;return child=new XMLComment$1(this,value),this.children.push(child),this},XMLNode.prototype.commentBefore=function(value){var i,removed;return i=this.parent.children.indexOf(this),removed=this.parent.children.splice(i),this.parent.comment(value),Array.prototype.push.apply(this.parent.children,removed),this},XMLNode.prototype.commentAfter=function(value){var i,removed;return i=this.parent.children.indexOf(this),removed=this.parent.children.splice(i+1),this.parent.comment(value),Array.prototype.push.apply(this.parent.children,removed),this},XMLNode.prototype.raw=function(value){var child;return child=new XMLRaw$1(this,value),this.children.push(child),this},XMLNode.prototype.dummy=function(){return new XMLDummy$1(this)},XMLNode.prototype.instruction=function(target,value){var insTarget,insValue,instruction,j,len;if(null!=target&&(target=getValue(target)),null!=value&&(value=getValue(value)),Array.isArray(target))for(j=0,len=target.length;j<len;j++)insTarget=target[j],this.instruction(insTarget);else if(isObject(target))for(insTarget in target)hasProp.call(target,insTarget)&&(insValue=target[insTarget],this.instruction(insTarget,insValue));else isFunction(value)&&(value=value.apply()),instruction=new XMLProcessingInstruction$1(this,target,value),this.children.push(instruction);return this},XMLNode.prototype.instructionBefore=function(target,value){var i,removed;return i=this.parent.children.indexOf(this),removed=this.parent.children.splice(i),this.parent.instruction(target,value),Array.prototype.push.apply(this.parent.children,removed),this},XMLNode.prototype.instructionAfter=function(target,value){var i,removed;return i=this.parent.children.indexOf(this),removed=this.parent.children.splice(i+1),this.parent.instruction(target,value),Array.prototype.push.apply(this.parent.children,removed),this},XMLNode.prototype.declaration=function(version,encoding,standalone){var doc,xmldec;return doc=this.document(),xmldec=new XMLDeclaration$1(doc,version,encoding,standalone),0===doc.children.length?doc.children.unshift(xmldec):doc.children[0].type===NodeType$1.Declaration?doc.children[0]=xmldec:doc.children.unshift(xmldec),doc.root()||doc},XMLNode.prototype.dtd=function(pubID,sysID){var doc,doctype,i,j,k,len,len1,ref2,ref3;for(doc=this.document(),doctype=new XMLDocType$1(doc,pubID,sysID),i=j=0,len=(ref2=doc.children).length;j<len;i=++j)if(ref2[i].type===NodeType$1.DocType)return doc.children[i]=doctype,doctype;for(i=k=0,len1=(ref3=doc.children).length;k<len1;i=++k)if(ref3[i].isRoot)return doc.children.splice(i,0,doctype),doctype;return doc.children.push(doctype),doctype},XMLNode.prototype.up=function(){if(this.isRoot)throw new Error("The root node has no parent. Use doc() if you need to get the document object.");return this.parent},XMLNode.prototype.root=function(){var node;for(node=this;node;){if(node.type===NodeType$1.Document)return node.rootObject;if(node.isRoot)return node;node=node.parent}},XMLNode.prototype.document=function(){var node;for(node=this;node;){if(node.type===NodeType$1.Document)return node;node=node.parent}},XMLNode.prototype.end=function(options){return this.document().end(options)},XMLNode.prototype.prev=function(){var i;if((i=this.parent.children.indexOf(this))<1)throw new Error("Already at the first node. "+this.debugInfo());return this.parent.children[i-1]},XMLNode.prototype.next=function(){var i;if(-1===(i=this.parent.children.indexOf(this))||i===this.parent.children.length-1)throw new Error("Already at the last node. "+this.debugInfo());return this.parent.children[i+1]},XMLNode.prototype.importDocument=function(doc){var clonedRoot;return(clonedRoot=doc.root().clone()).parent=this,clonedRoot.isRoot=!1,this.children.push(clonedRoot),this},XMLNode.prototype.debugInfo=function(name){var ref2,ref3;return null!=(name=name||this.name)||(null!=(ref2=this.parent)?ref2.name:void 0)?null==name?"parent: <"+this.parent.name+">":(null!=(ref3=this.parent)?ref3.name:void 0)?"node: <"+name+">, parent: <"+this.parent.name+">":"node: <"+name+">":""},XMLNode.prototype.ele=function(name,attributes,text){return this.element(name,attributes,text)},XMLNode.prototype.nod=function(name,attributes,text){return this.node(name,attributes,text)},XMLNode.prototype.txt=function(value){return this.text(value)},XMLNode.prototype.dat=function(value){return this.cdata(value)},XMLNode.prototype.com=function(value){return this.comment(value)},XMLNode.prototype.ins=function(target,value){return this.instruction(target,value)},XMLNode.prototype.doc=function(){return this.document()},XMLNode.prototype.dec=function(version,encoding,standalone){return this.declaration(version,encoding,standalone)},XMLNode.prototype.e=function(name,attributes,text){return this.element(name,attributes,text)},XMLNode.prototype.n=function(name,attributes,text){return this.node(name,attributes,text)},XMLNode.prototype.t=function(value){return this.text(value)},XMLNode.prototype.d=function(value){return this.cdata(value)},XMLNode.prototype.c=function(value){return this.comment(value)},XMLNode.prototype.r=function(value){return this.raw(value)},XMLNode.prototype.i=function(target,value){return this.instruction(target,value)},XMLNode.prototype.u=function(){return this.up()},XMLNode.prototype.importXMLBuilder=function(doc){return this.importDocument(doc)},XMLNode.prototype.replaceChild=function(newChild,oldChild){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLNode.prototype.removeChild=function(oldChild){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLNode.prototype.appendChild=function(newChild){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLNode.prototype.hasChildNodes=function(){return 0!==this.children.length},XMLNode.prototype.cloneNode=function(deep){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLNode.prototype.normalize=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLNode.prototype.isSupported=function(feature,version){return!0},XMLNode.prototype.hasAttributes=function(){return 0!==this.attribs.length},XMLNode.prototype.compareDocumentPosition=function(other){var res;return this,this===other?0:this.document()!==other.document()?(res=DocumentPosition$1.Disconnected|DocumentPosition$1.ImplementationSpecific,Math.random()<.5?res|=DocumentPosition$1.Preceding:res|=DocumentPosition$1.Following,res):this.isAncestor(other)?DocumentPosition$1.Contains|DocumentPosition$1.Preceding:this.isDescendant(other)?DocumentPosition$1.Contains|DocumentPosition$1.Following:this.isPreceding(other)?DocumentPosition$1.Preceding:DocumentPosition$1.Following},XMLNode.prototype.isSameNode=function(other){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLNode.prototype.lookupPrefix=function(namespaceURI){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLNode.prototype.isDefaultNamespace=function(namespaceURI){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLNode.prototype.lookupNamespaceURI=function(prefix){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLNode.prototype.isEqualNode=function(node){var i,j,ref2;if(node.nodeType!==this.nodeType)return!1;if(node.children.length!==this.children.length)return!1;for(i=j=0,ref2=this.children.length-1;0<=ref2?j<=ref2:j>=ref2;i=0<=ref2?++j:--j)if(!this.children[i].isEqualNode(node.children[i]))return!1;return!0},XMLNode.prototype.getFeature=function(feature,version){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLNode.prototype.setUserData=function(key,data,handler){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLNode.prototype.getUserData=function(key){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLNode.prototype.contains=function(other){return!!other&&(other===this||this.isDescendant(other))},XMLNode.prototype.isDescendant=function(node){var child,j,len,ref2;for(j=0,len=(ref2=this.children).length;j<len;j++){if(node===(child=ref2[j]))return!0;if(child.isDescendant(node))return!0}return!1},XMLNode.prototype.isAncestor=function(node){return node.isDescendant(this)},XMLNode.prototype.isPreceding=function(node){var nodePos,thisPos;return nodePos=this.treePosition(node),thisPos=this.treePosition(this),-1!==nodePos&&-1!==thisPos&&nodePos<thisPos},XMLNode.prototype.isFollowing=function(node){var nodePos,thisPos;return nodePos=this.treePosition(node),thisPos=this.treePosition(this),-1!==nodePos&&-1!==thisPos&&nodePos>thisPos},XMLNode.prototype.treePosition=function(node){var found,pos;return pos=0,found=!1,this.foreachTreeNode(this.document(),(function(childNode){if(pos++,!found&&childNode===node)return found=!0})),found?pos:-1},XMLNode.prototype.foreachTreeNode=function(node,func){var child,j,len,ref2,res;for(node||(node=this.document()),j=0,len=(ref2=node.children).length;j<len;j++){if(res=func(child=ref2[j]))return res;if(res=this.foreachTreeNode(child,func))return res}},XMLNode}()}).call(commonjsGlobal)})),XMLStringifier=createCommonjsModule((function(module){(function(){var bind=function(fn,me){return function(){return fn.apply(me,arguments)}},hasProp={}.hasOwnProperty;module.exports=function(){function XMLStringifier(options){var key,ref,value;for(key in this.assertLegalName=bind(this.assertLegalName,this),this.assertLegalChar=bind(this.assertLegalChar,this),options||(options={}),this.options=options,this.options.version||(this.options.version="1.0"),ref=options.stringify||{})hasProp.call(ref,key)&&(value=ref[key],this[key]=value)}return XMLStringifier.prototype.name=function(val){return this.options.noValidation?val:this.assertLegalName(""+val||"")},XMLStringifier.prototype.text=function(val){return this.options.noValidation?val:this.assertLegalChar(this.textEscape(""+val||""))},XMLStringifier.prototype.cdata=function(val){return this.options.noValidation?val:(val=(val=""+val||"").replace("]]>","]]]]><![CDATA[>"),this.assertLegalChar(val))},XMLStringifier.prototype.comment=function(val){if(this.options.noValidation)return val;if((val=""+val||"").match(/--/))throw new Error("Comment text cannot contain double-hypen: "+val);return this.assertLegalChar(val)},XMLStringifier.prototype.raw=function(val){return this.options.noValidation?val:""+val||""},XMLStringifier.prototype.attValue=function(val){return this.options.noValidation?val:this.assertLegalChar(this.attEscape(val=""+val||""))},XMLStringifier.prototype.insTarget=function(val){return this.options.noValidation?val:this.assertLegalChar(""+val||"")},XMLStringifier.prototype.insValue=function(val){if(this.options.noValidation)return val;if((val=""+val||"").match(/\?>/))throw new Error("Invalid processing instruction value: "+val);return this.assertLegalChar(val)},XMLStringifier.prototype.xmlVersion=function(val){if(this.options.noValidation)return val;if(!(val=""+val||"").match(/1\.[0-9]+/))throw new Error("Invalid version number: "+val);return val},XMLStringifier.prototype.xmlEncoding=function(val){if(this.options.noValidation)return val;if(!(val=""+val||"").match(/^[A-Za-z](?:[A-Za-z0-9._-])*$/))throw new Error("Invalid encoding: "+val);return this.assertLegalChar(val)},XMLStringifier.prototype.xmlStandalone=function(val){return this.options.noValidation?val:val?"yes":"no"},XMLStringifier.prototype.dtdPubID=function(val){return this.options.noValidation?val:this.assertLegalChar(""+val||"")},XMLStringifier.prototype.dtdSysID=function(val){return this.options.noValidation?val:this.assertLegalChar(""+val||"")},XMLStringifier.prototype.dtdElementValue=function(val){return this.options.noValidation?val:this.assertLegalChar(""+val||"")},XMLStringifier.prototype.dtdAttType=function(val){return this.options.noValidation?val:this.assertLegalChar(""+val||"")},XMLStringifier.prototype.dtdAttDefault=function(val){return this.options.noValidation?val:this.assertLegalChar(""+val||"")},XMLStringifier.prototype.dtdEntityValue=function(val){return this.options.noValidation?val:this.assertLegalChar(""+val||"")},XMLStringifier.prototype.dtdNData=function(val){return this.options.noValidation?val:this.assertLegalChar(""+val||"")},XMLStringifier.prototype.convertAttKey="@",XMLStringifier.prototype.convertPIKey="?",XMLStringifier.prototype.convertTextKey="#text",XMLStringifier.prototype.convertCDataKey="#cdata",XMLStringifier.prototype.convertCommentKey="#comment",XMLStringifier.prototype.convertRawKey="#raw",XMLStringifier.prototype.assertLegalChar=function(str){var regex,res;if(this.options.noValidation)return str;if(regex="","1.0"===this.options.version){if(regex=/[\0-\x08\x0B\f\x0E-\x1F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,res=str.match(regex))throw new Error("Invalid character in string: "+str+" at index "+res.index)}else if("1.1"===this.options.version&&(regex=/[\0\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,res=str.match(regex)))throw new Error("Invalid character in string: "+str+" at index "+res.index);return str},XMLStringifier.prototype.assertLegalName=function(str){var regex;if(this.options.noValidation)return str;if(this.assertLegalChar(str),regex=/^([:A-Z_a-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])([\x2D\.0-:A-Z_a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*$/,!str.match(regex))throw new Error("Invalid character in name");return str},XMLStringifier.prototype.textEscape=function(str){var ampregex;return this.options.noValidation?str:(ampregex=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,str.replace(ampregex,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#xD;"))},XMLStringifier.prototype.attEscape=function(str){var ampregex;return this.options.noValidation?str:(ampregex=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,str.replace(ampregex,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;"))},XMLStringifier}()}).call(commonjsGlobal)})),WriterState=createCommonjsModule((function(module){(function(){module.exports={None:0,OpenTag:1,InsideTag:2,CloseTag:3}}).call(commonjsGlobal)})),WriterState_1=WriterState.None,WriterState_2=WriterState.OpenTag,WriterState_3=WriterState.InsideTag,WriterState_4=WriterState.CloseTag,XMLWriterBase=createCommonjsModule((function(module){(function(){var NodeType$1,WriterState$1,assign,hasProp={}.hasOwnProperty;assign=Utility.assign,NodeType$1=NodeType,WriterState$1=WriterState,module.exports=function(){function XMLWriterBase(options){var key,ref,value;for(key in options||(options={}),this.options=options,ref=options.writer||{})hasProp.call(ref,key)&&(value=ref[key],this["_"+key]=this[key],this[key]=value)}return XMLWriterBase.prototype.filterOptions=function(options){var filteredOptions,ref,ref1,ref2,ref3,ref4,ref5,ref6;return options||(options={}),options=assign({},this.options,options),(filteredOptions={writer:this}).pretty=options.pretty||!1,filteredOptions.allowEmpty=options.allowEmpty||!1,filteredOptions.indent=null!=(ref=options.indent)?ref:"  ",filteredOptions.newline=null!=(ref1=options.newline)?ref1:"\n",filteredOptions.offset=null!=(ref2=options.offset)?ref2:0,filteredOptions.dontPrettyTextNodes=null!=(ref3=null!=(ref4=options.dontPrettyTextNodes)?ref4:options.dontprettytextnodes)?ref3:0,filteredOptions.spaceBeforeSlash=null!=(ref5=null!=(ref6=options.spaceBeforeSlash)?ref6:options.spacebeforeslash)?ref5:"",!0===filteredOptions.spaceBeforeSlash&&(filteredOptions.spaceBeforeSlash=" "),filteredOptions.suppressPrettyCount=0,filteredOptions.user={},filteredOptions.state=WriterState$1.None,filteredOptions},XMLWriterBase.prototype.indent=function(node,options,level){var indentLevel;return!options.pretty||options.suppressPrettyCount?"":options.pretty&&(indentLevel=(level||0)+options.offset+1)>0?new Array(indentLevel).join(options.indent):""},XMLWriterBase.prototype.endline=function(node,options,level){return!options.pretty||options.suppressPrettyCount?"":options.newline},XMLWriterBase.prototype.attribute=function(att,options,level){var r;return this.openAttribute(att,options,level),r=" "+att.name+'="'+att.value+'"',this.closeAttribute(att,options,level),r},XMLWriterBase.prototype.cdata=function(node,options,level){var r;return this.openNode(node,options,level),options.state=WriterState$1.OpenTag,r=this.indent(node,options,level)+"<![CDATA[",options.state=WriterState$1.InsideTag,r+=node.value,options.state=WriterState$1.CloseTag,r+="]]>"+this.endline(node,options,level),options.state=WriterState$1.None,this.closeNode(node,options,level),r},XMLWriterBase.prototype.comment=function(node,options,level){var r;return this.openNode(node,options,level),options.state=WriterState$1.OpenTag,r=this.indent(node,options,level)+"\x3c!-- ",options.state=WriterState$1.InsideTag,r+=node.value,options.state=WriterState$1.CloseTag,r+=" --\x3e"+this.endline(node,options,level),options.state=WriterState$1.None,this.closeNode(node,options,level),r},XMLWriterBase.prototype.declaration=function(node,options,level){var r;return this.openNode(node,options,level),options.state=WriterState$1.OpenTag,r=this.indent(node,options,level)+"<?xml",options.state=WriterState$1.InsideTag,r+=' version="'+node.version+'"',null!=node.encoding&&(r+=' encoding="'+node.encoding+'"'),null!=node.standalone&&(r+=' standalone="'+node.standalone+'"'),options.state=WriterState$1.CloseTag,r+=options.spaceBeforeSlash+"?>",r+=this.endline(node,options,level),options.state=WriterState$1.None,this.closeNode(node,options,level),r},XMLWriterBase.prototype.docType=function(node,options,level){var child,i,len,r,ref;if(level||(level=0),this.openNode(node,options,level),options.state=WriterState$1.OpenTag,r=this.indent(node,options,level),r+="<!DOCTYPE "+node.root().name,node.pubID&&node.sysID?r+=' PUBLIC "'+node.pubID+'" "'+node.sysID+'"':node.sysID&&(r+=' SYSTEM "'+node.sysID+'"'),node.children.length>0){for(r+=" [",r+=this.endline(node,options,level),options.state=WriterState$1.InsideTag,i=0,len=(ref=node.children).length;i<len;i++)child=ref[i],r+=this.writeChildNode(child,options,level+1);options.state=WriterState$1.CloseTag,r+="]"}return options.state=WriterState$1.CloseTag,r+=options.spaceBeforeSlash+">",r+=this.endline(node,options,level),options.state=WriterState$1.None,this.closeNode(node,options,level),r},XMLWriterBase.prototype.element=function(node,options,level){var att,child,childNodeCount,firstChildNode,i,j,len,len1,name,prettySuppressed,r,ref,ref1,ref2;for(name in level||(level=0),prettySuppressed=!1,r="",this.openNode(node,options,level),options.state=WriterState$1.OpenTag,r+=this.indent(node,options,level)+"<"+node.name,ref=node.attribs)hasProp.call(ref,name)&&(att=ref[name],r+=this.attribute(att,options,level));if(firstChildNode=0===(childNodeCount=node.children.length)?null:node.children[0],0===childNodeCount||node.children.every((function(e){return(e.type===NodeType$1.Text||e.type===NodeType$1.Raw)&&""===e.value})))options.allowEmpty?(r+=">",options.state=WriterState$1.CloseTag,r+="</"+node.name+">"+this.endline(node,options,level)):(options.state=WriterState$1.CloseTag,r+=options.spaceBeforeSlash+"/>"+this.endline(node,options,level));else if(!options.pretty||1!==childNodeCount||firstChildNode.type!==NodeType$1.Text&&firstChildNode.type!==NodeType$1.Raw||null==firstChildNode.value){if(options.dontPrettyTextNodes)for(i=0,len=(ref1=node.children).length;i<len;i++)if(((child=ref1[i]).type===NodeType$1.Text||child.type===NodeType$1.Raw)&&null!=child.value){options.suppressPrettyCount++,prettySuppressed=!0;break}for(r+=">"+this.endline(node,options,level),options.state=WriterState$1.InsideTag,j=0,len1=(ref2=node.children).length;j<len1;j++)child=ref2[j],r+=this.writeChildNode(child,options,level+1);options.state=WriterState$1.CloseTag,r+=this.indent(node,options,level)+"</"+node.name+">",prettySuppressed&&options.suppressPrettyCount--,r+=this.endline(node,options,level),options.state=WriterState$1.None}else r+=">",options.state=WriterState$1.InsideTag,options.suppressPrettyCount++,prettySuppressed=!0,r+=this.writeChildNode(firstChildNode,options,level+1),options.suppressPrettyCount--,prettySuppressed=!1,options.state=WriterState$1.CloseTag,r+="</"+node.name+">"+this.endline(node,options,level);return this.closeNode(node,options,level),r},XMLWriterBase.prototype.writeChildNode=function(node,options,level){switch(node.type){case NodeType$1.CData:return this.cdata(node,options,level);case NodeType$1.Comment:return this.comment(node,options,level);case NodeType$1.Element:return this.element(node,options,level);case NodeType$1.Raw:return this.raw(node,options,level);case NodeType$1.Text:return this.text(node,options,level);case NodeType$1.ProcessingInstruction:return this.processingInstruction(node,options,level);case NodeType$1.Dummy:return"";case NodeType$1.Declaration:return this.declaration(node,options,level);case NodeType$1.DocType:return this.docType(node,options,level);case NodeType$1.AttributeDeclaration:return this.dtdAttList(node,options,level);case NodeType$1.ElementDeclaration:return this.dtdElement(node,options,level);case NodeType$1.EntityDeclaration:return this.dtdEntity(node,options,level);case NodeType$1.NotationDeclaration:return this.dtdNotation(node,options,level);default:throw new Error("Unknown XML node type: "+node.constructor.name)}},XMLWriterBase.prototype.processingInstruction=function(node,options,level){var r;return this.openNode(node,options,level),options.state=WriterState$1.OpenTag,r=this.indent(node,options,level)+"<?",options.state=WriterState$1.InsideTag,r+=node.target,node.value&&(r+=" "+node.value),options.state=WriterState$1.CloseTag,r+=options.spaceBeforeSlash+"?>",r+=this.endline(node,options,level),options.state=WriterState$1.None,this.closeNode(node,options,level),r},XMLWriterBase.prototype.raw=function(node,options,level){var r;return this.openNode(node,options,level),options.state=WriterState$1.OpenTag,r=this.indent(node,options,level),options.state=WriterState$1.InsideTag,r+=node.value,options.state=WriterState$1.CloseTag,r+=this.endline(node,options,level),options.state=WriterState$1.None,this.closeNode(node,options,level),r},XMLWriterBase.prototype.text=function(node,options,level){var r;return this.openNode(node,options,level),options.state=WriterState$1.OpenTag,r=this.indent(node,options,level),options.state=WriterState$1.InsideTag,r+=node.value,options.state=WriterState$1.CloseTag,r+=this.endline(node,options,level),options.state=WriterState$1.None,this.closeNode(node,options,level),r},XMLWriterBase.prototype.dtdAttList=function(node,options,level){var r;return this.openNode(node,options,level),options.state=WriterState$1.OpenTag,r=this.indent(node,options,level)+"<!ATTLIST",options.state=WriterState$1.InsideTag,r+=" "+node.elementName+" "+node.attributeName+" "+node.attributeType,"#DEFAULT"!==node.defaultValueType&&(r+=" "+node.defaultValueType),node.defaultValue&&(r+=' "'+node.defaultValue+'"'),options.state=WriterState$1.CloseTag,r+=options.spaceBeforeSlash+">"+this.endline(node,options,level),options.state=WriterState$1.None,this.closeNode(node,options,level),r},XMLWriterBase.prototype.dtdElement=function(node,options,level){var r;return this.openNode(node,options,level),options.state=WriterState$1.OpenTag,r=this.indent(node,options,level)+"<!ELEMENT",options.state=WriterState$1.InsideTag,r+=" "+node.name+" "+node.value,options.state=WriterState$1.CloseTag,r+=options.spaceBeforeSlash+">"+this.endline(node,options,level),options.state=WriterState$1.None,this.closeNode(node,options,level),r},XMLWriterBase.prototype.dtdEntity=function(node,options,level){var r;return this.openNode(node,options,level),options.state=WriterState$1.OpenTag,r=this.indent(node,options,level)+"<!ENTITY",options.state=WriterState$1.InsideTag,node.pe&&(r+=" %"),r+=" "+node.name,node.value?r+=' "'+node.value+'"':(node.pubID&&node.sysID?r+=' PUBLIC "'+node.pubID+'" "'+node.sysID+'"':node.sysID&&(r+=' SYSTEM "'+node.sysID+'"'),node.nData&&(r+=" NDATA "+node.nData)),options.state=WriterState$1.CloseTag,r+=options.spaceBeforeSlash+">"+this.endline(node,options,level),options.state=WriterState$1.None,this.closeNode(node,options,level),r},XMLWriterBase.prototype.dtdNotation=function(node,options,level){var r;return this.openNode(node,options,level),options.state=WriterState$1.OpenTag,r=this.indent(node,options,level)+"<!NOTATION",options.state=WriterState$1.InsideTag,r+=" "+node.name,node.pubID&&node.sysID?r+=' PUBLIC "'+node.pubID+'" "'+node.sysID+'"':node.pubID?r+=' PUBLIC "'+node.pubID+'"':node.sysID&&(r+=' SYSTEM "'+node.sysID+'"'),options.state=WriterState$1.CloseTag,r+=options.spaceBeforeSlash+">"+this.endline(node,options,level),options.state=WriterState$1.None,this.closeNode(node,options,level),r},XMLWriterBase.prototype.openNode=function(node,options,level){},XMLWriterBase.prototype.closeNode=function(node,options,level){},XMLWriterBase.prototype.openAttribute=function(att,options,level){},XMLWriterBase.prototype.closeAttribute=function(att,options,level){},XMLWriterBase}()}).call(commonjsGlobal)})),XMLStringWriter=createCommonjsModule((function(module){(function(){var XMLWriterBase$1,hasProp={}.hasOwnProperty;XMLWriterBase$1=XMLWriterBase,module.exports=function(superClass){function XMLStringWriter(options){XMLStringWriter.__super__.constructor.call(this,options)}return function(child,parent){for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);function ctor(){this.constructor=child}ctor.prototype=(parent||{}).prototype,child.prototype=new ctor,child.__super__=(parent||{}).prototype}(XMLStringWriter,superClass),XMLStringWriter.prototype.document=function(doc,options){var child,i,len,r,ref;for(options=this.filterOptions(options),r="",i=0,len=(ref=doc.children).length;i<len;i++)child=ref[i],r+=this.writeChildNode(child,options,0);return options.pretty&&r.slice(-options.newline.length)===options.newline&&(r=r.slice(0,-options.newline.length)),r},XMLStringWriter}(XMLWriterBase$1)}).call(commonjsGlobal)})),XMLDocument=createCommonjsModule((function(module){(function(){var NodeType$1,XMLDOMConfiguration$1,XMLDOMImplementation$1,XMLNode$1,XMLStringWriter$1,XMLStringifier$1,isPlainObject,hasProp={}.hasOwnProperty;isPlainObject=Utility.isPlainObject,XMLDOMImplementation$1=XMLDOMImplementation,XMLDOMConfiguration$1=XMLDOMConfiguration,XMLNode$1=XMLNode,NodeType$1=NodeType,XMLStringifier$1=XMLStringifier,XMLStringWriter$1=XMLStringWriter,module.exports=function(superClass){function XMLDocument(options){XMLDocument.__super__.constructor.call(this,null),this.name="#document",this.type=NodeType$1.Document,this.documentURI=null,this.domConfig=new XMLDOMConfiguration$1,options||(options={}),options.writer||(options.writer=new XMLStringWriter$1),this.options=options,this.stringify=new XMLStringifier$1(options)}return function(child,parent){for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);function ctor(){this.constructor=child}ctor.prototype=(parent||{}).prototype,child.prototype=new ctor,child.__super__=(parent||{}).prototype}(XMLDocument,superClass),Object.defineProperty(XMLDocument.prototype,"implementation",{value:new XMLDOMImplementation$1}),Object.defineProperty(XMLDocument.prototype,"doctype",{get:function(){var child,i,len,ref;for(i=0,len=(ref=this.children).length;i<len;i++)if((child=ref[i]).type===NodeType$1.DocType)return child;return null}}),Object.defineProperty(XMLDocument.prototype,"documentElement",{get:function(){return this.rootObject||null}}),Object.defineProperty(XMLDocument.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(XMLDocument.prototype,"strictErrorChecking",{get:function(){return!1}}),Object.defineProperty(XMLDocument.prototype,"xmlEncoding",{get:function(){return 0!==this.children.length&&this.children[0].type===NodeType$1.Declaration?this.children[0].encoding:null}}),Object.defineProperty(XMLDocument.prototype,"xmlStandalone",{get:function(){return 0!==this.children.length&&this.children[0].type===NodeType$1.Declaration&&"yes"===this.children[0].standalone}}),Object.defineProperty(XMLDocument.prototype,"xmlVersion",{get:function(){return 0!==this.children.length&&this.children[0].type===NodeType$1.Declaration?this.children[0].version:"1.0"}}),Object.defineProperty(XMLDocument.prototype,"URL",{get:function(){return this.documentURI}}),Object.defineProperty(XMLDocument.prototype,"origin",{get:function(){return null}}),Object.defineProperty(XMLDocument.prototype,"compatMode",{get:function(){return null}}),Object.defineProperty(XMLDocument.prototype,"characterSet",{get:function(){return null}}),Object.defineProperty(XMLDocument.prototype,"contentType",{get:function(){return null}}),XMLDocument.prototype.end=function(writer){var writerOptions;return writerOptions={},writer?isPlainObject(writer)&&(writerOptions=writer,writer=this.options.writer):writer=this.options.writer,writer.document(this,writer.filterOptions(writerOptions))},XMLDocument.prototype.toString=function(options){return this.options.writer.document(this,this.options.writer.filterOptions(options))},XMLDocument.prototype.createElement=function(tagName){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLDocument.prototype.createDocumentFragment=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLDocument.prototype.createTextNode=function(data){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLDocument.prototype.createComment=function(data){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLDocument.prototype.createCDATASection=function(data){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLDocument.prototype.createProcessingInstruction=function(target,data){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLDocument.prototype.createAttribute=function(name){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLDocument.prototype.createEntityReference=function(name){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLDocument.prototype.getElementsByTagName=function(tagname){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLDocument.prototype.importNode=function(importedNode,deep){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLDocument.prototype.createElementNS=function(namespaceURI,qualifiedName){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLDocument.prototype.createAttributeNS=function(namespaceURI,qualifiedName){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLDocument.prototype.getElementsByTagNameNS=function(namespaceURI,localName){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLDocument.prototype.getElementById=function(elementId){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLDocument.prototype.adoptNode=function(source){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLDocument.prototype.normalizeDocument=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLDocument.prototype.renameNode=function(node,namespaceURI,qualifiedName){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLDocument.prototype.getElementsByClassName=function(classNames){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLDocument.prototype.createEvent=function(eventInterface){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLDocument.prototype.createRange=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLDocument.prototype.createNodeIterator=function(root,whatToShow,filter){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLDocument.prototype.createTreeWalker=function(root,whatToShow,filter){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLDocument}(XMLNode$1)}).call(commonjsGlobal)})),XMLDocumentCB=createCommonjsModule((function(module){(function(){var NodeType$1,WriterState$1,XMLAttribute$1,XMLCData$1,XMLComment$1,XMLDTDAttList$1,XMLDTDElement$1,XMLDTDEntity$1,XMLDTDNotation$1,XMLDeclaration$1,XMLDocType$1,XMLDocument$1,XMLElement$1,XMLProcessingInstruction$1,XMLRaw$1,XMLStringWriter$1,XMLStringifier$1,XMLText$1,getValue,isFunction,isObject,isPlainObject,ref,hasProp={}.hasOwnProperty;isObject=(ref=Utility).isObject,isFunction=ref.isFunction,isPlainObject=ref.isPlainObject,getValue=ref.getValue,NodeType$1=NodeType,XMLDocument$1=XMLDocument,XMLElement$1=XMLElement,XMLCData$1=XMLCData,XMLComment$1=XMLComment,XMLRaw$1=XMLRaw,XMLText$1=XMLText,XMLProcessingInstruction$1=XMLProcessingInstruction,XMLDeclaration$1=XMLDeclaration,XMLDocType$1=XMLDocType,XMLDTDAttList$1=XMLDTDAttList,XMLDTDEntity$1=XMLDTDEntity,XMLDTDElement$1=XMLDTDElement,XMLDTDNotation$1=XMLDTDNotation,XMLAttribute$1=XMLAttribute,XMLStringifier$1=XMLStringifier,XMLStringWriter$1=XMLStringWriter,WriterState$1=WriterState,module.exports=function(){function XMLDocumentCB(options,onData,onEnd){var writerOptions;this.name="?xml",this.type=NodeType$1.Document,options||(options={}),writerOptions={},options.writer?isPlainObject(options.writer)&&(writerOptions=options.writer,options.writer=new XMLStringWriter$1):options.writer=new XMLStringWriter$1,this.options=options,this.writer=options.writer,this.writerOptions=this.writer.filterOptions(writerOptions),this.stringify=new XMLStringifier$1(options),this.onDataCallback=onData||function(){},this.onEndCallback=onEnd||function(){},this.currentNode=null,this.currentLevel=-1,this.openTags={},this.documentStarted=!1,this.documentCompleted=!1,this.root=null}return XMLDocumentCB.prototype.createChildNode=function(node){var att,attName,attributes,child,i,len,ref1,ref2;switch(node.type){case NodeType$1.CData:this.cdata(node.value);break;case NodeType$1.Comment:this.comment(node.value);break;case NodeType$1.Element:for(attName in attributes={},ref1=node.attribs)hasProp.call(ref1,attName)&&(att=ref1[attName],attributes[attName]=att.value);this.node(node.name,attributes);break;case NodeType$1.Dummy:this.dummy();break;case NodeType$1.Raw:this.raw(node.value);break;case NodeType$1.Text:this.text(node.value);break;case NodeType$1.ProcessingInstruction:this.instruction(node.target,node.value);break;default:throw new Error("This XML node type is not supported in a JS object: "+node.constructor.name)}for(i=0,len=(ref2=node.children).length;i<len;i++)child=ref2[i],this.createChildNode(child),child.type===NodeType$1.Element&&this.up();return this},XMLDocumentCB.prototype.dummy=function(){return this},XMLDocumentCB.prototype.node=function(name,attributes,text){var ref1;if(null==name)throw new Error("Missing node name.");if(this.root&&-1===this.currentLevel)throw new Error("Document can only have one root node. "+this.debugInfo(name));return this.openCurrent(),name=getValue(name),null==attributes&&(attributes={}),attributes=getValue(attributes),isObject(attributes)||(text=(ref1=[attributes,text])[0],attributes=ref1[1]),this.currentNode=new XMLElement$1(this,name,attributes),this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,null!=text&&this.text(text),this},XMLDocumentCB.prototype.element=function(name,attributes,text){var child,i,len,oldValidationFlag,ref1,root;if(this.currentNode&&this.currentNode.type===NodeType$1.DocType)this.dtdElement.apply(this,arguments);else if(Array.isArray(name)||isObject(name)||isFunction(name))for(oldValidationFlag=this.options.noValidation,this.options.noValidation=!0,(root=new XMLDocument$1(this.options).element("TEMP_ROOT")).element(name),this.options.noValidation=oldValidationFlag,i=0,len=(ref1=root.children).length;i<len;i++)child=ref1[i],this.createChildNode(child),child.type===NodeType$1.Element&&this.up();else this.node(name,attributes,text);return this},XMLDocumentCB.prototype.attribute=function(name,value){var attName,attValue;if(!this.currentNode||this.currentNode.children)throw new Error("att() can only be used immediately after an ele() call in callback mode. "+this.debugInfo(name));if(null!=name&&(name=getValue(name)),isObject(name))for(attName in name)hasProp.call(name,attName)&&(attValue=name[attName],this.attribute(attName,attValue));else isFunction(value)&&(value=value.apply()),this.options.keepNullAttributes&&null==value?this.currentNode.attribs[name]=new XMLAttribute$1(this,name,""):null!=value&&(this.currentNode.attribs[name]=new XMLAttribute$1(this,name,value));return this},XMLDocumentCB.prototype.text=function(value){var node;return this.openCurrent(),node=new XMLText$1(this,value),this.onData(this.writer.text(node,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},XMLDocumentCB.prototype.cdata=function(value){var node;return this.openCurrent(),node=new XMLCData$1(this,value),this.onData(this.writer.cdata(node,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},XMLDocumentCB.prototype.comment=function(value){var node;return this.openCurrent(),node=new XMLComment$1(this,value),this.onData(this.writer.comment(node,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},XMLDocumentCB.prototype.raw=function(value){var node;return this.openCurrent(),node=new XMLRaw$1(this,value),this.onData(this.writer.raw(node,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},XMLDocumentCB.prototype.instruction=function(target,value){var i,insTarget,insValue,len,node;if(this.openCurrent(),null!=target&&(target=getValue(target)),null!=value&&(value=getValue(value)),Array.isArray(target))for(i=0,len=target.length;i<len;i++)insTarget=target[i],this.instruction(insTarget);else if(isObject(target))for(insTarget in target)hasProp.call(target,insTarget)&&(insValue=target[insTarget],this.instruction(insTarget,insValue));else isFunction(value)&&(value=value.apply()),node=new XMLProcessingInstruction$1(this,target,value),this.onData(this.writer.processingInstruction(node,this.writerOptions,this.currentLevel+1),this.currentLevel+1);return this},XMLDocumentCB.prototype.declaration=function(version,encoding,standalone){var node;if(this.openCurrent(),this.documentStarted)throw new Error("declaration() must be the first node.");return node=new XMLDeclaration$1(this,version,encoding,standalone),this.onData(this.writer.declaration(node,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},XMLDocumentCB.prototype.doctype=function(root,pubID,sysID){if(this.openCurrent(),null==root)throw new Error("Missing root node name.");if(this.root)throw new Error("dtd() must come before the root node.");return this.currentNode=new XMLDocType$1(this,pubID,sysID),this.currentNode.rootNodeName=root,this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,this},XMLDocumentCB.prototype.dtdElement=function(name,value){var node;return this.openCurrent(),node=new XMLDTDElement$1(this,name,value),this.onData(this.writer.dtdElement(node,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},XMLDocumentCB.prototype.attList=function(elementName,attributeName,attributeType,defaultValueType,defaultValue){var node;return this.openCurrent(),node=new XMLDTDAttList$1(this,elementName,attributeName,attributeType,defaultValueType,defaultValue),this.onData(this.writer.dtdAttList(node,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},XMLDocumentCB.prototype.entity=function(name,value){var node;return this.openCurrent(),node=new XMLDTDEntity$1(this,!1,name,value),this.onData(this.writer.dtdEntity(node,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},XMLDocumentCB.prototype.pEntity=function(name,value){var node;return this.openCurrent(),node=new XMLDTDEntity$1(this,!0,name,value),this.onData(this.writer.dtdEntity(node,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},XMLDocumentCB.prototype.notation=function(name,value){var node;return this.openCurrent(),node=new XMLDTDNotation$1(this,name,value),this.onData(this.writer.dtdNotation(node,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},XMLDocumentCB.prototype.up=function(){if(this.currentLevel<0)throw new Error("The document node has no parent.");return this.currentNode?(this.currentNode.children?this.closeNode(this.currentNode):this.openNode(this.currentNode),this.currentNode=null):this.closeNode(this.openTags[this.currentLevel]),delete this.openTags[this.currentLevel],this.currentLevel--,this},XMLDocumentCB.prototype.end=function(){for(;this.currentLevel>=0;)this.up();return this.onEnd()},XMLDocumentCB.prototype.openCurrent=function(){if(this.currentNode)return this.currentNode.children=!0,this.openNode(this.currentNode)},XMLDocumentCB.prototype.openNode=function(node){var att,chunk,name,ref1;if(!node.isOpen){if(this.root||0!==this.currentLevel||node.type!==NodeType$1.Element||(this.root=node),chunk="",node.type===NodeType$1.Element){for(name in this.writerOptions.state=WriterState$1.OpenTag,chunk=this.writer.indent(node,this.writerOptions,this.currentLevel)+"<"+node.name,ref1=node.attribs)hasProp.call(ref1,name)&&(att=ref1[name],chunk+=this.writer.attribute(att,this.writerOptions,this.currentLevel));chunk+=(node.children?">":"/>")+this.writer.endline(node,this.writerOptions,this.currentLevel),this.writerOptions.state=WriterState$1.InsideTag}else this.writerOptions.state=WriterState$1.OpenTag,chunk=this.writer.indent(node,this.writerOptions,this.currentLevel)+"<!DOCTYPE "+node.rootNodeName,node.pubID&&node.sysID?chunk+=' PUBLIC "'+node.pubID+'" "'+node.sysID+'"':node.sysID&&(chunk+=' SYSTEM "'+node.sysID+'"'),node.children?(chunk+=" [",this.writerOptions.state=WriterState$1.InsideTag):(this.writerOptions.state=WriterState$1.CloseTag,chunk+=">"),chunk+=this.writer.endline(node,this.writerOptions,this.currentLevel);return this.onData(chunk,this.currentLevel),node.isOpen=!0}},XMLDocumentCB.prototype.closeNode=function(node){var chunk;if(!node.isClosed)return chunk="",this.writerOptions.state=WriterState$1.CloseTag,chunk=node.type===NodeType$1.Element?this.writer.indent(node,this.writerOptions,this.currentLevel)+"</"+node.name+">"+this.writer.endline(node,this.writerOptions,this.currentLevel):this.writer.indent(node,this.writerOptions,this.currentLevel)+"]>"+this.writer.endline(node,this.writerOptions,this.currentLevel),this.writerOptions.state=WriterState$1.None,this.onData(chunk,this.currentLevel),node.isClosed=!0},XMLDocumentCB.prototype.onData=function(chunk,level){return this.documentStarted=!0,this.onDataCallback(chunk,level+1)},XMLDocumentCB.prototype.onEnd=function(){return this.documentCompleted=!0,this.onEndCallback()},XMLDocumentCB.prototype.debugInfo=function(name){return null==name?"":"node: <"+name+">"},XMLDocumentCB.prototype.ele=function(){return this.element.apply(this,arguments)},XMLDocumentCB.prototype.nod=function(name,attributes,text){return this.node(name,attributes,text)},XMLDocumentCB.prototype.txt=function(value){return this.text(value)},XMLDocumentCB.prototype.dat=function(value){return this.cdata(value)},XMLDocumentCB.prototype.com=function(value){return this.comment(value)},XMLDocumentCB.prototype.ins=function(target,value){return this.instruction(target,value)},XMLDocumentCB.prototype.dec=function(version,encoding,standalone){return this.declaration(version,encoding,standalone)},XMLDocumentCB.prototype.dtd=function(root,pubID,sysID){return this.doctype(root,pubID,sysID)},XMLDocumentCB.prototype.e=function(name,attributes,text){return this.element(name,attributes,text)},XMLDocumentCB.prototype.n=function(name,attributes,text){return this.node(name,attributes,text)},XMLDocumentCB.prototype.t=function(value){return this.text(value)},XMLDocumentCB.prototype.d=function(value){return this.cdata(value)},XMLDocumentCB.prototype.c=function(value){return this.comment(value)},XMLDocumentCB.prototype.r=function(value){return this.raw(value)},XMLDocumentCB.prototype.i=function(target,value){return this.instruction(target,value)},XMLDocumentCB.prototype.att=function(){return this.currentNode&&this.currentNode.type===NodeType$1.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},XMLDocumentCB.prototype.a=function(){return this.currentNode&&this.currentNode.type===NodeType$1.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},XMLDocumentCB.prototype.ent=function(name,value){return this.entity(name,value)},XMLDocumentCB.prototype.pent=function(name,value){return this.pEntity(name,value)},XMLDocumentCB.prototype.not=function(name,value){return this.notation(name,value)},XMLDocumentCB}()}).call(commonjsGlobal)})),XMLStreamWriter=createCommonjsModule((function(module){(function(){var NodeType$1,WriterState$1,XMLWriterBase$1,hasProp={}.hasOwnProperty;NodeType$1=NodeType,XMLWriterBase$1=XMLWriterBase,WriterState$1=WriterState,module.exports=function(superClass){function XMLStreamWriter(stream,options){this.stream=stream,XMLStreamWriter.__super__.constructor.call(this,options)}return function(child,parent){for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);function ctor(){this.constructor=child}ctor.prototype=(parent||{}).prototype,child.prototype=new ctor,child.__super__=(parent||{}).prototype}(XMLStreamWriter,superClass),XMLStreamWriter.prototype.endline=function(node,options,level){return node.isLastRootNode&&options.state===WriterState$1.CloseTag?"":XMLStreamWriter.__super__.endline.call(this,node,options,level)},XMLStreamWriter.prototype.document=function(doc,options){var child,i,j,k,len,len1,ref,ref1,results;for(i=j=0,len=(ref=doc.children).length;j<len;i=++j)(child=ref[i]).isLastRootNode=i===doc.children.length-1;for(options=this.filterOptions(options),results=[],k=0,len1=(ref1=doc.children).length;k<len1;k++)child=ref1[k],results.push(this.writeChildNode(child,options,0));return results},XMLStreamWriter.prototype.attribute=function(att,options,level){return this.stream.write(XMLStreamWriter.__super__.attribute.call(this,att,options,level))},XMLStreamWriter.prototype.cdata=function(node,options,level){return this.stream.write(XMLStreamWriter.__super__.cdata.call(this,node,options,level))},XMLStreamWriter.prototype.comment=function(node,options,level){return this.stream.write(XMLStreamWriter.__super__.comment.call(this,node,options,level))},XMLStreamWriter.prototype.declaration=function(node,options,level){return this.stream.write(XMLStreamWriter.__super__.declaration.call(this,node,options,level))},XMLStreamWriter.prototype.docType=function(node,options,level){var child,j,len,ref;if(level||(level=0),this.openNode(node,options,level),options.state=WriterState$1.OpenTag,this.stream.write(this.indent(node,options,level)),this.stream.write("<!DOCTYPE "+node.root().name),node.pubID&&node.sysID?this.stream.write(' PUBLIC "'+node.pubID+'" "'+node.sysID+'"'):node.sysID&&this.stream.write(' SYSTEM "'+node.sysID+'"'),node.children.length>0){for(this.stream.write(" ["),this.stream.write(this.endline(node,options,level)),options.state=WriterState$1.InsideTag,j=0,len=(ref=node.children).length;j<len;j++)child=ref[j],this.writeChildNode(child,options,level+1);options.state=WriterState$1.CloseTag,this.stream.write("]")}return options.state=WriterState$1.CloseTag,this.stream.write(options.spaceBeforeSlash+">"),this.stream.write(this.endline(node,options,level)),options.state=WriterState$1.None,this.closeNode(node,options,level)},XMLStreamWriter.prototype.element=function(node,options,level){var att,child,childNodeCount,firstChildNode,j,len,name,ref,ref1;for(name in level||(level=0),this.openNode(node,options,level),options.state=WriterState$1.OpenTag,this.stream.write(this.indent(node,options,level)+"<"+node.name),ref=node.attribs)hasProp.call(ref,name)&&(att=ref[name],this.attribute(att,options,level));if(firstChildNode=0===(childNodeCount=node.children.length)?null:node.children[0],0===childNodeCount||node.children.every((function(e){return(e.type===NodeType$1.Text||e.type===NodeType$1.Raw)&&""===e.value})))options.allowEmpty?(this.stream.write(">"),options.state=WriterState$1.CloseTag,this.stream.write("</"+node.name+">")):(options.state=WriterState$1.CloseTag,this.stream.write(options.spaceBeforeSlash+"/>"));else if(!options.pretty||1!==childNodeCount||firstChildNode.type!==NodeType$1.Text&&firstChildNode.type!==NodeType$1.Raw||null==firstChildNode.value){for(this.stream.write(">"+this.endline(node,options,level)),options.state=WriterState$1.InsideTag,j=0,len=(ref1=node.children).length;j<len;j++)child=ref1[j],this.writeChildNode(child,options,level+1);options.state=WriterState$1.CloseTag,this.stream.write(this.indent(node,options,level)+"</"+node.name+">")}else this.stream.write(">"),options.state=WriterState$1.InsideTag,options.suppressPrettyCount++,this.writeChildNode(firstChildNode,options,level+1),options.suppressPrettyCount--,options.state=WriterState$1.CloseTag,this.stream.write("</"+node.name+">");return this.stream.write(this.endline(node,options,level)),options.state=WriterState$1.None,this.closeNode(node,options,level)},XMLStreamWriter.prototype.processingInstruction=function(node,options,level){return this.stream.write(XMLStreamWriter.__super__.processingInstruction.call(this,node,options,level))},XMLStreamWriter.prototype.raw=function(node,options,level){return this.stream.write(XMLStreamWriter.__super__.raw.call(this,node,options,level))},XMLStreamWriter.prototype.text=function(node,options,level){return this.stream.write(XMLStreamWriter.__super__.text.call(this,node,options,level))},XMLStreamWriter.prototype.dtdAttList=function(node,options,level){return this.stream.write(XMLStreamWriter.__super__.dtdAttList.call(this,node,options,level))},XMLStreamWriter.prototype.dtdElement=function(node,options,level){return this.stream.write(XMLStreamWriter.__super__.dtdElement.call(this,node,options,level))},XMLStreamWriter.prototype.dtdEntity=function(node,options,level){return this.stream.write(XMLStreamWriter.__super__.dtdEntity.call(this,node,options,level))},XMLStreamWriter.prototype.dtdNotation=function(node,options,level){return this.stream.write(XMLStreamWriter.__super__.dtdNotation.call(this,node,options,level))},XMLStreamWriter}(XMLWriterBase$1)}).call(commonjsGlobal)})),lib$1=createCommonjsModule((function(module){(function(){var NodeType$1,WriterState$1,XMLDOMImplementation$1,XMLDocument$1,XMLDocumentCB$1,XMLStreamWriter$1,XMLStringWriter$1,assign,isFunction,ref;assign=(ref=Utility).assign,isFunction=ref.isFunction,XMLDOMImplementation$1=XMLDOMImplementation,XMLDocument$1=XMLDocument,XMLDocumentCB$1=XMLDocumentCB,XMLStringWriter$1=XMLStringWriter,XMLStreamWriter$1=XMLStreamWriter,NodeType$1=NodeType,WriterState$1=WriterState,module.exports.create=function(name,xmldec,doctype,options){var doc,root;if(null==name)throw new Error("Root element needs a name.");return options=assign({},xmldec,doctype,options),root=(doc=new XMLDocument$1(options)).element(name),options.headless||(doc.declaration(options),null==options.pubID&&null==options.sysID||doc.dtd(options)),root},module.exports.begin=function(options,onData,onEnd){var ref1;return isFunction(options)&&(onData=(ref1=[options,onData])[0],onEnd=ref1[1],options={}),onData?new XMLDocumentCB$1(options,onData,onEnd):new XMLDocument$1(options)},module.exports.stringWriter=function(options){return new XMLStringWriter$1(options)},module.exports.streamWriter=function(stream,options){return new XMLStreamWriter$1(stream,options)},module.exports.implementation=new XMLDOMImplementation$1,module.exports.nodeType=NodeType$1,module.exports.writerState=WriterState$1}).call(commonjsGlobal)})),lib_1=lib$1.create,lib_2=lib$1.begin,lib_3=lib$1.stringWriter,lib_4=lib$1.streamWriter,lib_5=lib$1.implementation,lib_6=lib$1.nodeType,lib_7=lib$1.writerState,builder=createCommonjsModule((function(module,exports){(function(){var builder,defaults,escapeCDATA,requiresCDATA,wrapCDATA,hasProp={}.hasOwnProperty;builder=lib$1,defaults=defaults$1.defaults,requiresCDATA=function(entry){return"string"==typeof entry&&(entry.indexOf("&")>=0||entry.indexOf(">")>=0||entry.indexOf("<")>=0)},wrapCDATA=function(entry){return"<![CDATA["+escapeCDATA(entry)+"]]>"},escapeCDATA=function(entry){return entry.replace("]]>","]]]]><![CDATA[>")},exports.Builder=function(){function Builder(opts){var key,ref,value;for(key in this.options={},ref=defaults[.2])hasProp.call(ref,key)&&(value=ref[key],this.options[key]=value);for(key in opts)hasProp.call(opts,key)&&(value=opts[key],this.options[key]=value)}return Builder.prototype.buildObject=function(rootObj){var attrkey,charkey,render,rootElement,rootName,_this;return attrkey=this.options.attrkey,charkey=this.options.charkey,1===Object.keys(rootObj).length&&this.options.rootName===defaults[.2].rootName?rootObj=rootObj[rootName=Object.keys(rootObj)[0]]:rootName=this.options.rootName,_this=this,render=function(element,obj){var attr,child,entry,index,key,value;if("object"!=typeof obj)_this.options.cdata&&requiresCDATA(obj)?element.raw(wrapCDATA(obj)):element.txt(obj);else if(Array.isArray(obj)){for(index in obj)if(hasProp.call(obj,index))for(key in child=obj[index])entry=child[key],element=render(element.ele(key),entry).up()}else for(key in obj)if(hasProp.call(obj,key))if(child=obj[key],key===attrkey){if("object"==typeof child)for(attr in child)value=child[attr],element=element.att(attr,value)}else if(key===charkey)element=_this.options.cdata&&requiresCDATA(child)?element.raw(wrapCDATA(child)):element.txt(child);else if(Array.isArray(child))for(index in child)hasProp.call(child,index)&&(element="string"==typeof(entry=child[index])?_this.options.cdata&&requiresCDATA(entry)?element.ele(key).raw(wrapCDATA(entry)).up():element.ele(key,entry).up():render(element.ele(key),entry).up());else"object"==typeof child?element=render(element.ele(key),child).up():"string"==typeof child&&_this.options.cdata&&requiresCDATA(child)?element=element.ele(key).raw(wrapCDATA(child)).up():(null==child&&(child=""),element=element.ele(key,child.toString()).up());return element},rootElement=builder.create(rootName,this.options.xmldec,this.options.doctype,{headless:this.options.headless,allowSurrogateChars:this.options.allowSurrogateChars}),render(rootElement,rootObj).end(this.options.renderOpts)},Builder}()}).call(commonjsGlobal)})),builder_1=builder.Builder,sax=createCommonjsModule((function(module,exports){!function(sax){sax.parser=function(strict,opt){return new SAXParser(strict,opt)},sax.SAXParser=SAXParser,sax.SAXStream=SAXStream,sax.createStream=function(strict,opt){return new SAXStream(strict,opt)},sax.MAX_BUFFER_LENGTH=65536;var Stream$1,buffers=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function SAXParser(strict,opt){if(!(this instanceof SAXParser))return new SAXParser(strict,opt);!function(parser){for(var i=0,l=buffers.length;i<l;i++)parser[buffers[i]]=""}(this),this.q=this.c="",this.bufferCheckPosition=sax.MAX_BUFFER_LENGTH,this.opt=opt||{},this.opt.lowercase=this.opt.lowercase||this.opt.lowercasetags,this.looseCase=this.opt.lowercase?"toLowerCase":"toUpperCase",this.tags=[],this.closed=this.closedRoot=this.sawRoot=!1,this.tag=this.error=null,this.strict=!!strict,this.noscript=!(!strict&&!this.opt.noscript),this.state=S.BEGIN,this.strictEntities=this.opt.strictEntities,this.ENTITIES=this.strictEntities?Object.create(sax.XML_ENTITIES):Object.create(sax.ENTITIES),this.attribList=[],this.opt.xmlns&&(this.ns=Object.create(rootNS)),this.trackPosition=!1!==this.opt.position,this.trackPosition&&(this.position=this.line=this.column=0),emit(this,"onready")}sax.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(o){function F(){}return F.prototype=o,new F}),Object.keys||(Object.keys=function(o){var a=[];for(var i in o)o.hasOwnProperty(i)&&a.push(i);return a}),SAXParser.prototype={end:function(){end(this)},write:function(chunk){if(this.error)throw this.error;if(this.closed)return error(this,"Cannot write after close. Assign an onready handler.");if(null===chunk)return end(this);"object"==typeof chunk&&(chunk=chunk.toString());var i=0,c="";for(;c=charAt(chunk,i++),this.c=c,c;)switch(this.trackPosition&&(this.position++,"\n"===c?(this.line++,this.column=0):this.column++),this.state){case S.BEGIN:if(this.state=S.BEGIN_WHITESPACE,"\ufeff"===c)continue;beginWhiteSpace(this,c);continue;case S.BEGIN_WHITESPACE:beginWhiteSpace(this,c);continue;case S.TEXT:if(this.sawRoot&&!this.closedRoot){for(var starti=i-1;c&&"<"!==c&&"&"!==c;)(c=charAt(chunk,i++))&&this.trackPosition&&(this.position++,"\n"===c?(this.line++,this.column=0):this.column++);this.textNode+=chunk.substring(starti,i-1)}"<"!==c||this.sawRoot&&this.closedRoot&&!this.strict?(isWhitespace(c)||this.sawRoot&&!this.closedRoot||strictFail(this,"Text data outside of root node."),"&"===c?this.state=S.TEXT_ENTITY:this.textNode+=c):(this.state=S.OPEN_WAKA,this.startTagPosition=this.position);continue;case S.SCRIPT:"<"===c?this.state=S.SCRIPT_ENDING:this.script+=c;continue;case S.SCRIPT_ENDING:"/"===c?this.state=S.CLOSE_TAG:(this.script+="<"+c,this.state=S.SCRIPT);continue;case S.OPEN_WAKA:if("!"===c)this.state=S.SGML_DECL,this.sgmlDecl="";else if(isWhitespace(c));else if(isMatch(nameStart,c))this.state=S.OPEN_TAG,this.tagName=c;else if("/"===c)this.state=S.CLOSE_TAG,this.tagName="";else if("?"===c)this.state=S.PROC_INST,this.procInstName=this.procInstBody="";else{if(strictFail(this,"Unencoded <"),this.startTagPosition+1<this.position){var pad=this.position-this.startTagPosition;c=new Array(pad).join(" ")+c}this.textNode+="<"+c,this.state=S.TEXT}continue;case S.SGML_DECL:"[CDATA["===(this.sgmlDecl+c).toUpperCase()?(emitNode(this,"onopencdata"),this.state=S.CDATA,this.sgmlDecl="",this.cdata=""):this.sgmlDecl+c==="--"?(this.state=S.COMMENT,this.comment="",this.sgmlDecl=""):"DOCTYPE"===(this.sgmlDecl+c).toUpperCase()?(this.state=S.DOCTYPE,(this.doctype||this.sawRoot)&&strictFail(this,"Inappropriately located doctype declaration"),this.doctype="",this.sgmlDecl=""):">"===c?(emitNode(this,"onsgmldeclaration",this.sgmlDecl),this.sgmlDecl="",this.state=S.TEXT):isQuote(c)?(this.state=S.SGML_DECL_QUOTED,this.sgmlDecl+=c):this.sgmlDecl+=c;continue;case S.SGML_DECL_QUOTED:c===this.q&&(this.state=S.SGML_DECL,this.q=""),this.sgmlDecl+=c;continue;case S.DOCTYPE:">"===c?(this.state=S.TEXT,emitNode(this,"ondoctype",this.doctype),this.doctype=!0):(this.doctype+=c,"["===c?this.state=S.DOCTYPE_DTD:isQuote(c)&&(this.state=S.DOCTYPE_QUOTED,this.q=c));continue;case S.DOCTYPE_QUOTED:this.doctype+=c,c===this.q&&(this.q="",this.state=S.DOCTYPE);continue;case S.DOCTYPE_DTD:this.doctype+=c,"]"===c?this.state=S.DOCTYPE:isQuote(c)&&(this.state=S.DOCTYPE_DTD_QUOTED,this.q=c);continue;case S.DOCTYPE_DTD_QUOTED:this.doctype+=c,c===this.q&&(this.state=S.DOCTYPE_DTD,this.q="");continue;case S.COMMENT:"-"===c?this.state=S.COMMENT_ENDING:this.comment+=c;continue;case S.COMMENT_ENDING:"-"===c?(this.state=S.COMMENT_ENDED,this.comment=textopts(this.opt,this.comment),this.comment&&emitNode(this,"oncomment",this.comment),this.comment=""):(this.comment+="-"+c,this.state=S.COMMENT);continue;case S.COMMENT_ENDED:">"!==c?(strictFail(this,"Malformed comment"),this.comment+="--"+c,this.state=S.COMMENT):this.state=S.TEXT;continue;case S.CDATA:"]"===c?this.state=S.CDATA_ENDING:this.cdata+=c;continue;case S.CDATA_ENDING:"]"===c?this.state=S.CDATA_ENDING_2:(this.cdata+="]"+c,this.state=S.CDATA);continue;case S.CDATA_ENDING_2:">"===c?(this.cdata&&emitNode(this,"oncdata",this.cdata),emitNode(this,"onclosecdata"),this.cdata="",this.state=S.TEXT):"]"===c?this.cdata+="]":(this.cdata+="]]"+c,this.state=S.CDATA);continue;case S.PROC_INST:"?"===c?this.state=S.PROC_INST_ENDING:isWhitespace(c)?this.state=S.PROC_INST_BODY:this.procInstName+=c;continue;case S.PROC_INST_BODY:if(!this.procInstBody&&isWhitespace(c))continue;"?"===c?this.state=S.PROC_INST_ENDING:this.procInstBody+=c;continue;case S.PROC_INST_ENDING:">"===c?(emitNode(this,"onprocessinginstruction",{name:this.procInstName,body:this.procInstBody}),this.procInstName=this.procInstBody="",this.state=S.TEXT):(this.procInstBody+="?"+c,this.state=S.PROC_INST_BODY);continue;case S.OPEN_TAG:isMatch(nameBody,c)?this.tagName+=c:(newTag(this),">"===c?openTag(this):"/"===c?this.state=S.OPEN_TAG_SLASH:(isWhitespace(c)||strictFail(this,"Invalid character in tag name"),this.state=S.ATTRIB));continue;case S.OPEN_TAG_SLASH:">"===c?(openTag(this,!0),closeTag(this)):(strictFail(this,"Forward-slash in opening tag not followed by >"),this.state=S.ATTRIB);continue;case S.ATTRIB:if(isWhitespace(c))continue;">"===c?openTag(this):"/"===c?this.state=S.OPEN_TAG_SLASH:isMatch(nameStart,c)?(this.attribName=c,this.attribValue="",this.state=S.ATTRIB_NAME):strictFail(this,"Invalid attribute name");continue;case S.ATTRIB_NAME:"="===c?this.state=S.ATTRIB_VALUE:">"===c?(strictFail(this,"Attribute without value"),this.attribValue=this.attribName,attrib(this),openTag(this)):isWhitespace(c)?this.state=S.ATTRIB_NAME_SAW_WHITE:isMatch(nameBody,c)?this.attribName+=c:strictFail(this,"Invalid attribute name");continue;case S.ATTRIB_NAME_SAW_WHITE:if("="===c)this.state=S.ATTRIB_VALUE;else{if(isWhitespace(c))continue;strictFail(this,"Attribute without value"),this.tag.attributes[this.attribName]="",this.attribValue="",emitNode(this,"onattribute",{name:this.attribName,value:""}),this.attribName="",">"===c?openTag(this):isMatch(nameStart,c)?(this.attribName=c,this.state=S.ATTRIB_NAME):(strictFail(this,"Invalid attribute name"),this.state=S.ATTRIB)}continue;case S.ATTRIB_VALUE:if(isWhitespace(c))continue;isQuote(c)?(this.q=c,this.state=S.ATTRIB_VALUE_QUOTED):(strictFail(this,"Unquoted attribute value"),this.state=S.ATTRIB_VALUE_UNQUOTED,this.attribValue=c);continue;case S.ATTRIB_VALUE_QUOTED:if(c!==this.q){"&"===c?this.state=S.ATTRIB_VALUE_ENTITY_Q:this.attribValue+=c;continue}attrib(this),this.q="",this.state=S.ATTRIB_VALUE_CLOSED;continue;case S.ATTRIB_VALUE_CLOSED:isWhitespace(c)?this.state=S.ATTRIB:">"===c?openTag(this):"/"===c?this.state=S.OPEN_TAG_SLASH:isMatch(nameStart,c)?(strictFail(this,"No whitespace between attributes"),this.attribName=c,this.attribValue="",this.state=S.ATTRIB_NAME):strictFail(this,"Invalid attribute name");continue;case S.ATTRIB_VALUE_UNQUOTED:if(!isAttribEnd(c)){"&"===c?this.state=S.ATTRIB_VALUE_ENTITY_U:this.attribValue+=c;continue}attrib(this),">"===c?openTag(this):this.state=S.ATTRIB;continue;case S.CLOSE_TAG:if(this.tagName)">"===c?closeTag(this):isMatch(nameBody,c)?this.tagName+=c:this.script?(this.script+="</"+this.tagName,this.tagName="",this.state=S.SCRIPT):(isWhitespace(c)||strictFail(this,"Invalid tagname in closing tag"),this.state=S.CLOSE_TAG_SAW_WHITE);else{if(isWhitespace(c))continue;notMatch(nameStart,c)?this.script?(this.script+="</"+c,this.state=S.SCRIPT):strictFail(this,"Invalid tagname in closing tag."):this.tagName=c}continue;case S.CLOSE_TAG_SAW_WHITE:if(isWhitespace(c))continue;">"===c?closeTag(this):strictFail(this,"Invalid characters in closing tag");continue;case S.TEXT_ENTITY:case S.ATTRIB_VALUE_ENTITY_Q:case S.ATTRIB_VALUE_ENTITY_U:var returnState,buffer;switch(this.state){case S.TEXT_ENTITY:returnState=S.TEXT,buffer="textNode";break;case S.ATTRIB_VALUE_ENTITY_Q:returnState=S.ATTRIB_VALUE_QUOTED,buffer="attribValue";break;case S.ATTRIB_VALUE_ENTITY_U:returnState=S.ATTRIB_VALUE_UNQUOTED,buffer="attribValue"}";"===c?(this[buffer]+=parseEntity(this),this.entity="",this.state=returnState):isMatch(this.entity.length?entityBody:entityStart,c)?this.entity+=c:(strictFail(this,"Invalid character in entity name"),this[buffer]+="&"+this.entity+c,this.entity="",this.state=returnState);continue;default:throw new Error(this,"Unknown state: "+this.state)}this.position>=this.bufferCheckPosition&&function(parser){for(var maxAllowed=Math.max(sax.MAX_BUFFER_LENGTH,10),maxActual=0,i=0,l=buffers.length;i<l;i++){var len=parser[buffers[i]].length;if(len>maxAllowed)switch(buffers[i]){case"textNode":closeText(parser);break;case"cdata":emitNode(parser,"oncdata",parser.cdata),parser.cdata="";break;case"script":emitNode(parser,"onscript",parser.script),parser.script="";break;default:error(parser,"Max buffer length exceeded: "+buffers[i])}maxActual=Math.max(maxActual,len)}var m=sax.MAX_BUFFER_LENGTH-maxActual;parser.bufferCheckPosition=m+parser.position}(this);return this}
/*! http://mths.be/fromcodepoint v0.1.0 by @mathias */,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){!function(parser){closeText(parser),""!==parser.cdata&&(emitNode(parser,"oncdata",parser.cdata),parser.cdata=""),""!==parser.script&&(emitNode(parser,"onscript",parser.script),parser.script="")}(this)}};try{Stream$1=Stream.Stream}catch(ex){Stream$1=function(){}}var streamWraps=sax.EVENTS.filter((function(ev){return"error"!==ev&&"end"!==ev}));function SAXStream(strict,opt){if(!(this instanceof SAXStream))return new SAXStream(strict,opt);Stream$1.apply(this),this._parser=new SAXParser(strict,opt),this.writable=!0,this.readable=!0;var me=this;this._parser.onend=function(){me.emit("end")},this._parser.onerror=function(er){me.emit("error",er),me._parser.error=null},this._decoder=null,streamWraps.forEach((function(ev){Object.defineProperty(me,"on"+ev,{get:function(){return me._parser["on"+ev]},set:function(h){if(!h)return me.removeAllListeners(ev),me._parser["on"+ev]=h,h;me.on(ev,h)},enumerable:!0,configurable:!1})}))}SAXStream.prototype=Object.create(Stream$1.prototype,{constructor:{value:SAXStream}}),SAXStream.prototype.write=function(data){if("function"==typeof Buffer&&"function"==typeof Buffer.isBuffer&&Buffer.isBuffer(data)){if(!this._decoder){var SD=string_decoder.StringDecoder;this._decoder=new SD("utf8")}data=this._decoder.write(data)}return this._parser.write(data.toString()),this.emit("data",data),!0},SAXStream.prototype.end=function(chunk){return chunk&&chunk.length&&this.write(chunk),this._parser.end(),!0},SAXStream.prototype.on=function(ev,handler){var me=this;return me._parser["on"+ev]||-1===streamWraps.indexOf(ev)||(me._parser["on"+ev]=function(){var args=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);args.splice(0,0,ev),me.emit.apply(me,args)}),Stream$1.prototype.on.call(me,ev,handler)};var XML_NAMESPACE="http://www.w3.org/XML/1998/namespace",rootNS={xml:XML_NAMESPACE,xmlns:"http://www.w3.org/2000/xmlns/"},nameStart=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,nameBody=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,entityStart=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,entityBody=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function isWhitespace(c){return" "===c||"\n"===c||"\r"===c||"\t"===c}function isQuote(c){return'"'===c||"'"===c}function isAttribEnd(c){return">"===c||isWhitespace(c)}function isMatch(regex,c){return regex.test(c)}function notMatch(regex,c){return!isMatch(regex,c)}var stringFromCharCode,floor,fromCodePoint,S=0;for(var s in sax.STATE={BEGIN:S++,BEGIN_WHITESPACE:S++,TEXT:S++,TEXT_ENTITY:S++,OPEN_WAKA:S++,SGML_DECL:S++,SGML_DECL_QUOTED:S++,DOCTYPE:S++,DOCTYPE_QUOTED:S++,DOCTYPE_DTD:S++,DOCTYPE_DTD_QUOTED:S++,COMMENT_STARTING:S++,COMMENT:S++,COMMENT_ENDING:S++,COMMENT_ENDED:S++,CDATA:S++,CDATA_ENDING:S++,CDATA_ENDING_2:S++,PROC_INST:S++,PROC_INST_BODY:S++,PROC_INST_ENDING:S++,OPEN_TAG:S++,OPEN_TAG_SLASH:S++,ATTRIB:S++,ATTRIB_NAME:S++,ATTRIB_NAME_SAW_WHITE:S++,ATTRIB_VALUE:S++,ATTRIB_VALUE_QUOTED:S++,ATTRIB_VALUE_CLOSED:S++,ATTRIB_VALUE_UNQUOTED:S++,ATTRIB_VALUE_ENTITY_Q:S++,ATTRIB_VALUE_ENTITY_U:S++,CLOSE_TAG:S++,CLOSE_TAG_SAW_WHITE:S++,SCRIPT:S++,SCRIPT_ENDING:S++},sax.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},sax.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(sax.ENTITIES).forEach((function(key){var e=sax.ENTITIES[key],s="number"==typeof e?String.fromCharCode(e):e;sax.ENTITIES[key]=s})),sax.STATE)sax.STATE[sax.STATE[s]]=s;function emit(parser,event,data){parser[event]&&parser[event](data)}function emitNode(parser,nodeType,data){parser.textNode&&closeText(parser),emit(parser,nodeType,data)}function closeText(parser){parser.textNode=textopts(parser.opt,parser.textNode),parser.textNode&&emit(parser,"ontext",parser.textNode),parser.textNode=""}function textopts(opt,text){return opt.trim&&(text=text.trim()),opt.normalize&&(text=text.replace(/\s+/g," ")),text}function error(parser,er){return closeText(parser),parser.trackPosition&&(er+="\nLine: "+parser.line+"\nColumn: "+parser.column+"\nChar: "+parser.c),er=new Error(er),parser.error=er,emit(parser,"onerror",er),parser}function end(parser){return parser.sawRoot&&!parser.closedRoot&&strictFail(parser,"Unclosed root tag"),parser.state!==S.BEGIN&&parser.state!==S.BEGIN_WHITESPACE&&parser.state!==S.TEXT&&error(parser,"Unexpected end"),closeText(parser),parser.c="",parser.closed=!0,emit(parser,"onend"),SAXParser.call(parser,parser.strict,parser.opt),parser}function strictFail(parser,message){if("object"!=typeof parser||!(parser instanceof SAXParser))throw new Error("bad call to strictFail");parser.strict&&error(parser,message)}function newTag(parser){parser.strict||(parser.tagName=parser.tagName[parser.looseCase]());var parent=parser.tags[parser.tags.length-1]||parser,tag=parser.tag={name:parser.tagName,attributes:{}};parser.opt.xmlns&&(tag.ns=parent.ns),parser.attribList.length=0,emitNode(parser,"onopentagstart",tag)}function qname(name,attribute){var qualName=name.indexOf(":")<0?["",name]:name.split(":"),prefix=qualName[0],local=qualName[1];return attribute&&"xmlns"===name&&(prefix="xmlns",local=""),{prefix:prefix,local:local}}function attrib(parser){if(parser.strict||(parser.attribName=parser.attribName[parser.looseCase]()),-1!==parser.attribList.indexOf(parser.attribName)||parser.tag.attributes.hasOwnProperty(parser.attribName))parser.attribName=parser.attribValue="";else{if(parser.opt.xmlns){var qn=qname(parser.attribName,!0),prefix=qn.prefix,local=qn.local;if("xmlns"===prefix)if("xml"===local&&parser.attribValue!==XML_NAMESPACE)strictFail(parser,"xml: prefix must be bound to "+XML_NAMESPACE+"\nActual: "+parser.attribValue);else if("xmlns"===local&&"http://www.w3.org/2000/xmlns/"!==parser.attribValue)strictFail(parser,"xmlns: prefix must be bound to http://www.w3.org/2000/xmlns/\nActual: "+parser.attribValue);else{var tag=parser.tag,parent=parser.tags[parser.tags.length-1]||parser;tag.ns===parent.ns&&(tag.ns=Object.create(parent.ns)),tag.ns[local]=parser.attribValue}parser.attribList.push([parser.attribName,parser.attribValue])}else parser.tag.attributes[parser.attribName]=parser.attribValue,emitNode(parser,"onattribute",{name:parser.attribName,value:parser.attribValue});parser.attribName=parser.attribValue=""}}function openTag(parser,selfClosing){if(parser.opt.xmlns){var tag=parser.tag,qn=qname(parser.tagName);tag.prefix=qn.prefix,tag.local=qn.local,tag.uri=tag.ns[qn.prefix]||"",tag.prefix&&!tag.uri&&(strictFail(parser,"Unbound namespace prefix: "+JSON.stringify(parser.tagName)),tag.uri=qn.prefix);var parent=parser.tags[parser.tags.length-1]||parser;tag.ns&&parent.ns!==tag.ns&&Object.keys(tag.ns).forEach((function(p){emitNode(parser,"onopennamespace",{prefix:p,uri:tag.ns[p]})}));for(var i=0,l=parser.attribList.length;i<l;i++){var nv=parser.attribList[i],name=nv[0],value=nv[1],qualName=qname(name,!0),prefix=qualName.prefix,local=qualName.local,uri=""===prefix?"":tag.ns[prefix]||"",a={name:name,value:value,prefix:prefix,local:local,uri:uri};prefix&&"xmlns"!==prefix&&!uri&&(strictFail(parser,"Unbound namespace prefix: "+JSON.stringify(prefix)),a.uri=prefix),parser.tag.attributes[name]=a,emitNode(parser,"onattribute",a)}parser.attribList.length=0}parser.tag.isSelfClosing=!!selfClosing,parser.sawRoot=!0,parser.tags.push(parser.tag),emitNode(parser,"onopentag",parser.tag),selfClosing||(parser.noscript||"script"!==parser.tagName.toLowerCase()?parser.state=S.TEXT:parser.state=S.SCRIPT,parser.tag=null,parser.tagName=""),parser.attribName=parser.attribValue="",parser.attribList.length=0}function closeTag(parser){if(!parser.tagName)return strictFail(parser,"Weird empty close tag."),parser.textNode+="</>",void(parser.state=S.TEXT);if(parser.script){if("script"!==parser.tagName)return parser.script+="</"+parser.tagName+">",parser.tagName="",void(parser.state=S.SCRIPT);emitNode(parser,"onscript",parser.script),parser.script=""}var t=parser.tags.length,tagName=parser.tagName;parser.strict||(tagName=tagName[parser.looseCase]());for(var closeTo=tagName;t--;){if(parser.tags[t].name===closeTo)break;strictFail(parser,"Unexpected close tag")}if(t<0)return strictFail(parser,"Unmatched closing tag: "+parser.tagName),parser.textNode+="</"+parser.tagName+">",void(parser.state=S.TEXT);parser.tagName=tagName;for(var s=parser.tags.length;s-- >t;){var tag=parser.tag=parser.tags.pop();parser.tagName=parser.tag.name,emitNode(parser,"onclosetag",parser.tagName);var x={};for(var i in tag.ns)x[i]=tag.ns[i];var parent=parser.tags[parser.tags.length-1]||parser;parser.opt.xmlns&&tag.ns!==parent.ns&&Object.keys(tag.ns).forEach((function(p){var n=tag.ns[p];emitNode(parser,"onclosenamespace",{prefix:p,uri:n})}))}0===t&&(parser.closedRoot=!0),parser.tagName=parser.attribValue=parser.attribName="",parser.attribList.length=0,parser.state=S.TEXT}function parseEntity(parser){var num,entity=parser.entity,entityLC=entity.toLowerCase(),numStr="";return parser.ENTITIES[entity]?parser.ENTITIES[entity]:parser.ENTITIES[entityLC]?parser.ENTITIES[entityLC]:("#"===(entity=entityLC).charAt(0)&&("x"===entity.charAt(1)?(entity=entity.slice(2),numStr=(num=parseInt(entity,16)).toString(16)):(entity=entity.slice(1),numStr=(num=parseInt(entity,10)).toString(10))),entity=entity.replace(/^0+/,""),isNaN(num)||numStr.toLowerCase()!==entity?(strictFail(parser,"Invalid character entity"),"&"+parser.entity+";"):String.fromCodePoint(num))}function beginWhiteSpace(parser,c){"<"===c?(parser.state=S.OPEN_WAKA,parser.startTagPosition=parser.position):isWhitespace(c)||(strictFail(parser,"Non-whitespace before first tag."),parser.textNode=c,parser.state=S.TEXT)}function charAt(chunk,i){var result="";return i<chunk.length&&(result=chunk.charAt(i)),result}S=sax.STATE,String.fromCodePoint||(stringFromCharCode=String.fromCharCode,floor=Math.floor,fromCodePoint=function(){var highSurrogate,lowSurrogate,MAX_SIZE=16384,codeUnits=[],index=-1,length=arguments.length;if(!length)return"";for(var result="";++index<length;){var codePoint=Number(arguments[index]);if(!isFinite(codePoint)||codePoint<0||codePoint>1114111||floor(codePoint)!==codePoint)throw RangeError("Invalid code point: "+codePoint);codePoint<=65535?codeUnits.push(codePoint):(highSurrogate=55296+((codePoint-=65536)>>10),lowSurrogate=codePoint%1024+56320,codeUnits.push(highSurrogate,lowSurrogate)),(index+1===length||codeUnits.length>MAX_SIZE)&&(result+=stringFromCharCode.apply(null,codeUnits),codeUnits.length=0)}return result},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:fromCodePoint,configurable:!0,writable:!0}):String.fromCodePoint=fromCodePoint)}(exports)})),bom=createCommonjsModule((function(module,exports){(function(){exports.stripBOM=function(str){return"\ufeff"===str[0]?str.substring(1):str}}).call(commonjsGlobal)})),bom_1=bom.stripBOM,processors=createCommonjsModule((function(module,exports){(function(){var prefixMatch;prefixMatch=new RegExp(/(?!xmlns)^.*:/),exports.normalize=function(str){return str.toLowerCase()},exports.firstCharLowerCase=function(str){return str.charAt(0).toLowerCase()+str.slice(1)},exports.stripPrefix=function(str){return str.replace(prefixMatch,"")},exports.parseNumbers=function(str){return isNaN(str)||(str=str%1==0?parseInt(str,10):parseFloat(str)),str},exports.parseBooleans=function(str){return/^(?:true|false)$/i.test(str)&&(str="true"===str.toLowerCase()),str}}).call(commonjsGlobal)})),processors_1=processors.normalize,processors_2=processors.firstCharLowerCase,processors_3=processors.stripPrefix,processors_4=processors.parseNumbers,processors_5=processors.parseBooleans,parser=createCommonjsModule((function(module,exports){(function(){var bom$1,defaults,events$1,isEmpty,processItem,processors$1,sax$1,setImmediate,bind=function(fn,me){return function(){return fn.apply(me,arguments)}},hasProp={}.hasOwnProperty;sax$1=sax,events$1=events,bom$1=bom,processors$1=processors,setImmediate=timers.setImmediate,defaults=defaults$1.defaults,isEmpty=function(thing){return"object"==typeof thing&&null!=thing&&0===Object.keys(thing).length},processItem=function(processors,item,key){var i,len;for(i=0,len=processors.length;i<len;i++)item=(0,processors[i])(item,key);return item},exports.Parser=function(superClass){function Parser(opts){var key,ref,value;if(this.parseStringPromise=bind(this.parseStringPromise,this),this.parseString=bind(this.parseString,this),this.reset=bind(this.reset,this),this.assignOrPush=bind(this.assignOrPush,this),this.processAsync=bind(this.processAsync,this),!(this instanceof exports.Parser))return new exports.Parser(opts);for(key in this.options={},ref=defaults[.2])hasProp.call(ref,key)&&(value=ref[key],this.options[key]=value);for(key in opts)hasProp.call(opts,key)&&(value=opts[key],this.options[key]=value);this.options.xmlns&&(this.options.xmlnskey=this.options.attrkey+"ns"),this.options.normalizeTags&&(this.options.tagNameProcessors||(this.options.tagNameProcessors=[]),this.options.tagNameProcessors.unshift(processors$1.normalize)),this.reset()}return function(child,parent){for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);function ctor(){this.constructor=child}ctor.prototype=(parent||{}).prototype,child.prototype=new ctor,child.__super__=(parent||{}).prototype}(Parser,superClass),Parser.prototype.processAsync=function(){var chunk,err;try{return this.remaining.length<=this.options.chunkSize?(chunk=this.remaining,this.remaining="",this.saxParser=this.saxParser.write(chunk),this.saxParser.close()):(chunk=this.remaining.substr(0,this.options.chunkSize),this.remaining=this.remaining.substr(this.options.chunkSize,this.remaining.length),this.saxParser=this.saxParser.write(chunk),setImmediate(this.processAsync))}catch(error1){if(err=error1,!this.saxParser.errThrown)return this.saxParser.errThrown=!0,this.emit(err)}},Parser.prototype.assignOrPush=function(obj,key,newValue){return key in obj?(obj[key]instanceof Array||(obj[key]=[obj[key]]),obj[key].push(newValue)):this.options.explicitArray?obj[key]=[newValue]:obj[key]=newValue},Parser.prototype.reset=function(){var attrkey,charkey,ontext,stack,_this;return this.removeAllListeners(),this.saxParser=sax$1.parser(this.options.strict,{trim:!1,normalize:!1,xmlns:this.options.xmlns}),this.saxParser.errThrown=!1,this.saxParser.onerror=(_this=this,function(error){if(_this.saxParser.resume(),!_this.saxParser.errThrown)return _this.saxParser.errThrown=!0,_this.emit("error",error)}),this.saxParser.onend=function(_this){return function(){if(!_this.saxParser.ended)return _this.saxParser.ended=!0,_this.emit("end",_this.resultObject)}}(this),this.saxParser.ended=!1,this.EXPLICIT_CHARKEY=this.options.explicitCharkey,this.resultObject=null,stack=[],attrkey=this.options.attrkey,charkey=this.options.charkey,this.saxParser.onopentag=function(_this){return function(node){var key,newValue,obj,processedKey,ref;if((obj={})[charkey]="",!_this.options.ignoreAttrs)for(key in ref=node.attributes)hasProp.call(ref,key)&&(attrkey in obj||_this.options.mergeAttrs||(obj[attrkey]={}),newValue=_this.options.attrValueProcessors?processItem(_this.options.attrValueProcessors,node.attributes[key],key):node.attributes[key],processedKey=_this.options.attrNameProcessors?processItem(_this.options.attrNameProcessors,key):key,_this.options.mergeAttrs?_this.assignOrPush(obj,processedKey,newValue):obj[attrkey][processedKey]=newValue);return obj["#name"]=_this.options.tagNameProcessors?processItem(_this.options.tagNameProcessors,node.name):node.name,_this.options.xmlns&&(obj[_this.options.xmlnskey]={uri:node.uri,local:node.local}),stack.push(obj)}}(this),this.saxParser.onclosetag=function(_this){return function(){var cdata,emptyStr,key,node,nodeName,obj,objClone,old,s,xpath;if(obj=stack.pop(),nodeName=obj["#name"],_this.options.explicitChildren&&_this.options.preserveChildrenOrder||delete obj["#name"],!0===obj.cdata&&(cdata=obj.cdata,delete obj.cdata),s=stack[stack.length-1],obj[charkey].match(/^\s*$/)&&!cdata?(emptyStr=obj[charkey],delete obj[charkey]):(_this.options.trim&&(obj[charkey]=obj[charkey].trim()),_this.options.normalize&&(obj[charkey]=obj[charkey].replace(/\s{2,}/g," ").trim()),obj[charkey]=_this.options.valueProcessors?processItem(_this.options.valueProcessors,obj[charkey],nodeName):obj[charkey],1===Object.keys(obj).length&&charkey in obj&&!_this.EXPLICIT_CHARKEY&&(obj=obj[charkey])),isEmpty(obj)&&(obj=""!==_this.options.emptyTag?_this.options.emptyTag:emptyStr),null!=_this.options.validator&&(xpath="/"+function(){var i,len,results;for(results=[],i=0,len=stack.length;i<len;i++)node=stack[i],results.push(node["#name"]);return results}().concat(nodeName).join("/"),function(){var err;try{obj=_this.options.validator(xpath,s&&s[nodeName],obj)}catch(error1){return err=error1,_this.emit("error",err)}}()),_this.options.explicitChildren&&!_this.options.mergeAttrs&&"object"==typeof obj)if(_this.options.preserveChildrenOrder){if(s){for(key in s[_this.options.childkey]=s[_this.options.childkey]||[],objClone={},obj)hasProp.call(obj,key)&&(objClone[key]=obj[key]);s[_this.options.childkey].push(objClone),delete obj["#name"],1===Object.keys(obj).length&&charkey in obj&&!_this.EXPLICIT_CHARKEY&&(obj=obj[charkey])}}else node={},_this.options.attrkey in obj&&(node[_this.options.attrkey]=obj[_this.options.attrkey],delete obj[_this.options.attrkey]),!_this.options.charsAsChildren&&_this.options.charkey in obj&&(node[_this.options.charkey]=obj[_this.options.charkey],delete obj[_this.options.charkey]),Object.getOwnPropertyNames(obj).length>0&&(node[_this.options.childkey]=obj),obj=node;return stack.length>0?_this.assignOrPush(s,nodeName,obj):(_this.options.explicitRoot&&(old=obj,(obj={})[nodeName]=old),_this.resultObject=obj,_this.saxParser.ended=!0,_this.emit("end",_this.resultObject))}}(this),ontext=function(_this){return function(text){var charChild,s;if(s=stack[stack.length-1])return s[charkey]+=text,_this.options.explicitChildren&&_this.options.preserveChildrenOrder&&_this.options.charsAsChildren&&(_this.options.includeWhiteChars||""!==text.replace(/\\n/g,"").trim())&&(s[_this.options.childkey]=s[_this.options.childkey]||[],(charChild={"#name":"__text__"})[charkey]=text,_this.options.normalize&&(charChild[charkey]=charChild[charkey].replace(/\s{2,}/g," ").trim()),s[_this.options.childkey].push(charChild)),s}}(this),this.saxParser.ontext=ontext,this.saxParser.oncdata=function(text){var s;if(s=ontext(text))return s.cdata=!0}},Parser.prototype.parseString=function(str,cb){var err;null!=cb&&"function"==typeof cb&&(this.on("end",(function(result){return this.reset(),cb(null,result)})),this.on("error",(function(err){return this.reset(),cb(err)})));try{return""===(str=str.toString()).trim()?(this.emit("end",null),!0):(str=bom$1.stripBOM(str),this.options.async?(this.remaining=str,setImmediate(this.processAsync),this.saxParser):this.saxParser.write(str).close())}catch(error1){if(err=error1,!this.saxParser.errThrown&&!this.saxParser.ended)return this.emit("error",err),this.saxParser.errThrown=!0;if(this.saxParser.ended)throw err}},Parser.prototype.parseStringPromise=function(str){return new Promise((_this=this,function(resolve,reject){return _this.parseString(str,(function(err,value){return err?reject(err):resolve(value)}))}));var _this},Parser}(events$1),exports.parseString=function(str,a,b){var cb,options;return null!=b?("function"==typeof b&&(cb=b),"object"==typeof a&&(options=a)):("function"==typeof a&&(cb=a),options={}),new exports.Parser(options).parseString(str,cb)},exports.parseStringPromise=function(str,a){var options;return"object"==typeof a&&(options=a),new exports.Parser(options).parseStringPromise(str)}}).call(commonjsGlobal)})),parser_1=parser.Parser,parser_2=parser.parseString,parser_3=parser.parseStringPromise,xml2js=createCommonjsModule((function(module,exports){(function(){var builder$1,defaults,parser$1,processors$1,hasProp={}.hasOwnProperty;defaults=defaults$1,builder$1=builder,parser$1=parser,processors$1=processors,exports.defaults=defaults.defaults,exports.processors=processors$1,exports.ValidationError=function(superClass){function ValidationError(message){this.message=message}return function(child,parent){for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);function ctor(){this.constructor=child}ctor.prototype=(parent||{}).prototype,child.prototype=new ctor,child.__super__=(parent||{}).prototype}(ValidationError,Error),ValidationError}(),exports.Builder=builder$1.Builder,exports.Parser=parser$1.Parser,exports.parseString=parser$1.parseString,exports.parseStringPromise=parser$1.parseStringPromise}).call(commonjsGlobal)})),xml2js_1=xml2js.defaults,xml2js_2=xml2js.processors,xml2js_3=xml2js.ValidationError,xml2js_4=xml2js.Builder,xml2js_5=xml2js.Parser,xml2js_6=xml2js.parseString,xml2js_7=xml2js.parseStringPromise,parseXmlString_1=createCommonjsModule((function(module,exports){Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(body){return new Promise((resolve,reject)=>{xml2js.parseString(body,(err,result)=>{err?reject(err):resolve(result)})})}}));unwrapExports(parseXmlString_1);var require$$2=getCjsExportFromNamespace(lib),artifactUrl=createCommonjsModule((function(module,exports){var __importDefault=commonjsGlobal&&commonjsGlobal.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const path_1=__importDefault(path),mvn_artifact_filename_1=__importDefault(filename_1),node_fetch_1=__importDefault(require$$2),parseXmlString_1$1=__importDefault(parseXmlString_1);function groupPath(artifact){return[artifact.groupId.replace(/\./g,"/"),artifact.artifactId,artifact.version+(artifact.isSnapShot?"-SNAPSHOT":"")].join("/")}function artifactPath(artifact){return path_1.default.join(groupPath(artifact),mvn_artifact_filename_1.default(artifact))}exports.default=async function(artifact,basePath){const prefix=basePath||"https://repo1.maven.org/maven2/";if(artifact.isSnapShot){return prefix+artifactPath({snapShotVersion:await async function(artifact,basepath){const metadataUrl=basepath+groupPath(artifact)+"/maven-metadata.xml",response=await node_fetch_1.default(metadataUrl);if(200!==response.status)throw new Error(`Unable to fetch ${metadataUrl}. Status ${response.status}`);const body=await response.text(),snapshot=(await parseXmlString_1$1.default(body)).metadata.versioning[0].snapshot[0];return snapshot.timestamp[0]+"-"+snapshot.buildNumber[0]}(artifact,prefix),...artifact})}return prefix+artifactPath(artifact)}}));unwrapExports(artifactUrl);class RemoteDownloadError extends BaseMvnxError_1{constructor(context,cause){super("EREMOTEDOWNLOAD",context,cause)}get details(){return`Failed to download "${this.context.url}" to local destination "${this.context.destination}".`}get solution(){return"This issue might have rather different causes and thus different solutions may apply:\n  * Make sure that you're connected to the internet.\n  * Check if you have enough free space to accomodate the downloaded file.\n  * Check if you have the correct permissions to create the destination file."}}var RemoteDownloadError_1=RemoteDownloadError;async function download(url,destination){return new Promise((function(resolve,reject){https.get(url,(function(response){if(200!==response.statusCode)return void resolve(!1);const output=fs.createWriteStream(destination);response.pipe(output),output.on("finish",(function(){output.end(()=>resolve(!0))})),output.on("error",(function(err){reject(new RemoteDownloadError_1({url:url,destination:destination},err)),fs.unlinkSync(destination)}))})).on("error",(function(err){reject(new RemoteDownloadError_1({url:url,destination:destination},err))}))}))}var remote={download:download};class ArtifactNotFoundError extends BaseMvnxError_1{constructor(context){super("EARTIFACTNOTFOUND",context)}get details(){let text=`Could not retrieve the aritfact "${this.context.artifactName}". Tried the following sources:`;return this.context.localArtifactPath&&(text+=`\n  * Local Path: ${this.context.localArtifactPath}`),this.context.remoteArtifactUrl&&(text+=`\n  * Remote URL: ${this.context.remoteArtifactUrl}`),text}get solution(){return"Please try the following options:\n  * Check if you've spelled the artifact correctly.\n  * Check if the artifact is available in the local/remote repository.\n  * Omit --ignore-local/--only-local."}}var ArtifactNotFoundError_1=ArtifactNotFoundError;class InvalidArtifactError extends BaseMvnxError_1{constructor(context){super("EINVALIDARTIFACT",context)}get details(){return`Failed to parse the specified artifact "${this.context.artifactName}".`}get solution(){return"Please check if you've spelled the artifact correctly! Try artifact names of the form\n\n  <groupId>:<artifactId>:<version>\n\nIf you're sure that the specified artifact name is correct, then please submit an issue to\n\n  https://github.com/mvnx/mvnx/issues"}}var InvalidArtifactError_1=InvalidArtifactError;const{homedir:homedir}=os,mvnArtifactFilename=filename_1.default,mvnArtifactNameParser=parse$2.default,mvnArtifactUrl=artifactUrl.default,ARTIFACT_NAME_REGEX=/^[a-zA-Z0-9][a-zA-Z0-9_:.-]*?[a-zA-Z0-9]$/g;function getArtifactFilename(artifact){return mvnArtifactFilename(artifact)}function parseArtifactName(artifactName){try{const artifact=mvnArtifactNameParser(artifactName);return artifact.groupIdSegments=artifact.groupId.split("."),artifact.filename=getArtifactFilename(artifact),artifact}catch{throw new InvalidArtifactError_1({artifactName:artifactName})}}function getArtifactUrlInRemoteRepository(artifact,remoteRepository){return mvnArtifactUrl(artifact,remoteRepository)}function getLocalRepositoryPath(predefinedLocalRepository){return predefinedLocalRepository||path.join(homedir(),".m2")}function getLocalArtifactPath(artifact,predefinedLocalRepository){const localRepositoryPath=getLocalRepositoryPath(predefinedLocalRepository);return path.join(localRepositoryPath,"repository",...artifact.groupIdSegments,artifact.artifactId,artifact.version,artifact.filename)}async function canReadLocalArtifact(path){try{return await fs.promises.access(path,fs.constants.R_OK),!0}catch(e){return!1}}async function rmdirp(from,to){const fromSegments=from.split(path.sep),toSegments=to.split(path.sep).slice(fromSegments.length);for(let i=toSegments.length;i>=0;--i){const deletePath=path.join(...fromSegments,...toSegments.slice(0,i));await fs.promises.rmdir(deletePath)}}async function obtainArtifact(options){const artifact=parseArtifactName(options.artifactName);let localArtifactPath=null;if(options.useLocalRepository&&(localArtifactPath=getLocalArtifactPath(artifact,options.localRepository),log_1(`Searcing for artifact in the local repository at\n  ${localArtifactPath}`),await canReadLocalArtifact(localArtifactPath)))return log_1(`Artifact found in the local repository at\n  ${localArtifactPath}`),{path:localArtifactPath,temporary:!1};let remoteArtifactUrl=null;if(options.useRemoteRepository){let downloadedArtifactPath,temporary;remoteArtifactUrl=await getArtifactUrlInRemoteRepository(artifact,options.remoteRepository),log_1(`Attempting to retrieve artifact from remote repository at\n  ${remoteArtifactUrl}`);let firstCreatedDirectoryForDownload=null;localArtifactPath?(firstCreatedDirectoryForDownload=await mkdirp_1(path.dirname(localArtifactPath)),downloadedArtifactPath=localArtifactPath,log_1(`Artifact will be saved to the local repository at\n ${localArtifactPath}`),temporary=!1):(downloadedArtifactPath=artifact.filename,temporary=!0);let foundInRemoteRepository=null;try{foundInRemoteRepository=await remote.download(remoteArtifactUrl,downloadedArtifactPath)}finally{firstCreatedDirectoryForDownload&&!foundInRemoteRepository&&await rmdirp(firstCreatedDirectoryForDownload,path.dirname(localArtifactPath))}if(foundInRemoteRepository)return log_1(`Retrieved artifact from remote repository\n  ${remoteArtifactUrl}`),{path:downloadedArtifactPath,temporary:temporary}}throw new ArtifactNotFoundError_1({artifactName:options.artifactName,localArtifactPath:localArtifactPath,remoteArtifactUrl:remoteArtifactUrl})}function probablyAnArtifactName(str){return!!str.match(ARTIFACT_NAME_REGEX)&&str.split(":").length>=3}var maven={obtainArtifact:obtainArtifact,probablyAnArtifactName:probablyAnArtifactName};class UnrecognizableArtifactError extends BaseMvnxError_1{constructor(){super("EUNRECOGNIZABLEARTIFACT",{})}get details(){return"Failed to recognize the artifact argument."}get solution(){return"Try artifact names of the form\n\n  <groupId>:<artifactId>:<version>\n\nIf you're sure that the specified artifact name is correct, then please submit an issue to\n\n  https://github.com/mvnx/mvnx/issues"}}var UnrecognizableArtifactError_1=UnrecognizableArtifactError,name="mvnx",version$1="1.2.3",description="Execute JARs from maven repositories with no strings attached.",main="dist/index.js",bin={mvnx:"bin/mvnx.js"},scripts={bundle:"npm run version && rollup -c && node ./scripts/replace-extend.js && terser dist/index.js -c -o dist/index.js",lint:"standard","lint:fix":"standard --fix",test:"npm run lint",version:"what-version -f npm.version git.branch git.hash > src/version.json"},husky={hooks:{"pre-commit":"npm run lint"}},repository={type:"git",url:"git+https://github.com/mvnx/mvnx.git"},author="Attila Bagossy",license="Apache-2.0",bugs={url:"https://github.com/mvnx/mvnx/issues"},homepage="https://github.com/mvnx/mvnx#readme",standard={ignore:"dist/*"},devDependencies={"@rollup/plugin-commonjs":"11.0.2","@rollup/plugin-json":"4.0.2","@rollup/plugin-node-resolve":"7.1.1",chalk:"4.0.0",husky:"4.2.3",mkdirp:"1.0.3","mvn-artifact-filename":"4.1.0","mvn-artifact-name-parser":"4.1.0","mvn-artifact-url":"4.1.0",pkg:"4.4.5",rollup:"2.3.2","rollup-plugin-node-externals":"2.1.3",standard:"14.3.3",terser:"^4.6.10",yargs:"15.3.1"},dependencies={},files=["bin"],_package={name:name,version:version$1,description:description,main:main,bin:bin,scripts:scripts,husky:husky,repository:repository,author:author,license:license,bugs:bugs,homepage:homepage,standard:standard,devDependencies:devDependencies,dependencies:dependencies,files:files},_package$1=Object.freeze({__proto__:null,name:name,version:version$1,description:description,main:main,bin:bin,scripts:scripts,husky:husky,repository:repository,author:author,license:license,bugs:bugs,homepage:homepage,standard:standard,devDependencies:devDependencies,dependencies:dependencies,files:files,default:_package}),require$$0=getCjsExportFromNamespace(_package$1);function splitArgv(originalArgv){const artifactArgIndex=originalArgv.findIndex(maven.probablyAnArtifactName);if(-1===artifactArgIndex)throw new UnrecognizableArtifactError_1;return{cliArgv:originalArgv.slice(0,artifactArgIndex+1),artifactArgv:originalArgv.slice(artifactArgIndex+1)}}function justDisplayHelpOrVersion(originalArgv){if(2===originalArgv.length)return originalArgv.push("-h"),!0;if(3===originalArgv.length){if("-h"===originalArgv[2]||"--help"===originalArgv[2])return!0;if("-v"===originalArgv[2]||"--version"===originalArgv[2])return!0}return!1}function retreiveVersion(){return require$$0.version}function cli(originalArgv){let split=null;justDisplayHelpOrVersion(originalArgv)||(split=splitArgv(originalArgv));const yargsArgv=yargs_1$1(split?split.cliArgv.slice(2):originalArgv.slice(2)).usage("mvnx <groupid>:<artifactId>:<version>").example('mvnx com.github.ricksbrown:cowsay:1.1.0 "Hello, World!"',"Say hello with a friendly cow!").epilogue("For more information, please visit https://github.com/mvnx/mvnx").options({"ignore-local":{describe:"Ignore pre-existing artifacts in the local repository and attempt to download the requested artifact from the remote repository.",type:"boolean",conflicts:["only-local"]},"only-local":{describe:"Attempt to find the requested artifact in the local repository only. Will not make requests to any remote repository.",type:"boolean",conflicts:["ignore-local"]},"java-executable":{alias:"j",describe:"Custom java executable path and options.",type:"string",default:"java"},"local-repository":{alias:"l",describe:"Path to a local repository. Will attempt to use the default local repository ~/.m2 if missing",type:"string"},"remote-repository":{alias:"r",describe:"URL of a remote repository. Will use Maven Central by default.",type:"string",default:"https://repo1.maven.org/maven2/"},quiet:{alias:"q",describe:"Suppress mvnx output (except for errors) and display output only from the JVM.",type:"boolean"}}).help().alias("help","h").version(retreiveVersion()).alias("version","v").strict(!0).argv;return yargsArgv.arguments=split.artifactArgv,yargsArgv.artifact=yargsArgv._[0],yargsArgv}function makeObtainOptionsFromArgv(argv){const options={artifactName:argv.artifact};return argv.ignoreLocal||(options.useLocalRepository=!0,options.localRepository=argv.localRepository),argv.onlyLocal||(options.useRemoteRepository=!0,options.remoteRepository=argv.remoteRepository),options}function makeExecuteOptions(artifactPath,argv){return{jar:artifactPath,arguments:argv.arguments,javaExecutable:argv.javaExecutable}}async function run(originalArgv){const parsedArgv=cli(originalArgv);log_1.configure({quiet:parsedArgv.quiet});const obtainOptions=makeObtainOptionsFromArgv(parsedArgv);let obtainedArtifact;try{obtainedArtifact=await maven.obtainArtifact(obtainOptions),obtainedArtifact||process.exit(1);const executeOptions=makeExecuteOptions(obtainedArtifact.path,parsedArgv);await java.executeJar(executeOptions)}finally{obtainedArtifact&&obtainedArtifact.temporary&&await fs.promises.unlink(obtainedArtifact.path)}}var src={run:run},src_1=src.run;exports.default=src,exports.run=src_1;